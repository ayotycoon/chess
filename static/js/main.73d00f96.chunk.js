(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{24:function(i,n,e){},25:function(i,n,e){},35:function(i,n,e){"use strict";e.r(n);var t=e(0),o=e.n(t),s=e(16),a=e.n(s),r=(e(24),e(19)),d=e(2),h=e(8),c=e(3),l=e(9),p=e(11),u=e(7),x=e(6),v=!Object({NODE_ENV:"production",PUBLIC_URL:"/games",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).production,b=function(i){v&&console.warn(i)},I=function(){function i(n,e,t,o,s){Object(c.a)(this,i),this.id=void 0,this.name=void 0,this.icon=void 0,this.isPieceWhite=void 0,this.prevPositionYIndex=void 0,this.prevPositionXIndex=void 0,this.prevPosition=void 0,this.positionYIndex=void 0,this.positionXIndex=void 0,this.position=void 0,this.id=n.id,this.name=n.name,this.icon=n.icon,this.isPieceWhite=n.isPieceWhite,this.prevPositionYIndex=e,this.prevPositionXIndex=t,this.positionYIndex=o,this.positionXIndex=s,this.prevPosition="".concat(f.availableXMovements[this.prevPositionXIndex]).concat(f.availableYMovements[this.prevPositionYIndex]),this.position="".concat(f.availableXMovements[this.positionXIndex]).concat(f.availableYMovements[this.positionYIndex])}return Object(l.a)(i,[{key:"toJSON",value:function(){return[this.id,this.name,this.icon,this.isPieceWhite,this.prevPositionYIndex,this.prevPositionXIndex,this.positionYIndex,this.positionXIndex,this.prevPosition,this.position]}},{key:"toCSV",value:function(){return[this.name,this.isPieceWhite?"white":"black",this.prevPosition,this.position]}},{key:"fromJSON",value:function(i){this.id=i[0],this.name=i[1],this.icon=i[2],this.isPieceWhite=i[3],this.prevPositionYIndex=i[4],this.prevPositionXIndex=i[5],this.positionYIndex=i[6],this.positionXIndex=i[7],this.prevPosition=i[8],this.position=i[9]}}]),i}(),f=function(){function i(n,e,t,o,s){var a=this;Object(c.a)(this,i),this.name="piece",this.icon="chess",this.positionXIndex=0,this.positionYIndex=0,this.isPieceWhite=!0,this.successfulMovements=0,this.chessBoard=new g(!0),this.id=0,this.king=null,this.oppKing=null,this.anticipateOppMoves=function(){for(var i={},n=0;n<a.chessBoard.board.length;n++)for(var e=0;e<a.chessBoard.board[n].length;e++){var t=a.chessBoard.board[n][e];t&&t.isPieceWhite!==a.isPieceWhite&&t.availableMoves().forEach((function(n){i[n.positionYIndex+","+n.positionXIndex]=!0}))}return i},this.anticipateMyMoves=function(){for(var i={},n=0;n<a.chessBoard.board.length;n++)for(var e=0;e<a.chessBoard.board[n].length;e++){var t=a.chessBoard.board[n][e];t&&t.isPieceWhite===a.isPieceWhite&&t.availableMoves().forEach((function(n){i[n.positionYIndex+","+n.positionXIndex]=!0}))}return i},this.availableMoves=function(){return[]},void 0==s?(i.globalId++,this.id=i.globalId):this.id=s,this.chessBoard=n,this.isPieceWhite=o,this.positionYIndex=e,this.positionXIndex=t}return Object(l.a)(i,[{key:"move",value:function(i,n,e){var t,o,s,a,r=new I(this.chessBoard.pieceHash[this.id],this.positionYIndex,this.positionXIndex,i,n),d=this.availableMoves(),h=!1;if(d.forEach((function(e){e.positionYIndex===i&&e.positionXIndex===n&&(h=!0)})),!h)return!1;var c=this.chessBoard.board[this.positionYIndex][this.positionXIndex];this.chessBoard.board[this.positionYIndex][this.positionXIndex]=null;var l=this.positionYIndex,p=this.positionXIndex;return this.positionYIndex=i,this.positionXIndex=n,this.chessBoard.board[this.positionYIndex][this.positionXIndex]=c,this.anticipateOppMoves()[(null===(t=this.king)||void 0===t?void 0:t.positionYIndex)+","+(null===(o=this.king)||void 0===o?void 0:o.positionXIndex)]?(alert("king at risk"),this.chessBoard.board[this.positionYIndex][this.positionXIndex]=null,this.positionYIndex=l,this.positionXIndex=p,this.chessBoard.board[l][p]=c,!1):(this.anticipateMyMoves()[(null===(s=this.oppKing)||void 0===s?void 0:s.positionYIndex)+","+(null===(a=this.oppKing)||void 0===a?void 0:a.positionXIndex)]&&alert("check"),e&&e(),this.successfulMovements++,this.chessBoard.history.unshift(r),b(r),!0)}},{key:"toString",value:function(){return{id:this.id,name:this.name,type:this.isPieceWhite?"White":"Black",position:"".concat(i.availableXMovements[this.positionXIndex]).concat(i.availableYMovements[this.positionYIndex])}}},{key:"currentPosition",value:function(){return"Y = ".concat(this.positionYIndex,", X = ").concat(this.positionXIndex)}}]),i}();f.availableXMovements=["A","B","C","D","E","F","G","H"],f.availableYMovements=["8","7","6","5","4","3","2","1"],f.globalId=0;var Y=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="queen",r.icon="fas fa-chess-queen",r.availableMoves=function(){for(var i=[],n=function(n,e){if(n<0||n>7||e<0||e>7)return!0;var t=r.chessBoard.board[n][e];if(t)return t.isPieceWhite===r.isPieceWhite||i.push({positionYIndex:n,positionXIndex:e}),!0;i.push({positionYIndex:n,positionXIndex:e})},e=r.positionYIndex+1;e<8;e++){if(n(e,r.positionXIndex))break}for(var t=r.positionYIndex-1;t>=0;t--){if(n(t,r.positionXIndex))break}for(var o=r.positionXIndex+1;o<8;o++){var s=o;if(n(r.positionYIndex,s))break}for(var a=r.positionXIndex-1;a>=0;a--){var d=a;if(n(r.positionYIndex,d))break}for(var h=1;h<8-r.positionYIndex;h++){if(n(r.positionYIndex+h,r.positionXIndex+h))break}for(var c=1;c<Math.max(r.positionYIndex,r.positionXIndex);c++){if(n(r.positionYIndex-c,r.positionXIndex-c))break}for(var l=1;l<8-r.positionYIndex;l++){if(n(r.positionYIndex+l,r.positionXIndex-l))break}for(var p=1;p<=r.positionYIndex;p++){if(n(r.positionYIndex-p,r.positionXIndex+p))break}return i.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),j=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="pawn",r.icon="fas fa-chess-pawn",r._parent=f.prototype,r.move=function(i,n){return r._parent.move.apply(Object(p.a)(r),[i,n,function(){if(r.isPieceWhite&&0===i||!r.isPieceWhite&&7===i){var n=new Y(r.chessBoard,i,r.positionXIndex,r.isPieceWhite,r.id);n.king=r.king,n.oppKing=r.oppKing,r.chessBoard.board[r.positionYIndex][r.positionXIndex]=n}}])},r.availableMoves=function(){var i,n,e=[],t=r.isPieceWhite?-1:1,o=r.isPieceWhite?-2:2;return r.positionYIndex+t<f.availableXMovements.length&&r.positionYIndex+t>=0&&!r.chessBoard.board[r.positionYIndex+t][r.positionXIndex]&&(e.push({positionYIndex:r.positionYIndex+t,positionXIndex:r.positionXIndex}),0===r.successfulMovements&&r.positionYIndex+o<f.availableYMovements.length&&r.positionYIndex+o>=0&&!r.chessBoard.board[r.positionYIndex+o][r.positionXIndex]&&e.push({positionYIndex:r.positionYIndex+o,positionXIndex:r.positionXIndex})),r.positionYIndex+t<f.availableYMovements.length&&r.positionYIndex+t>=0&&r.chessBoard.board[r.positionYIndex+t][r.positionXIndex+1]&&(null===(i=r.chessBoard.board[r.positionYIndex+t][r.positionXIndex+1])||void 0===i?void 0:i.isPieceWhite)===!r.isPieceWhite&&e.push({positionYIndex:r.positionYIndex+t,positionXIndex:r.positionXIndex+1}),r.positionYIndex+t<f.availableYMovements.length&&r.positionYIndex+t>=0&&r.chessBoard.board[r.positionYIndex+t][r.positionXIndex-1]&&(null===(n=r.chessBoard.board[r.positionYIndex+t][r.positionXIndex-1])||void 0===n?void 0:n.isPieceWhite)===!r.isPieceWhite&&e.push({positionYIndex:r.positionYIndex+t,positionXIndex:r.positionXIndex-1}),e.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),X=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="bishop",r.icon="fas fa-chess-bishop",r.availableMoves=function(){for(var i=[],n=function(n,e){if(n<0||n>7||e<0||e>7)return!0;var t=r.chessBoard.board[n][e];if(t)return t.isPieceWhite===r.isPieceWhite||i.push({positionYIndex:n,positionXIndex:e}),!0;i.push({positionYIndex:n,positionXIndex:e})},e=1;e<8-r.positionYIndex;e++){if(n(r.positionYIndex+e,r.positionXIndex+e))break}for(var t=1;t<Math.max(r.positionYIndex,r.positionXIndex);t++){if(n(r.positionYIndex-t,r.positionXIndex-t))break}for(var o=1;o<8-r.positionYIndex;o++){if(n(r.positionYIndex+o,r.positionXIndex-o))break}for(var s=1;s<=Math.max(r.positionYIndex,r.positionXIndex);s++){if(n(r.positionYIndex-s,r.positionXIndex+s))break}return i.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),m=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="rook",r.icon="fas fa-chess-rook",r.availableMoves=function(){for(var i=[],n=function(n,e){if(n<0||n>7||e<0||e>7)return!0;var t=r.chessBoard.board[n][e];if(t)return t.isPieceWhite===r.isPieceWhite||i.push({positionYIndex:n,positionXIndex:e}),!0;i.push({positionYIndex:n,positionXIndex:e})},e=r.positionYIndex+1;e<8;e++){if(n(e,r.positionXIndex))break}for(var t=r.positionYIndex-1;t>=0;t--){if(n(t,r.positionXIndex))break}for(var o=r.positionXIndex+1;o<8;o++){var s=o;if(n(r.positionYIndex,s))break}for(var a=r.positionXIndex-1;a>=0;a--){var d=a;if(n(r.positionYIndex,d))break}return i.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),O=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="king",r.icon="fas fa-chess-king",r.availableMoves=function(){for(var i=[],n=function(n,e){if(n<0||n>7||e<0||e>7)return!0;var t=r.chessBoard.board[n][e];if(t)return t.isPieceWhite===r.isPieceWhite||i.push({positionYIndex:n,positionXIndex:e}),!0;i.push({positionYIndex:n,positionXIndex:e})},e=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,-1],[-1,1],[1,-1]],t=0;t<e.length;t++){var o=e[t];n(r.positionYIndex+o[0],r.positionXIndex+o[1])}return i.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),P=function(i){Object(u.a)(e,i);var n=Object(x.a)(e);function e(i,t,o,s,a){var r;return Object(c.a)(this,e),(r=n.call(this,i,t,o,s,a)).name="knight",r.icon="fas fa-chess-knight",r.availableMoves=function(){for(var i=[],n=function(n,e){if(n<0||n>7||e<0||e>7)return!0;var t=r.chessBoard.board[n][e];if(t){if(t.isPieceWhite!==r.isPieceWhite)return i.push({positionYIndex:n,positionXIndex:e}),!0}else i.push({positionYIndex:n,positionXIndex:e})},e=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],t=0;t<e.length;t++){var o=e[t];n(r.positionYIndex+o[0],r.positionXIndex+o[1])}return i.map((function(i){return{positionYIndex:i.positionYIndex,positionY:f.availableYMovements[i.positionYIndex],positionXIndex:i.positionXIndex,positionX:f.availableXMovements[i.positionYIndex]}}))},r}return e}(f),g=function(){function i(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(c.a)(this,i),this.board=[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]],this.isWhiteTurnToPlay=!1,this.pieceHash={},this.history=[],this.initiated=!1,this.initiated||n||(this.init(),this.initiated=!0)}return Object(l.a)(i,[{key:"init",value:function(){var i=new O(this,0,3,!1);this.board[0][3]=i,this.board[0][0]=new m(this,0,0,!1),this.board[0][7]=new m(this,0,7,!1),this.board[0][1]=new P(this,0,1,!1),this.board[0][6]=new P(this,0,6,!1),this.board[0][4]=new Y(this,0,4,!1),this.board[0][2]=new X(this,0,2,!1),this.board[0][5]=new X(this,0,5,!1),this.board[1][0]=new j(this,1,0,!1),this.board[1][1]=new j(this,1,1,!1),this.board[1][2]=new j(this,1,2,!1),this.board[1][3]=new j(this,1,3,!1),this.board[1][4]=new j(this,1,4,!1),this.board[1][5]=new j(this,1,5,!1),this.board[1][6]=new j(this,1,6,!1),this.board[1][7]=new j(this,1,7,!1);var n=new O(this,7,3,!0);this.board[7][3]=n,this.board[7][0]=new m(this,7,0,!0),this.board[7][7]=new m(this,7,7,!0),this.board[7][1]=new P(this,7,1,!0),this.board[7][6]=new P(this,7,6,!0),this.board[7][4]=new Y(this,7,4,!0),this.board[7][2]=new X(this,7,2,!0),this.board[7][5]=new X(this,7,5,!0),this.board[6][0]=new j(this,6,0,!0),this.board[6][1]=new j(this,6,1,!0),this.board[6][2]=new j(this,6,2,!0),this.board[6][3]=new j(this,6,3,!0),this.board[6][4]=new j(this,6,4,!0),this.board[6][5]=new j(this,6,5,!0),this.board[6][6]=new j(this,6,6,!0),this.board[6][7]=new j(this,6,7,!0);for(var e=0;e<this.board.length;e++)for(var t=0;t<this.board[e].length;t++){var o=this.board[e][t];o&&(this.pieceHash[o.id]=o,o.isPieceWhite?(o.king=n,o.oppKing=i):(o.oppKing=n,o.king=i))}}},{key:"toString",value:function(){return JSON.stringify(this.board.map((function(i){return i.map((function(i){return i?"".concat(i.id,"-").concat(i.name):"null"}))})))}}]),i}(),W=(e(25),e(1));var w=function(i){var n=i.pieceWidth,e=i.horizontal,t=e?f.availableXMovements:f.availableYMovements;return Object(W.jsx)("div",{className:e?"Bar-X":"",children:t.map((function(i,t){return Object(W.jsx)("div",{className:e?"Bar-X":"Board-X",style:{width:n+"px",height:n+"px"},children:i},t)}))})};function k(){return Math.min(window.innerHeight,window.innerWidth)-150}var M=function(){var i=Object(t.useState)({boardWidth:k(),pieceWidth:k()/8}),n=Object(h.a)(i,2),e=n[0],o=n[1],s=Object(t.useState)([]),a=Object(h.a)(s,2),r=a[0],d=a[1],c=Object(t.useState)([]),l=Object(h.a)(c,2),p=l[0],u=l[1],x=Object(t.useState)({}),v=Object(h.a)(x,2),I=v[0],f=v[1],Y=Object(t.useState)(null),j=Object(h.a)(Y,2),X=j[0],m=j[1],O=Object(t.useRef)(null),P=Object(t.useState)(!0),M=Object(h.a)(P,2),y=M[0],B=M[1];function S(){O.current.isWhiteTurnToPlay=!O.current.isWhiteTurnToPlay,d(O.current.board),u(O.current.history),f({}),m(null),B(O.current.isWhiteTurnToPlay)}return Object(t.useEffect)((function(){O.current=new g,S();var i=function(){var i=k();o({boardWidth:i,pieceWidth:i/8})};return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[]),Object(W.jsx)("div",{className:"Whole-Body",children:Object(W.jsxs)("div",{className:"Chess-Field",children:[Object(W.jsxs)("div",{className:"Chess-Pre-Playable",children:[Object(W.jsx)(w,{pieceWidth:e.pieceWidth,horizontal:!0}),Object(W.jsxs)("div",{className:"Chess-Playable",children:[Object(W.jsx)(w,{pieceWidth:e.pieceWidth,horizontal:!1}),Object(W.jsx)("div",{className:"Board",style:{width:e.boardWidth+"px",height:e.boardWidth+"px"},children:r.map((function(i,n){return Object(W.jsx)("div",{className:"Board-Y",style:{display:"flex"},children:i.map((function(i,t){var o=I[n+","+t];return Object(W.jsx)("div",{onClick:function(){return function(i,n,e){if(I[n+","+e]){if(!(null===X||void 0===X?void 0:X.move(n,e)))return;S()}else if(i){if(b(i.toString()),y!==i.isPieceWhite)return f({}),void m(null);var t=i.availableMoves(),o={};t.forEach((function(i){o[i.positionYIndex+","+i.positionXIndex]=!0})),f(o),m(i)}else f({}),m(null)}(i,n,t)},className:"Board-X",style:{width:e.pieceWidth+"px",height:e.pieceWidth+"px",backgroundColor:t%2===0===(n%2===0)?"rgba(245, 222, 179, 0.596)":""},children:Object(W.jsx)("div",{className:i?y!==i.isPieceWhite?"Piece-inner-invalid":"Piece-inner-valid":"",style:{width:"70%",height:"70%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:o||i&&i===X?"rgba(255, 255, 0, 0.5)":""},children:i?Object(W.jsx)("i",{className:i.icon,style:{color:i.isPieceWhite?"white":"black"}}):""})},t)}))},n)}))}),Object(W.jsx)(w,{pieceWidth:e.pieceWidth,horizontal:!1})]}),Object(W.jsx)(w,{pieceWidth:e.pieceWidth,horizontal:!0})]}),Object(W.jsxs)("div",{className:"Side",style:{padding:"10px"},children:[Object(W.jsxs)("div",{className:"",style:{padding:"0 30px"},children:["Piece To Play",Object(W.jsx)("br",{}),Object(W.jsx)("i",{className:"fa fa-chess ",style:{color:y?"white":"black"}}),Object(W.jsx)("hr",{}),Object(W.jsxs)("div",{style:{textAlign:"center"},children:[0!=p.length&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("button",{onClick:function(){!function(i){var n="data:text/csv;charset=utf-8,";i.forEach((function(i){var e=i.toCSV().join(",");n+=e+"\r\n"}));var e=encodeURI(n),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","my_data.csv"),document.body.appendChild(t),t.click()}(p)},children:"Export"}),Object(W.jsx)("br",{})]}),p.map((function(i,n){return Object(W.jsxs)("div",{style:{fontSize:"13px",marginBottom:"5px",display:"flex",justifyContent:"center"},children:[Object(W.jsx)("div",{style:{marginRight:"5px"},children:Object(W.jsx)("i",{className:i.icon,style:{color:i.isPieceWhite?"white":"black"}})}),Object(W.jsxs)("div",{children:[i.prevPosition," ",Object(W.jsx)("i",{className:"fa fa-arrow-right"})," ",i.position]})]},n)}))]})]})," "]})]})})};var y=function(){return Object(W.jsx)(r.a,{basename:"/games",children:Object(W.jsxs)(d.d,{children:[Object(W.jsx)(d.b,{path:"/chess",component:M}),Object(W.jsx)(d.a,{path:"/",to:"chess"})]})})},B=function(i){i&&i instanceof Function&&e.e(3).then(e.bind(null,36)).then((function(n){var e=n.getCLS,t=n.getFID,o=n.getFCP,s=n.getLCP,a=n.getTTFB;e(i),t(i),o(i),s(i),a(i)}))};a.a.render(Object(W.jsx)(o.a.StrictMode,{children:Object(W.jsx)(y,{})}),document.getElementById("root")),B()}},[[35,1,2]]]);
//# sourceMappingURL=main.73d00f96.chunk.js.map