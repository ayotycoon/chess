{"version":3,"sources":["chess/engine/PieceMovement.ts","chess/engine/ChessPiece.ts","chess/engine/ChessQueen.ts","chess/engine/ChessPawn.ts","chess/engine/ChessBishop.ts","chess/engine/ChessRook.ts","chess/engine/ChessKing.ts","chess/engine/ChessKnight.ts","chess/engine/ChessBoard.ts","chess/misc/Bar.tsx","env.ts","misc/functions.ts","misc/data.ts","misc/StateProvider.tsx","chess/index.tsx","Home.tsx","checkers/engine/PieceMovement.ts","checkers/engine/CheckerPiece.ts","checkers/engine/CheckerQueen.ts","checkers/engine/CheckerPawn.ts","checkers/misc/index.ts","checkers/engine/CheckerBoard.ts","checkers/index.tsx","misc/Navbar.tsx","StolenIn60Seconds/misc/types.ts","StolenIn60Seconds/misc/utils/Subscription.ts","StolenIn60Seconds/misc/utils/index.ts","StolenIn60Seconds/misc/modules/linkedlist.ts","StolenIn60Seconds/misc/models/Item.ts","StolenIn60Seconds/misc/models/Wall.ts","StolenIn60Seconds/misc/models/Circle.ts","StolenIn60Seconds/misc/models/ImageItem.ts","StolenIn60Seconds/misc/models/Gate.ts","StolenIn60Seconds/misc/models/Tool.ts","StolenIn60Seconds/misc/scenes/Scene1.ts","StolenIn60Seconds/misc/draw.ts","StolenIn60Seconds/components/Button.tsx","StolenIn60Seconds/BottomPanel.tsx","StolenIn60Seconds/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PieceMovement","piece","prevPositionYIndex","prevPositionXIndex","positionYIndex","positionXIndex","id","name","icon","isPieceWhite","prevPosition","position","this","ChessPiece","availableXMovements","availableYMovements","el","chessBoard","ghostId","successfulMovements","ChessBoard","king","oppKing","anticipateOppMoves","_","i","board","length","j","cellPiece","availableMoves","forEach","m","anticipateMyMoves","cell","undefined","globalId","yIndex","xIndex","cb","movement","pieceHash","canmove","movements","temp","previousPositionYIndex","previousPositionXIndex","alert","addToMovement","type","ChessQueen","indexes","analyzeAndBreak","incY","incX","possiblePiece","push","Math","max","map","index","positionY","positionX","ChessPawn","_parent","prototype","move","apply","queen","incY1","incY2","ChessBishop","ChessRook","ChessKing","curr","ChessKnight","dummy","isWhiteTurnToPlay","killedHash","movementIndex","initiated","init","blackKing","whiteKing","JSON","stringify","r","n","getMovements","unshift","slice","Bar","pieceWidth","horizontal","arr","className","c","x","style","width","height","LOGGING","process","production","csvGenerator","data","csvContent","obj","row","toCSV","join","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","NAVS","to","img","f","min","window","innerHeight","innerWidth","StateContext","createContext","StateProvider","children","useState","showNav","setShowNav","optionsClicked","setOptionsClicked","time","states","stageProps","setStageProps","Provider","value","ChessGame","boardWidth","size","setSize","setBoard","movementHistory","setMovementHistory","setAvailableMoves","selectedPiece","setSelectedPiece","chessBoardRef","useRef","setIsWhiteTurnToPlay","canUndo","canRedo","setUndoAndRedo","useContext","reloadBoard","current","onPieceClick","y","o","toString","console","warn","a","useEffect","addEventListener","removeEventListener","display","shouldHighlight","onClick","backgroundColor","justifyContent","alignItems","color","performUndo","performRedo","padding","textAlign","key","fontSize","marginBottom","marginRight","Home","boundWidth","setBoundWidth","elem","querySelector","rect","getBoundingClientRect","nav","verticalAlign","background","backgroundSize","visibility","jumpPosition","CheckerPiece","CheckerBoard","clone","serialize","s","p","CheckerQueen","preArr","log","inBound","addToHash","hash","preventDFS","val","n1","n2","n3","n4","Object","values","CheckerPawn","checkerPieceDeSerialize","newBoard","newCheckerBoard","pos","deSerialize","str","checkerBoard","parse","_board","_movements","_movementIndex","_isWhiteTurnToPlay","_killedHash","_piece","CheckersGame","checkerBoardRef","localStorage","setItem","getItem","NavBar","Direction","history","useHistory","location","pathname","goBack","cursor","src","alt","float","Subscription","fns","Set","emit","fn","subscribe","add","unsubscribe","delete","gridToPosition","gridX","gridY","positionToGrid","keyboardObs","stageObs","node","next","prev","LinkedList","globalRef","head","tail","setCurr","_x","Item","ctx","state","grid","dimensions","noOfLines","boundaries","draw","all","getState","debug","cordinates","getBoundaries","each","boundary","fillText","highlight","beginPath","strokeStyle","strokeRect","calculateBoundaries","param","action","StateActionItem","stateActionHistory","timeElapsedAction","second","resetToTime","_resetToTime","resetNode","Wall","lineWidth","fill","lines","diff","_width","widthWithPosition","heightWithPosition","moveTo","lineTo","stroke","_height","updateGrid","HWall","VWall","Circle","goTo","previousPosition","getPreviousPosition","prevGrid","res","reject","accept","down","getPreviousGrid","up","right","left","arc","PI","fillStyle","currentSecond","ImageItem","Image","image","drawImage","onload","Flower","HCar","Gate","cross","opened","endX","endY","HGate","VGate","Hammer","title","elapsed","Scene1","canvas","canvasContainer","generateGrid","scene","player","stack","vertical","keyCb","validateMove","direction","isVertical","isHorizontal","increments","playerPosition","itemInteraction","render","_moveFrame","frameX","frameY","distWidth","clientWidth","distHeight","clientHeight","previousInStack","frame","scroll","scrollTop","total","scrollHeight","pop","scrollLeft","scrollWidth","moveFrame","e","event","keyCode","ctrlKey","undo","valid","car","Promise","resolve","isStateActionItem","toolsPrompt","tool","setActionState","getElapsed","clearRect","clearCanvas","generateScenes","getPlayerMoves","getLastActionSecond","drawLines","totalDrawn","group","getContext","globalCompositeOperation","fillRect","drawGrid","Button","props","borderRadius","disabled","CheckButton","CancelButton","Prompt","selectedTool","setSelectedTool","top","zIndex","maxWidth","activeTool","marginLeft","overflow","border","dataRef","TimePill","floor","seconds","fontWeight","BottomPanel","statePropsRef","obs","bottom","StolenIn60SecondsGame","canvasRef","canvasContainerRef","handlers","useSwipeable","onSwiped","eventData","dir","ref","App","basename","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0ea45e2e.chunk.js","sourcesContent":["import { ChessBoard } from \"./ChessBoard\";\nimport { ChessKing } from \"./ChessKing\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class PieceMovement {\n    id: number;\n    name: string;\n    icon: string;\n    isPieceWhite: boolean\n\n    prevPositionYIndex: number;\n    prevPositionXIndex: number;\n    prevPosition: string;\n    positionYIndex: number;\n    positionXIndex: number;\n    position: string;\n\n    constructor(\n        piece: ChessPiece,\n        prevPositionYIndex: number,\n        prevPositionXIndex: number,\n        positionYIndex: number,\n        positionXIndex: number,\n\n    ) {\n\n        this.id = piece.id;\n        this.name = piece.name;\n        this.icon = piece.icon;\n        this.isPieceWhite = piece.isPieceWhite;\n        this.prevPositionYIndex = prevPositionYIndex;\n        this.prevPositionXIndex = prevPositionXIndex;\n        this.positionYIndex = positionYIndex;\n        this.positionXIndex = positionXIndex;\n        this.prevPosition = `${ChessPiece.availableXMovements[this.prevPositionXIndex]}${ChessPiece.availableYMovements[this.prevPositionYIndex]}`\n        this.position = `${ChessPiece.availableXMovements[this.positionXIndex]}${ChessPiece.availableYMovements[this.positionYIndex]}`\n\n    }\n    toJSON() {\n        return [\n            this.id,\n            this.name,\n            this.icon,\n            this.isPieceWhite,\n            this.prevPositionYIndex,\n            this.prevPositionXIndex,\n            this.positionYIndex,\n            this.positionXIndex,\n            this.prevPosition,\n            this.position,\n\n        ]\n\n    }\n    toCSV() {\n        return [\n            // this.id,\n            this.name,\n            this.isPieceWhite?'white':'black',\n            // this.prevPositionYIndex,\n            // this.prevPositionXIndex,\n            // this.positionYIndex,\n            // this.positionXIndex,\n            this.prevPosition,\n            this.position,\n\n        ]\n\n    }\n    fromJSON(el:any []){\n        this.id = el[0]\n        this.name = el[1]\n        this.icon = el[2]\n        this.isPieceWhite = el[3]\n        this.prevPositionYIndex = el[4]\n        this.prevPositionXIndex = el[5]\n        this.positionYIndex = el[6]\n        this.positionXIndex = el[7]\n        this.prevPosition = el[8]\n        this.position = el[9]\n\n    }\n\n\n\n}\n","import { devLog } from \"../../env\";\nimport { ChessBoard } from \"./ChessBoard\";\nimport { ChessKing } from \"./ChessKing\";\nimport { PieceMovement } from \"./PieceMovement\";\n\nexport abstract class ChessPiece {\n    name = 'piece'\n    icon = 'chess'\n    static availableXMovements = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\n    static availableYMovements = ['8', '7', '6', '5', '4', '3', '2', '1'];\n\n    positionXIndex = 0;\n    positionYIndex = 0;\n    isPieceWhite = true;\n    successfulMovements = 0;\n\n    chessBoard: ChessBoard = new ChessBoard(true);\n    static globalId = 0\n    id = 0\n\n    king: ChessKing | null = null;\n    oppKing: ChessKing | null = null;\n\n    constructor(\n        chessBoard: ChessBoard,\n        positionYIndex: number,\n        positionXIndex: number,\n        isPieceWhite: boolean,\n        ghostId?: number\n    ) {\n        if (ghostId == undefined) {\n            ChessPiece.globalId++;\n            this.id = ChessPiece.globalId;\n        } else {\n            this.id = ghostId\n        }\n\n\n\n        this.chessBoard = chessBoard;\n        this.isPieceWhite = isPieceWhite;\n        this.positionYIndex = positionYIndex;\n        this.positionXIndex = positionXIndex;\n\n    }\n\n    anticipateOppMoves = () => {\n        const _: { [id: string]: boolean } = {}\n        for (let i = 0; i < this.chessBoard.board.length; i++) {\n            for (let j = 0; j < this.chessBoard.board[i].length; j++) {\n                const cellPiece = this.chessBoard.board[i][j];\n                if (cellPiece && cellPiece.isPieceWhite !== this.isPieceWhite) {\n                    cellPiece.availableMoves()\n                        .forEach(m => {\n                            _[m.positionYIndex + \",\" + m.positionXIndex] = true\n                        })\n                }\n\n            }\n        }\n        return _;\n    }\n    anticipateMyMoves = () => {\n        const _ = {}\n        for (let i = 0; i < this.chessBoard.board.length; i++) {\n            for (let j = 0; j < this.chessBoard.board[i].length; j++) {\n                const cell = this.chessBoard.board[i][j];\n                if (cell && cell.isPieceWhite === this.isPieceWhite) {\n                    cell.availableMoves()\n                        .forEach(m => {\n                            _[m.positionYIndex + \",\" + m.positionXIndex] = true\n                        })\n                }\n\n            }\n        }\n        return _;\n    }\n\n    move(yIndex: number, xIndex: number, cb?: () => void) {\n        const movement = new PieceMovement(this.chessBoard.pieceHash[this.id], this.positionYIndex, this.positionXIndex, yIndex, xIndex);\n        const availableMoves = this.availableMoves();\n        let canmove = false;\n        availableMoves.forEach(movements => {\n\n            if (movements.positionYIndex === yIndex && movements.positionXIndex === xIndex) {\n                canmove = true;\n            }\n        })\n\n        if (!canmove) {\n            return false;\n        }\n        // swap pos in board;\n        const temp = this.chessBoard.board[this.positionYIndex][this.positionXIndex]\n\n\n\n        this.chessBoard.board[this.positionYIndex][this.positionXIndex] = null;\n\n        const previousPositionYIndex = this.positionYIndex;\n        const previousPositionXIndex = this.positionXIndex;\n        this.positionYIndex = yIndex;\n        this.positionXIndex = xIndex;\n\n        // assign new pos\n        this.chessBoard.board[this.positionYIndex][this.positionXIndex] = temp;\n        // test to see if the move puts the king at risk\n        const oppMoves = this.anticipateOppMoves();\n        if (oppMoves[this.king?.positionYIndex + ',' + this.king?.positionXIndex]) {\n            // king is at risk\n            // revert move\n            alert('king at risk')\n\n            this.chessBoard.board[this.positionYIndex][this.positionXIndex] = null;\n\n            this.positionYIndex = previousPositionYIndex;\n            this.positionXIndex = previousPositionXIndex;\n\n            this.chessBoard.board[previousPositionYIndex][previousPositionXIndex] = temp;\n\n\n            return false;\n        }\n        const myMoves = this.anticipateMyMoves();\n        if (myMoves[this.oppKing?.positionYIndex + ',' + this.oppKing?.positionXIndex]) {\n            // king is at risk\n            // revert move\n            alert('check')\n\n\n\n        }\n\n        if (cb) {\n            cb()\n        }\n\n        this.successfulMovements++;\n        this.chessBoard.addToMovement(movement);\n        //devLog(movement)\n        return true;\n\n\n    }\n    availableMoves = () => {\n        return [] as {\n            positionYIndex: number;\n            positionY: string;\n            positionXIndex: number;\n            positionX: string;\n        }[]\n\n    }\n\n    toString() {\n        return {\n            id: this.id,\n            name: this.name,\n            type: this.isPieceWhite ? 'White' : 'Black',\n            position: `${ChessPiece.availableXMovements[this.positionXIndex]}${ChessPiece.availableYMovements[this.positionYIndex]}`\n        }\n            ;\n    }\n    currentPosition() {\n        return `Y = ${this.positionYIndex}, X = ${this.positionXIndex}`\n    }\n\n\n}\n","import { ChessBoard } from \"./ChessBoard\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class ChessQueen extends ChessPiece {\n    name = 'queen'\n    icon = 'fas fa-chess-queen'\n    constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n        super(chessBoard,positionYIndex, positionXIndex,isPieceWhite,ghostId);\n    }\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n\n\n        }[] = [];\n\n        // check up\n\n\n\n\n        const analyzeAndBreak = (incY,incX) => {\n            if(incY < 0 || incY > 7 || incX < 0 || incX >7) return true;\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                return true\n\n            } else {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n                return true\n\n            }\n        }\n\n\n\n            for (let i = this.positionYIndex + 1; i < 8; i++) {\n                const incY = i;\n                const incX = this.positionXIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionYIndex - 1; i >= 0; i--) {\n                const incY = i;\n                const incX = this.positionXIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionXIndex + 1; i < 8; i++) {\n                const incX = i;\n                const incY = this.positionYIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionXIndex - 1; i >= 0; i--) {\n                const incX = i;\n                const incY = this.positionYIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n\n            // do diagonal \n\n\n            for (let i = 1; i < (8-this.positionYIndex); i++) {\n                const incY = this.positionYIndex + i;\n                const incX = this.positionXIndex + i;\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = 1; i < Math.max(this.positionYIndex, this.positionXIndex); i++) {\n                const incY = this.positionYIndex - i;\n                const incX = this.positionXIndex -i\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n        \n\n\n            for (let i = 1; i < (8-this.positionYIndex); i++) {\n                const incY = this.positionYIndex + i;\n                const incX = this.positionXIndex - i;\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = 1; i <= this.positionYIndex; i++) {\n                const incY = this.positionYIndex - i;\n                const incX = this.positionXIndex + i\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n        \n\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n}\n","import { ChessQueen } from \"./ChessQueen\";\nimport { ChessPiece } from \"./ChessPiece\";\nimport { ChessBoard } from \"./ChessBoard\";\n\nexport class ChessPawn extends ChessPiece {\n    name = 'pawn'\n    icon = 'fas fa-chess-pawn'\n    _parent = ChessPiece.prototype\n     constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n        super(chessBoard, positionYIndex, positionXIndex, isPieceWhite,ghostId);\n    }\n\n    move = (yIndex:number, xIndex:number) => {\n\n        return this._parent.move.apply(this, [yIndex, xIndex, () => {\n            // check if its promotable\n            if (this.isPieceWhite && yIndex === 0 || !this.isPieceWhite && yIndex === 7) {\n                // promote\n                const queen = new ChessQueen(this.chessBoard, yIndex, this.positionXIndex, this.isPieceWhite,this.id);\n                queen.king = this.king;\n                queen.oppKing = this.oppKing;\n                this.chessBoard.board[this.positionYIndex][this.positionXIndex] = queen;\n            }\n\n\n        }])\n    }\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n        }[] = [];\n        const incY1 = !this.isPieceWhite ? 1 : -1;\n        const incY2 = !this.isPieceWhite ? 2 : -2;\n\n\n\n\n        // check if it can move a step in y axes and if its own piece isnt on its moves\n        if (this.positionYIndex + incY1 < ChessPiece.availableXMovements.length && this.positionYIndex + incY1 >= 0 && !this.chessBoard.board[this.positionYIndex + incY1][this.positionXIndex]) {\n            indexes.push({ positionYIndex: this.positionYIndex + incY1, positionXIndex: this.positionXIndex })\n\n            if (this.successfulMovements === 0) {\n                // check if its first time, only move if theres nothing in the way\n\n                if (this.positionYIndex + incY2 < ChessPiece.availableYMovements.length && this.positionYIndex + incY2 >= 0 && !this.chessBoard.board[this.positionYIndex + incY2][this.positionXIndex]) {\n                    indexes.push({ positionYIndex: this.positionYIndex + incY2, positionXIndex: this.positionXIndex })\n\n                }\n            }\n\n\n\n        }\n\n\n\n    \n        if (this.positionYIndex + incY1 < ChessPiece.availableYMovements.length && this.positionYIndex + incY1 >= 0  && this.chessBoard.board[this.positionYIndex + incY1][this.positionXIndex + 1] &&this.chessBoard.board[this.positionYIndex + incY1][this.positionXIndex + 1]?.isPieceWhite === !this.isPieceWhite) {\n            indexes.push({ positionYIndex: this.positionYIndex + incY1, positionXIndex: this.positionXIndex + 1 })\n            // check diagonal if an opp is there\n        }\n \n        if (this.positionYIndex + incY1 < ChessPiece.availableYMovements.length  && this.positionYIndex + incY1 >= 0 && this.chessBoard.board[this.positionYIndex + incY1][this.positionXIndex - 1] &&this.chessBoard.board[this.positionYIndex + incY1][this.positionXIndex - 1]?.isPieceWhite === !this.isPieceWhite) {\n            indexes.push({ positionYIndex: this.positionYIndex + incY1, positionXIndex: this.positionXIndex - 1 })\n            // check diagonal if an opp is there\n        }\n\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n}\n","import { ChessBoard } from \"./ChessBoard\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class ChessBishop extends ChessPiece {\n    name = 'bishop'\n    icon = 'fas fa-chess-bishop'\n     constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n        super(chessBoard, positionYIndex, positionXIndex, isPieceWhite,ghostId);\n    }\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n\n\n        }[] = [];\n\n        // check up\n\n\n\n\n        const analyzeAndBreak = (incY, incX) => {\n            if (incY < 0 || incY > 7 || incX < 0 || incX > 7) return true;\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                return true\n\n            } else {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n                return true\n\n            }\n        }\n\n\n\n\n        // do diagonal \n\n\n        for (let i = 1; i < (8 - this.positionYIndex); i++) {\n            const incY = this.positionYIndex + i;\n            const incX = this.positionXIndex + i;\n\n\n            if (analyzeAndBreak(incY, incX)) {\n                break;\n            }\n        }\n        for (let i = 1; i < Math.max(this.positionYIndex, this.positionXIndex); i++) {\n            const incY = this.positionYIndex - i;\n            const incX = this.positionXIndex - i\n\n\n            if (analyzeAndBreak(incY, incX)) {\n                break;\n            }\n        }\n\n\n\n        for (let i = 1; i < (8 - this.positionYIndex); i++) {\n            const incY = this.positionYIndex + i;\n            const incX = this.positionXIndex - i;\n\n\n            if (analyzeAndBreak(incY, incX)) {\n                break;\n            }\n        }\n        for (let i = 1; i <= Math.max(this.positionYIndex,this.positionXIndex); i++) {\n            const incY = this.positionYIndex - i;\n            const incX = this.positionXIndex + i\n\n\n            if (analyzeAndBreak(incY, incX)) {\n                break;\n            }\n        }\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n}\n","import { ChessBoard } from \"./ChessBoard\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class ChessRook extends ChessPiece {\n    name = 'rook'\n    icon = 'fas fa-chess-rook'\n    constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n        super(chessBoard,positionYIndex, positionXIndex,isPieceWhite,ghostId);\n    }\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n\n\n        }[] = [];\n\n        // check up\n\n\n\n\n        const analyzeAndBreak = (incY,incX) => {\n            if(incY < 0 || incY > 7 || incX < 0 || incX >7) return true;\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                return true\n\n            } else {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n                return true\n\n            }\n        }\n\n\n\n            for (let i = this.positionYIndex + 1; i < 8; i++) {\n                const incY = i;\n                const incX = this.positionXIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionYIndex - 1; i >= 0; i--) {\n                const incY = i;\n                const incX = this.positionXIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionXIndex + 1; i < 8; i++) {\n                const incX = i;\n                const incY = this.positionYIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n            for (let i = this.positionXIndex - 1; i >= 0; i--) {\n                const incX = i;\n                const incY = this.positionYIndex\n               \n\n                if (analyzeAndBreak( incY,incX)) {\n                    break;\n                }\n            }\n\n            // do diagonal \n\n\n\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n}\n","import { ChessBoard } from \"./ChessBoard\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class ChessKing extends ChessPiece {\n    name = 'king'\n    icon = 'fas fa-chess-king'\n    constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n           \n        super(chessBoard,positionYIndex, positionXIndex,isPieceWhite,ghostId);\n      \n    }\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n\n\n        }[] = [];\n\n        // check up\n\n\n\n\n        const analyzeAndBreak = (incY,incX) => {\n            if(incY < 0 || incY > 7 || incX < 0 || incX >7) return true;\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                return true\n\n            } else {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n                return true\n\n            }\n        }\n\n\n\n       \n        const movements = [\n            [1,0],\n            [0,1],\n            [-1,0],\n            [0,-1],\n\n            [1,1],\n            [-1,-1],\n            [-1,1],\n            [1,-1],\n\n\n\n        ]\n        \n\n\n            for (let i = 0; i < movements.length; i++) {\n                const curr = movements[i]\n                const incY = this.positionYIndex + curr[0];\n                const incX = this.positionXIndex + curr[1];\n               \n\n                analyzeAndBreak( incY,incX)\n            }\n          \n\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n}\n","import { ChessBoard } from \"./ChessBoard\";\nimport { ChessPiece } from \"./ChessPiece\";\n\nexport class ChessKnight extends ChessPiece {\n    name = 'knight'\n    icon = 'fas fa-chess-knight'\n     constructor(\n        chessBoard:ChessBoard,\n        positionYIndex:number,\n        positionXIndex:number,\n        isPieceWhite:boolean,ghostId?:number\n        ) {\n        super(chessBoard,positionYIndex, positionXIndex,isPieceWhite,ghostId);\n\n    }\n\n\n\n    availableMoves = () => {\n        let indexes:{\n            positionYIndex:number\n            positionXIndex:number\n\n\n        }[] = [];\n\n        // check up\n\n\n\n\n        const analyzeAndBreak = (incY,incX) => {\n   \n            if(incY < 0 || incY > 7 || incX < 0 || incX >7) return true;\n           \n          \n           \n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n             //   return true\n\n            } else {\n                indexes.push({ positionYIndex: incY, positionXIndex: incX })\n\n                return true\n\n            }\n        }\n\n\n\n       \n        const movements = [\n            [2,1],\n            [2,-1],\n            [-2,1],\n            [-2,-1],\n            [1,2],\n            [1,-2],\n            [-1,2],\n            [-1,-2],\n      \n\n\n\n        ]\n        \n\n\n            for (let i = 0; i < movements.length; i++) {\n                const curr = movements[i]\n                const incY = this.positionYIndex + curr[0];\n                const incX = this.positionXIndex + curr[1];\n               \n\n                analyzeAndBreak( incY,incX)\n            }\n          \n\n\n\n\n\n\n\n        return indexes.map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: ChessPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: ChessPiece.availableXMovements[index.positionYIndex]\n            }\n        })\n    }\n\n\n\n}\n","import { ChessPawn } from \"./ChessPawn\";\nimport { ChessQueen } from \"./ChessQueen\";\nimport { ChessBishop } from \"./ChessBishop\";\nimport { ChessRook } from \"./ChessRook\";\nimport { ChessKing } from \"./ChessKing\";\nimport { ChessKnight } from \"./ChessKnight\";\nimport { ChessPiece } from \"./ChessPiece\";\nimport { PieceMovement } from \"./PieceMovement\";\n\n\n\nexport class ChessBoard {\n    board: ChessKing[][] | null[][] = [\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n        [null, null, null, null, null, null, null, null],\n    ]\n    isWhiteTurnToPlay = false\n    pieceHash: { [id: number]: ChessPiece } = {}\n    killedHash: { [str: string]: ChessPiece | null } = {}\n    private movements: PieceMovement[] = []\n    movementIndex = 0\n    private initiated = false;\n    constructor(dummy = false) {\n        if (this.initiated || dummy) return\n\n        this.init()\n        this.initiated = true;\n\n    }\n    init() {\n\n        const blackKing = new ChessKing(this, 0, 3, false);\n        this.board[0][3] = blackKing\n\n        this.board[0][0] = new ChessRook(this, 0, 0, false);\n        this.board[0][7] = new ChessRook(this, 0, 7, false);\n\n        this.board[0][1] = new ChessKnight(this, 0, 1, false);\n        this.board[0][6] = new ChessKnight(this, 0, 6, false);\n\n        this.board[0][4] = new ChessQueen(this, 0, 4, false);\n        this.board[0][2] = new ChessBishop(this, 0, 2, false);\n        this.board[0][5] = new ChessBishop(this, 0, 5, false);\n\n        this.board[1][0] = new ChessPawn(this, 1, 0, false);\n        this.board[1][1] = new ChessPawn(this, 1, 1, false);\n        this.board[1][2] = new ChessPawn(this, 1, 2, false);\n        this.board[1][3] = new ChessPawn(this, 1, 3, false);\n        this.board[1][4] = new ChessPawn(this, 1, 4, false);\n        this.board[1][5] = new ChessPawn(this, 1, 5, false);\n        this.board[1][6] = new ChessPawn(this, 1, 6, false);\n        this.board[1][7] = new ChessPawn(this, 1, 7, false)\n\n\n\n\n        const whiteKing = new ChessKing(this, 7, 3, true);\n        this.board[7][3] = whiteKing\n        this.board[7][0] = new ChessRook(this, 7, 0, true);\n        this.board[7][7] = new ChessRook(this, 7, 7, true);\n        this.board[7][1] = new ChessKnight(this, 7, 1, true);\n        this.board[7][6] = new ChessKnight(this, 7, 6, true);\n        this.board[7][4] = new ChessQueen(this, 7, 4, true);\n        this.board[7][2] = new ChessBishop(this, 7, 2, true);\n        this.board[7][5] = new ChessBishop(this, 7, 5, true);\n\n        this.board[6][0] = new ChessPawn(this, 6, 0, true);\n        this.board[6][1] = new ChessPawn(this, 6, 1, true);\n        this.board[6][2] = new ChessPawn(this, 6, 2, true);\n        this.board[6][3] = new ChessPawn(this, 6, 3, true);\n        this.board[6][4] = new ChessPawn(this, 6, 4, true);\n        this.board[6][5] = new ChessPawn(this, 6, 5, true);\n        this.board[6][6] = new ChessPawn(this, 6, 6, true);\n        this.board[6][7] = new ChessPawn(this, 6, 7, true);\n\n\n\n\n\n        // set the aims for all pieces, whom they should protect and whom they should all attack\n        for (let i = 0; i < this.board.length; i++) {\n            for (let j = 0; j < this.board[i].length; j++) {\n                const cell = this.board[i][j];\n                if (cell) {\n                    this.pieceHash[cell.id] = cell;\n                    if (cell.isPieceWhite) { // if its my piece\n\n                        cell.king = whiteKing;\n                        cell.oppKing = blackKing;\n                    } else {\n                        cell.oppKing = whiteKing;\n                        cell.king = blackKing;\n                    }\n\n                }\n\n            }\n        }\n\n\n    }\n\n    toString() {\n        return JSON.stringify(this.board.map(r => r.map(_ => _ ? `${_.id}-${_.name}` : 'null')));\n    }\n    canUndo() {\n        return (this.movementIndex < this.movements.length)\n    }\n    canRedo() {\n        return (this.movementIndex - 1 >= 0)\n    }\n    performUndo() {\n\n        const movement = this.movements[this.movementIndex]\n        const piece = this.board[movement.positionYIndex][movement.positionXIndex];\n\n        if (!piece) return;\n\n        piece.positionYIndex = movement.prevPositionYIndex;\n        piece.positionXIndex = movement.prevPositionXIndex;\n\n\n        this.board[movement.prevPositionYIndex][movement.prevPositionXIndex] = piece;\n\n        this.board[movement.positionYIndex][movement.positionXIndex] = this.killedHash[movement.positionYIndex + ',' + movement.positionXIndex];\n\n        this.movementIndex++;\n    }\n\n    performRedo() {\n        this.movementIndex--;\n\n        const movement = this.movements[this.movementIndex]\n        const piece = this.board[movement.prevPositionYIndex][movement.prevPositionXIndex];\n        if (!piece) return;\n\n\n        piece.positionYIndex = movement.positionYIndex;\n        piece.positionXIndex = movement.positionXIndex;\n\n        this.board[movement.positionYIndex][movement.positionXIndex] = piece;\n\n        this.board[movement.prevPositionYIndex][movement.prevPositionXIndex] = null;\n\n    }\n    addToMovement(movement: PieceMovement) {\n        const n = this.getMovements();\n        n.unshift(movement);\n        this.movements = n;\n        this.movementIndex = 0;\n\n    }\n    getMovements() {\n        return this.movements.slice(this.movementIndex);\n    }\n\n}\n\n\n\n\n","import { useEffect, useRef, useState } from \"react\";\nimport { ChessPiece } from \"../engine/ChessPiece\";\n\nfunction Bar({pieceWidth,horizontal}) {\n    const arr = horizontal ? ChessPiece.availableXMovements: ChessPiece.availableYMovements;\nreturn (\n\n\n                <div className={horizontal ?'Bar-X': ''} >\n                    {arr.map((c, x) => {\n                        return (<div key={x} className={horizontal ?'Bar-X': 'Board-X'} style={{ width: pieceWidth + 'px', height: pieceWidth + 'px', }}>\n                            {c}\n                        </div>)\n                    })}\n                </div>\n)\n    \n}\n\nexport default Bar;\n","export const LOGGING = true && !process.env.production;\nexport const devLog = (o)=> {\n    if(!LOGGING) return;\n    console.warn(o)\n\n}","import { PieceMovement } from \"../chess/engine/PieceMovement\";\n\nexport const safeObjectAssessor = (...args) => {\n    let base = args[0];\n\n    for (let i = 1; i < args.length; i++) {\n        if (!base) return false;\n        base = base[args[i]];\n    }\n\n    return true;\n\n}\nexport const csvGenerator = (data: PieceMovement[]) => {\n\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n\n    data.forEach(function (obj: PieceMovement) {\n        let row = obj.toCSV().join(\",\");\n        csvContent += row + \"\\r\\n\";\n    });\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"my_data.csv\");\n    document.body.appendChild(link); // Required for FF\n\n    link.click();\n}\n","\nexport const NAVS = [\n    {\n        to:'/chess',\n        name:'Chess',\n        img:process.env.PUBLIC_URL + '/assets/chess-banner.png'\n    },\n    {\n        to:'/checkers',\n        name:'Checkers',\n        img:process.env.PUBLIC_URL + '/assets/checkers-banner.png'\n    },    {\n        to:'/stolen-in-60-seconds',\n        name:'Stolen in 60 seconds',\n        img:process.env.PUBLIC_URL + '/assets/ss60-banner.png'\n    }\n]\n\nexport interface HashIndex {\n    [id: string]: {\n        positionYIndex: number\n        positionXIndex: number\n        jumpPosition?: number[][]\n        id: 0\n\n\n    }\n}\n\nexport function f() {\n    return Math.min(window.innerHeight, window.innerWidth)  - (150 + (window.innerWidth > 700 ? 100 : 0))\n}","import React, { FC, useState, createContext } from 'react';\nimport {Tool} from \"../StolenIn60Seconds/misc/models/Tool\";\nimport {PromptData} from \"../StolenIn60Seconds/misc/types\";\n\ninterface StateContext  {\n    showNav: boolean;\n    setShowNav: (value: (((prevState: boolean) => boolean) | boolean)) => void;\n    optionsClicked: boolean;\n    setOptionsClicked: (value: (((prevState: boolean) => boolean) | boolean)) => void;\n    stageProps: {\n        time: number;\n        toolsPrompt?:PromptData<Tool[], Tool>;\n    },\n    setStageProps: React.Dispatch<React.SetStateAction<{time: number;toolsPrompt?:PromptData<Tool[], Tool>}>>\n};\n\n\nexport const StateContext = createContext<StateContext>(\n    {} as StateContext\n);\n\nexport const StateProvider = ({ children }: any) => {\n    const [showNav, setShowNav] = useState(true);\n    const [optionsClicked, setOptionsClicked] = useState(false);\n    const [stageProps, setStageProps] = useState({time:0});\n\n    const states = {\n        showNav, setShowNav,optionsClicked, setOptionsClicked,stageProps, setStageProps\n    }\n\n    return (\n        <StateContext.Provider value={states}>\n            {children}\n        </StateContext.Provider>\n    );\n};\n","import {useContext, useEffect, useRef, useState} from \"react\";\nimport { ChessBoard } from \"./engine/ChessBoard\";\nimport './Chess.css';\nimport { ChessPiece } from \"./engine/ChessPiece\";\nimport Bar from \"./misc/Bar\";\nimport { devLog } from '../env'\nimport { PieceMovement } from \"./engine/PieceMovement\";\nimport { csvGenerator } from \"../misc/functions\";\nimport { f } from \"../misc/data\";\nimport {StateContext} from \"../misc/StateProvider\";\n\n\n\nfunction ChessGame() {\n    const [size, setSize] = useState({\n        boardWidth: f(),\n        pieceWidth: (f()) / 8\n    })\n    const [board, setBoard] = useState([] as ChessPiece[][] | null[][])\n    const [movementHistory, setMovementHistory] = useState([] as PieceMovement[])\n    const [availableMoves, setAvailableMoves] = useState({} as { [id: string]: boolean })\n    const [selectedPiece, setSelectedPiece] = useState(null as ChessPiece | null)\n\n    const chessBoardRef = useRef(null as any as ChessBoard);\n\n    const [isWhiteTurnToPlay, setIsWhiteTurnToPlay] = useState(true);\n    const [{ canUndo, canRedo }, setUndoAndRedo] = useState({ canUndo: false, canRedo: false });\n\n    const {showNav, setShowNav} = useContext(StateContext)\n\n    function reloadBoard() {\n        chessBoardRef.current.isWhiteTurnToPlay = !chessBoardRef.current.isWhiteTurnToPlay\n        setBoard(chessBoardRef.current.board)\n        setMovementHistory(chessBoardRef.current.getMovements())\n        setAvailableMoves({});\n        setSelectedPiece(null);\n        setIsWhiteTurnToPlay(chessBoardRef.current.isWhiteTurnToPlay)\n        setUndoAndRedo({ canRedo: chessBoardRef.current.canRedo(), canUndo: chessBoardRef.current.canUndo() })\n    }\n    function init() {\n        chessBoardRef.current = new ChessBoard();\n\n        reloadBoard()\n    }\n\n\n    useEffect(() => {\n        setShowNav(false)\n        init()\n        const cb = () => {\n            const boardWidth = f()\n            const pieceWidth = boardWidth / 8;\n\n            setSize(\n                {\n                    boardWidth,\n                    pieceWidth\n                }\n            )\n\n        }\n        window.addEventListener('resize', cb)\n        return () => {\n            window.removeEventListener('resize', cb)\n        }\n\n\n    }, [])\n\n    function onPieceClick(piece: ChessPiece | null, y: number, x: number) {\n        if (availableMoves[y + \",\" + x]) {\n            if (!selectedPiece?.move(y, x)) {\n                // invalid move\n                return;\n            }\n\n            reloadBoard()\n\n\n\n\n        } else if (piece) {\n            devLog(piece.toString())\n            if (isWhiteTurnToPlay !== piece.isPieceWhite) {\n                setAvailableMoves({});\n                setSelectedPiece(null);\n                return;\n            }\n\n\n            // show available moves\n            const a = piece.availableMoves();\n\n            const _: { [id: string]: boolean } = {}\n            a.forEach(m => {\n\n                _[m.positionYIndex + \",\" + m.positionXIndex] = true\n            });\n\n            setAvailableMoves(_);\n            setSelectedPiece(piece);\n\n        } else {\n            setAvailableMoves({});\n            setSelectedPiece(null);\n        }\n\n    }\n    function performRedo() {\n        chessBoardRef.current.performRedo();\n        reloadBoard()\n    }\n    function performUndo() {\n        chessBoardRef.current.performUndo();\n        reloadBoard()\n    }\n\n    return (\n        <div className=\"Whole-Body\">\n\n            <div className=\"Chess-Field\">\n                <div className=\"Chess-Pre-Playable\">\n                    <Bar pieceWidth={size.pieceWidth} horizontal />\n                    <div className=\"Chess-Playable\">\n                        <Bar pieceWidth={size.pieceWidth} horizontal={false} />\n                        <div className='Board' style={{ width: size.boardWidth + 'px', height: size.boardWidth + 'px' }} >\n\n                            {board.map((row: ChessPiece[] | null[], y: number) => {\n\n                                return (<div key={y} className='Board-Y' style={{ display: 'flex' }}>\n\n\n\n                                    {row.map((piece: ChessPiece | null, x: number) => {\n\n                                        const shouldHighlight = availableMoves[y + \",\" + x];\n                                        return (<div onClick={() => onPieceClick(piece, y, x)} key={x} className='Board-X' style={{ width: size.pieceWidth + 'px', height: size.pieceWidth + 'px', backgroundColor: (x % 2 === 0) === (y % 2 === 0) ? 'rgba(245, 222, 179, 0.596)' : '' }}>\n                                            <div className={!piece ? '' : (isWhiteTurnToPlay !== piece.isPieceWhite) ? 'Piece-inner-invalid' : 'Piece-inner-valid'} style={{ width: '70%', height: '70%', display: 'flex', justifyContent: 'center', alignItems: 'center', backgroundColor: !(shouldHighlight || piece && piece === selectedPiece) ? '' : 'rgba(255, 255, 0, 0.5)' }}>\n                                                {piece ? <i className={piece.icon} style={{ color: (piece.isPieceWhite ? \"white\" : \"black\") }} ></i> : ''}\n\n                                            </div>\n                                        </div>\n\n\n                                        )\n                                    })}\n\n\n\n                                </div>\n\n\n                                )\n                            })}\n                        </div>\n                        <Bar pieceWidth={size.pieceWidth} horizontal={false} />\n                    </div>\n                    <Bar pieceWidth={size.pieceWidth} horizontal />\n                    <div className=\"text-center\">\n                        {canUndo && <button onClick={performUndo} className=\"m-2\">  <i className=\"fa fa-undo\" /></button>}\n                        {canRedo && <button onClick={performRedo} className=\"m-2\">  <i className=\"fa fa-redo\" /></button>}\n\n\n                    </div>\n                </div>\n              \n                <div className='Side' style={{ padding: '10px' }} >\n                    <div className='' style={{ padding: '0 30px' }} >\n                        Piece To Play\n                        <br />\n                        <i className={'fa fa-chess '} style={{ color: isWhiteTurnToPlay ? 'white' : 'black' }} ></i>\n                        <hr />\n                        <div style={{ textAlign: 'center' }}>\n                            {movementHistory.length != 0 && <>\n                                <button onClick={() => { csvGenerator(movementHistory) }}><i className=\"fa fa-file-download\" /></button>\n                                <br />\n                            </>}\n                            {movementHistory.map((movement, key) => {\n\n                                return (\n                                    <div style={{ fontSize: '13px', marginBottom: '5px', display: 'flex', justifyContent: 'center' }} key={key}>\n                                        <div style={{ marginRight: '5px' }}>\n                                            <i className={movement.icon} style={{ color: movement.isPieceWhite ? 'white' : 'black' }} />\n                                        </div>\n                                        <div>\n                                            {movement.prevPosition} <i className=\"fa fa-arrow-right\" /> {movement.position}\n                                        </div>\n                                    </div>\n                                )\n\n                            })}\n                        </div>\n                    </div> </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ChessGame;\n","import { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom'\nimport { NAVS } from './misc/data';\nimport './index';\n\nfunction Home() {\n  const [boundWidth, setBoundWidth] = useState(0);\n\n  useEffect(() => {\n    const elem = document.querySelector('#bound');\n\n    var rect = elem?.getBoundingClientRect();\n\n    setBoundWidth(rect?.width || 0);\n\n\n  }, [])\n  return (\n    <div className='container'>\n      <div className='row'>\n\n        {NAVS.map((nav, i) => {\n          return (\n            <div id=\"bound\" className='col-6 col-md-4 col-lg-3 mb-2'>\n\n              <Link\n                className='d-block border rounded  text-center bound-inner'\n                key={i}\n                to={nav.to}\n                style={{\n                  height: (boundWidth - 24) + 'px',\n                  verticalAlign:'bottom',\n                  background: `url('${nav.img}')`,\n                  backgroundSize:'cover'\n\n                }}\n              >\n                <div style={{visibility:'hidden'}}>{nav.name}</div>\n                <div className='bound-content p-1 bg-primary rounded text-white'>\n                  {nav.name}\n                </div>\n\n\n              </Link>\n\n\n            </div>\n          )\n\n        })}\n\n\n      </div>\n    </div>\n\n  );\n}\n\nexport default Home;\n","\nimport { CheckerPiece } from \"./CheckerPiece\";\n\nexport class PieceMovement {\n    id: number;\n    name: string;\n    icon: string;\n    isPieceWhite: boolean\n\n    prevPositionYIndex: number;\n    prevPositionXIndex: number;\n    prevPosition: string;\n    positionYIndex: number;\n    positionXIndex: number;\n    position: string;\n    jumpPosition: number[][]\n\n    constructor(\n        id: number,\n        name:string,\n        icon:string,\n        isPieceWhite:boolean,\n        prevPositionYIndex: number,\n        prevPositionXIndex: number,\n        positionYIndex: number,\n        positionXIndex: number,\n        jumpPosition: number[][] = []\n\n    ) {\n\n        this.id = id;\n        this.name = name;\n        this.icon = icon;\n        this.isPieceWhite = isPieceWhite;\n        this.prevPositionYIndex = prevPositionYIndex;\n        this.prevPositionXIndex = prevPositionXIndex;\n        this.positionYIndex = positionYIndex;\n        this.positionXIndex = positionXIndex;\n        this.prevPosition = `${CheckerPiece.availableXMovements[this.prevPositionXIndex]}${CheckerPiece.availableYMovements[this.prevPositionYIndex]}`\n        this.position = `${CheckerPiece.availableXMovements[this.positionXIndex]}${CheckerPiece.availableYMovements[this.positionYIndex]}`\n        this.jumpPosition = jumpPosition\n    }\n    toJSON() {\n        return [\n            this.id,\n            this.name,\n            this.icon,\n            this.isPieceWhite,\n            this.prevPositionYIndex,\n            this.prevPositionXIndex,\n            this.positionYIndex,\n            this.positionXIndex,\n            this.prevPosition,\n            this.position,\n            this.jumpPosition\n        ]\n\n    }\n    toCSV() {\n        return [\n            // this.id,\n            this.name,\n            this.isPieceWhite ? 'white' : 'black',\n            // this.prevPositionYIndex,\n            // this.prevPositionXIndex,\n            // this.positionYIndex,\n            // this.positionXIndex,\n            this.prevPosition,\n            this.position,\n\n        ]\n\n    }\n    fromJSON(el: any[]) {\n        this.id = el[0]\n        this.name = el[1]\n        this.icon = el[2]\n        this.isPieceWhite = el[3]\n        this.prevPositionYIndex = el[4]\n        this.prevPositionXIndex = el[5]\n        this.positionYIndex = el[6]\n        this.positionXIndex = el[7]\n        this.prevPosition = el[8]\n        this.position = el[9]\n        this.jumpPosition = el[10]\n\n    }\n    serialize(){\n        return [\n            this.id,\n            this.name,\n            this.icon,\n            this.isPieceWhite,\n            this.prevPositionYIndex,\n            this.prevPositionXIndex,\n            this.positionYIndex,\n            this.positionXIndex,\n            this.jumpPosition\n        ]\n    }\n\n\n\n}\n","import { devLog } from \"../../env\";\nimport { CheckerBoard } from \"./CheckerBoard\";\nimport { CheckerPawn } from \"./CheckerPawn\";\nimport { CheckerQueen } from \"./CheckerQueen\";\n\nimport { PieceMovement } from \"./PieceMovement\";\n\nexport abstract class CheckerPiece {\n    name = 'piece'\n    icon = 'chess'\n    static availableXMovements = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\n    static availableYMovements = ['8', '7', '6', '5', '4', '3', '2', '1'];\n\n    positionXIndex = 0;\n    positionYIndex = 0;\n    isPieceWhite = true;\n    successfulMovements = 0;\n\n    chessBoard: CheckerBoard = new CheckerBoard(true);\n    static globalId = 0\n    id = 0\n\n\n\n    constructor(\n        chessBoard: CheckerBoard,\n        positionYIndex: number,\n        positionXIndex: number,\n        isPieceWhite: boolean,\n        ghostId?: number\n    ) {\n        if (ghostId == undefined) {\n            CheckerPiece.globalId++;\n            this.id = CheckerPiece.globalId;\n        } else {\n            this.id = ghostId\n        }\n\n\n\n        this.chessBoard = chessBoard;\n        this.isPieceWhite = isPieceWhite;\n        this.positionYIndex = positionYIndex;\n        this.positionXIndex = positionXIndex;\n\n    }\n\n    anticipateOppMoves = () => {\n        const _: { [id: string]: boolean } = {}\n        for (let i = 0; i < this.chessBoard.board.length; i++) {\n            for (let j = 0; j < this.chessBoard.board[i].length; j++) {\n                const cellPiece = this.chessBoard.board[i][j];\n                if (cellPiece && cellPiece.isPieceWhite !== this.isPieceWhite) {\n                    cellPiece.availableMoves()\n                        .forEach(m => {\n                            _[m.positionYIndex + \",\" + m.positionXIndex] = true\n                        })\n                }\n\n            }\n        }\n        return _;\n    }\n    anticipateMyMoves = () => {\n        const _ = {}\n        for (let i = 0; i < this.chessBoard.board.length; i++) {\n            for (let j = 0; j < this.chessBoard.board[i].length; j++) {\n                const cell = this.chessBoard.board[i][j];\n                if (cell && cell.isPieceWhite === this.isPieceWhite) {\n                    cell.availableMoves()\n                        .forEach(m => {\n                            _[m.positionYIndex + \",\" + m.positionXIndex] = true\n                        })\n                }\n\n            }\n        }\n        return _;\n    }\n\n    move(yIndex: number, xIndex: number, cb?: () => void) {\n        const availableMoves = this.availableMoves();\n        let canmove = false;\n        let jumpPosition: undefined | number[][] = undefined;\n        availableMoves.forEach(movements => {\n\n            if (movements.positionYIndex === yIndex && movements.positionXIndex === xIndex) {\n                canmove = true\n                jumpPosition = movements.jumpPosition;\n            }\n        })\n        const p = this.chessBoard.pieceHash[this.id];\n        const movement = new PieceMovement(p.id,p.name,p.icon,p.isPieceWhite, this.positionYIndex, this.positionXIndex, yIndex, xIndex, jumpPosition);\n\n        if (!canmove) {\n            return false;\n        }\n\n        // swap pos in board;\n        const temp = this.chessBoard.board[this.positionYIndex][this.positionXIndex]\n\n\n\n        this.chessBoard.board[this.positionYIndex][this.positionXIndex] = null;\n\n        const previousPositionYIndex = this.positionYIndex;\n        const previousPositionXIndex = this.positionXIndex;\n        this.positionYIndex = yIndex;\n        this.positionXIndex = xIndex;\n\n        // assign new pos\n        this.chessBoard.board[this.positionYIndex][this.positionXIndex] = temp;\n        // test to see if the move puts the king at risk\n\n\n        if (cb) {\n            cb()\n        }\n\n        this.successfulMovements++;\n        this.chessBoard.addToMovement(movement);\n        //devLog(movement)\n        return true;\n\n\n    }\n    availableMoves = () => {\n        return [] as {\n            positionYIndex: number;\n            positionY: string;\n            positionXIndex: number;\n            positionX: string;\n            jumpPosition?: number[][]\n        }[]\n\n    }\n\n\n    toString() {\n        return {\n            id: this.id,\n            name: this.name,\n            type: this.isPieceWhite ? 'White' : 'Black',\n            position: `${CheckerPiece.availableXMovements[this.positionXIndex]}${CheckerPiece.availableYMovements[this.positionYIndex]}`\n        }\n            ;\n    }\n    currentPosition() {\n        return `Y = ${this.positionYIndex}, X = ${this.positionXIndex}`\n    }\n    clone = (): CheckerPiece => {\n        return null as any as CheckerPiece;\n    }\n    serialize = (toString = false) => {\n        const s = [\n            this.id,\n            this.name,\n            this.icon,\n            this.positionYIndex,\n            this.positionXIndex,\n            this.isPieceWhite,\n            this.successfulMovements,\n        ]\n        return toString ? JSON.stringify(s) : s;\n    }\n \n\n\n\n}\n","import { threadId } from \"worker_threads\";\nimport { HashIndex } from \"../../misc/data\";\nimport { CheckerBoard } from \"./CheckerBoard\";\nimport { CheckerPiece } from \"./CheckerPiece\";\n\n\n\nexport class CheckerQueen extends CheckerPiece {\n    name = 'queen'\n    icon = 'fas fa-chess-queen'\n    constructor(\n        chessBoard: CheckerBoard,\n        positionYIndex: number,\n        positionXIndex: number,\n        isPieceWhite: boolean, ghostId?: number\n    ) {\n        super(chessBoard, positionYIndex, positionXIndex, isPieceWhite, ghostId);\n    }\n\n    availableMoves = (indexes: HashIndex = {}, id = 0, positionYIndex = this.positionYIndex, positionXIndex = this.positionXIndex, preArr = []) => {\n\n        if (id == 1) {\n            console.log({ positionYIndex, positionXIndex })\n        }\n\n\n        const inBound = (i) => i >= 0 && i <= 7\n        const addToHash = (hash, preventDFS?) => {\n            hash.id = id;\n            const key = hash.positionYIndex + ',' + hash.positionXIndex;\n            const val = indexes[key];\n            if ((val && id !== val.id) || key == this.positionYIndex + ',' + this.positionXIndex) return;\n            if (!val) {\n                indexes[key] = hash;\n\n            } else if (!val.jumpPosition || (hash.jumpPosition || []).length > val.jumpPosition.length) {\n                indexes[key] = hash;\n            } else {\n                //console.error(key,indexes)\n\n\n            }\n            if(preventDFS) return;\n            this.availableMoves(indexes, id + 1, hash.positionYIndex, hash.positionXIndex, hash.jumpPosition || [])\n\n        }\n\n        const analyzeAndBreak = (incY: number, incX: number, i: number, j: number, value: number[][] = []) => {\n\n\n            if (!inBound(incY) || !inBound(incX)) return true;\n\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                if (id != 0) return true;\n                addToHash({ positionYIndex: incY, positionXIndex: incX },true)\n\n\n\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                return true\n\n            } else if (possiblePiece.isPieceWhite !== this.isPieceWhite && inBound(incY + i) && inBound(incX + j) && this.chessBoard.board[incY + i][incX + j] != null && this.chessBoard.board[incY + i][incX + j]?.isPieceWhite != this.isPieceWhite) {\n\n                return true;\n\n            }\n            else if (possiblePiece.isPieceWhite !== this.isPieceWhite && inBound(incY + i) && inBound(incX + j) && this.chessBoard.board[incY + i][incX + j] == null) {\n                // its not the same color and its possible to jump\n\n                value.push([incY, incX]);\n                addToHash({\n                    positionYIndex: incY + i,\n                    positionXIndex: incX + j,\n                    jumpPosition: [...value]\n                })\n\n\n\n            }\n\n            return false;\n        }\n\n\n        // do diagonal \n        const n1: number[][] = [...preArr];\n        for (let i = 1; i < (8 - positionYIndex); i++) {\n            const incY = positionYIndex + i;\n            const incX = positionXIndex + i;\n\n            if (analyzeAndBreak(incY, incX, 1, 1, n1)) {\n                break;\n            }\n\n        }\n        const n2: number[][] = [...preArr];\n        for (let i = 1; i < Math.max(positionYIndex, positionXIndex); i++) {\n            const incY = positionYIndex - i;\n            const incX = positionXIndex - i;\n\n\n            if (analyzeAndBreak(incY, incX, -1, -1, n2)) {\n                break;\n            }\n\n        }\n        const n3: number[][] = [...preArr];\n        for (let i = 1; i < (8 - positionYIndex); i++) {\n            const incY = positionYIndex + i;\n            const incX = positionXIndex - i;\n\n            if (analyzeAndBreak(incY, incX, 1, -1, n3)) {\n                break;\n            }\n        }\n        const n4: number[][] = [...preArr];\n        for (let i = 1; i <= positionYIndex; i++) {\n            const incY = positionYIndex - i;\n            const incX = positionXIndex + i\n\n\n            if (analyzeAndBreak(incY, incX, -1, 1, n4)) {\n                break;\n            }\n        }\n\n        return (Object.values(indexes)).map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: CheckerPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: CheckerPiece.availableXMovements[index.positionYIndex],\n                jumpPosition: index.jumpPosition\n\n            }\n        })\n    }\n\n    clone = () => {\n        return new CheckerQueen(this.chessBoard, this.positionYIndex,this.positionXIndex, this.isPieceWhite,this.id)\n    }\n\n\n}\n","import { CheckerQueen } from \"./CheckerQueen\";\nimport { CheckerPiece } from \"./CheckerPiece\";\nimport { CheckerBoard } from \"./CheckerBoard\";\nimport { HashIndex } from \"../../misc/data\";\n\nexport class CheckerPawn extends CheckerPiece {\n    name = 'pawn'\n    icon = 'fas fa-circle'\n    private _parent = CheckerPiece.prototype\n    constructor(\n        chessBoard: CheckerBoard,\n        positionYIndex: number,\n        positionXIndex: number,\n        isPieceWhite: boolean, ghostId?: number\n    ) {\n        super(chessBoard, positionYIndex, positionXIndex, isPieceWhite, ghostId);\n    }\n\n    move = (yIndex: number, xIndex: number) => {\n\n        return this._parent.move.apply(this, [yIndex, xIndex, () => {\n            // check if its promotable\n            if (this.isPieceWhite && yIndex === 0 || !this.isPieceWhite && yIndex === 7) {\n                // promote\n                const queen = new CheckerQueen(this.chessBoard, yIndex, this.positionXIndex, this.isPieceWhite, this.id);\n\n                this.chessBoard.board[this.positionYIndex][this.positionXIndex] = queen;\n            }\n\n\n        }])\n    }\n\n    availableMoves = (indexes: HashIndex = {}, id = 0, positionYIndex = this.positionYIndex, positionXIndex = this.positionXIndex, preArr = []) => {\n\n        const movements = [\n            [1, 1],\n            [-1, -1],\n            [1, -1],\n            [-1, 1],\n        ]\n\n        const inBound = (i) => i >= 0 && i <= 7\n        const addToHash = (hash, preventDFS?) => {\n            hash.id = id;\n            const key = hash.positionYIndex + ',' + hash.positionXIndex;\n            const val = indexes[key];\n            if ( (val && id !== val.id) || key == this.positionYIndex + ',' + this.positionXIndex) return;\n            if (!val) {\n                indexes[key] = hash;\n\n            } else if (!val.jumpPosition || (hash.jumpPosition || []).length > val.jumpPosition.length) {\n                indexes[key] = hash;\n            } else {\n                //console.error(key,indexes)\n\n\n            }\n            if(preventDFS) return;\n            this.availableMoves(indexes, id + 1, hash.positionYIndex, hash.positionXIndex, hash.jumpPosition || [])\n\n        }\n\n        const analyzeAndBreak = (incY: number, incX: number, i: number, j: number, value: number[][] = []) => {\n\n            if (!inBound(incY) || !inBound(incX)) return true;\n\n\n\n            const possiblePiece = this.chessBoard.board[incY][incX]\n            if (!possiblePiece) {\n                if (id != 0 || \n                    (this.isPieceWhite && positionYIndex < incY) || // avoid white pawns from going back\n                    (!this.isPieceWhite && positionYIndex > incY // avoid black bawns from going back\n                        )) return true;\n                addToHash({ positionYIndex: incY, positionXIndex: incX },true)\n\n\n            } else if (possiblePiece.isPieceWhite === this.isPieceWhite) {\n                // if its same color\n                //   return true\n\n            } else if (possiblePiece.isPieceWhite !== this.isPieceWhite && inBound(incY + i) && inBound(incX + j) && this.chessBoard.board[incY + i][incX + j] == null) {\n                // its not the same color and its possible to jump\n                value.push([incY, incX]);\n\n                addToHash({\n                    positionYIndex: incY + i,\n                    positionXIndex: incX + j,\n                    jumpPosition: value\n                })\n\n\n\n            }\n            return false;\n        }\n\n        const n1: number[][] = [...preArr];\n        movements.forEach(curr => {\n            const incY = positionYIndex + curr[0];\n            const incX = positionXIndex + curr[1];\n\n            // check if it can move a step in y axes and if its own piece isnt on its moves\n            analyzeAndBreak(incY, incX, curr[0], curr[1], n1)\n        })\n\n        return (Object.values(indexes)).map(index => {\n            return {\n\n                positionYIndex: index.positionYIndex,\n                positionY: CheckerPiece.availableYMovements[index.positionYIndex],\n                positionXIndex: index.positionXIndex,\n                positionX: CheckerPiece.availableXMovements[index.positionYIndex],\n                jumpPosition: index.jumpPosition\n            }\n        })\n    }\n    clone = () => {\n        return new CheckerPawn(this.chessBoard, this.positionYIndex,this.positionXIndex, this.isPieceWhite,this.id)\n    }\n\n\n}\n","import { CheckerBoard } from \"../engine/CheckerBoard\";\nimport { CheckerPawn } from \"../engine/CheckerPawn\";\nimport { CheckerQueen } from \"../engine/CheckerQueen\";\n\nexport const checkerPieceDeSerialize = (data:  (string | number | boolean)[], board: CheckerBoard) => {\n     \n    const [\n        id,\n        name,\n        icon,\n        positionYIndex,\n        positionXIndex,\n        isPieceWhite,\n        successfulMovements,\n    ] = data;\n    let piece: CheckerPawn | CheckerQueen | null = null;\n\n    switch (name) {\n        case 'queen':\n\n            piece = new CheckerQueen(board, positionYIndex as number, positionXIndex as number, isPieceWhite as boolean, id as number)\n            break;\n        case 'pawn':\n            piece = new CheckerPawn(board, positionYIndex as number, positionXIndex as number, isPieceWhite as boolean, id as number)\n            break;\n\n        default:\n            return null\n\n    }\n\n    piece.successfulMovements = successfulMovements as number;\n    piece.icon = icon as string;\n\n    return piece;\n}","import { CheckerPiece } from \"./CheckerPiece\";\nimport { CheckerPawn } from \"./CheckerPawn\";\nimport { CheckerQueen } from \"./CheckerQueen\";\n\nimport { PieceMovement } from \"./PieceMovement\";\nimport { checkerPieceDeSerialize } from \"../misc\";\n\n\n\nexport class CheckerBoard {\n    board: CheckerPiece[][] | null[][] = CheckerBoard.newBoard();\n    isWhiteTurnToPlay = false\n    pieceHash: { [id: number]: CheckerPiece } = {}\n    killedHash: { [str: string]: CheckerPiece | null } = {}\n    private movements: PieceMovement[] = [];\n    movementIndex = 0;\n    private initiated = false;\n    constructor(dummy = false) {\n        if (this.initiated || dummy) return\n\n        this.init()\n        this.initiated = true;\n\n    }\n    init() {\n        this.board[0][0] = new CheckerPawn(this, 0, 0, false);\n        this.board[0][2] = new CheckerPawn(this, 0, 2, false);\n        this.board[0][4] = new CheckerPawn(this, 0, 4, false);\n        this.board[0][6] = new CheckerPawn(this, 0, 6, false);\n        this.board[1][1] = new CheckerPawn(this, 1, 1, false);\n        this.board[1][3] = new CheckerPawn(this, 1, 3, false);\n        this.board[1][5] = new CheckerPawn(this, 1, 5, false);\n        this.board[1][7] = new CheckerPawn(this, 1, 7, false)\n        this.board[2][0] = new CheckerPawn(this, 2, 0, false);\n        this.board[2][2] = new CheckerPawn(this, 2, 2, false);\n        this.board[2][4] = new CheckerPawn(this, 2, 4, false);\n        this.board[2][6] = new CheckerPawn(this, 2, 6, false);\n\n\n\n\n        this.board[5][1] = new CheckerPawn(this, 5, 1, true);\n        this.board[5][3] = new CheckerPawn(this, 5, 3, true);\n        this.board[5][5] = new CheckerPawn(this, 5, 5, true);\n        this.board[5][7] = new CheckerPawn(this, 5, 7, true);\n        this.board[6][0] = new CheckerPawn(this, 6, 0, true);\n        this.board[6][2] = new CheckerPawn(this, 6, 2, true);\n        this.board[6][4] = new CheckerPawn(this, 6, 4, true);\n        this.board[6][6] = new CheckerPawn(this, 6, 6, true);\n        this.board[7][1] = new CheckerPawn(this, 7, 1, true);\n        this.board[7][3] = new CheckerPawn(this, 7, 3, true);\n        this.board[7][5] = new CheckerPawn(this, 7, 5, true);\n        this.board[7][7] = new CheckerPawn(this, 7, 7, true);\n\n\n\n        for (let i = 0; i < this.board.length; i++) {\n            for (let j = 0; j < this.board[i].length; j++) {\n                const cell = this.board[i][j];\n                if (cell) {\n                    this.pieceHash[cell.id] = cell;\n\n\n                }\n\n            }\n        }\n\n\n    }\n    static newBoard() {\n        return [\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n            [null, null, null, null, null, null, null, null],\n        ]\n    }\n\n    toString() {\n        return JSON.stringify(this.board.map(r => r.map(_ => _ ? `${_.id}-${_.name}` : 'null')));\n    }\n    clone = () => {\n        const newCheckerBoard = new CheckerBoard(true);\n        newCheckerBoard.isWhiteTurnToPlay = this.isWhiteTurnToPlay\n        newCheckerBoard.pieceHash = this.pieceHash\n        newCheckerBoard.movements = this.movements\n\n        for (let i = 0; i < this.board.length; i++) {\n            for (let j = 0; j < this.board[i].length; j++) {\n                const cell = this.board[i][j];\n                if (cell) {\n                    newCheckerBoard.board[i][j] = cell.clone();\n\n\n                }\n\n            }\n        }\n        return newCheckerBoard;\n\n    }\n\n    canUndo() {\n        return (this.movementIndex < this.movements.length)\n    }\n    canRedo() {\n        return (this.movementIndex - 1 >= 0)\n    }\n    performUndo() {\n\n        const movement = this.movements[this.movementIndex]\n        const piece = this.board[movement.positionYIndex][movement.positionXIndex];\n\n        if (!piece) return;\n\n        piece.positionYIndex = movement.prevPositionYIndex;\n        piece.positionXIndex = movement.prevPositionXIndex;\n\n        this.board[movement.positionYIndex][movement.positionXIndex] = null;\n        this.board[movement.prevPositionYIndex][movement.prevPositionXIndex] = piece;\n        movement.jumpPosition.forEach(pos => {\n            this.board[pos[0]][pos[1]] = this.killedHash[pos[0] + ',' + pos[1]];\n        })\n        this.movementIndex++;\n    }\n    performRedo() {\n        this.movementIndex--;\n\n        const movement = this.movements[this.movementIndex]\n        const piece = this.board[movement.prevPositionYIndex][movement.prevPositionXIndex];\n        if (!piece) return;\n        this.board[movement.prevPositionYIndex][movement.prevPositionXIndex] = null;\n\n        piece.positionYIndex = movement.positionYIndex;\n        piece.positionXIndex = movement.positionXIndex;\n\n        this.board[movement.positionYIndex][movement.positionXIndex] = piece;\n        movement.jumpPosition.forEach(pos => {\n            this.board[pos[0]][pos[1]] = null;\n        })\n    }\n    addToMovement(movement: PieceMovement) {\n        const n = this.getMovements();\n        n.unshift(movement);\n        this.movements = n;\n        this.movementIndex = 0;\n\n    }\n    getMovements() {\n        return this.movements.slice(this.movementIndex);\n    }\n\n    serialize = (toString = false) => {\n        const board = this.board.map((row: CheckerPiece[] | null[]) => row.map((piece: CheckerPiece | null) => piece == null ? null : piece.serialize()))\n        const movements = this.movements.map(m => m.serialize());\n        const movementIndex = this.movementIndex;\n        const isWhiteTurnToPlay = this.isWhiteTurnToPlay;\n        const killedHash = Object.values(this.killedHash).map((piece: CheckerPiece | null) => piece ? piece.serialize() : null)\n\n        const data = [board, movements, movementIndex, isWhiteTurnToPlay, killedHash]\n\n\n        return toString ? JSON.stringify(data) : data;\n    }\n    static deSerialize = (str: string) => {\n        const checkerBoard = new CheckerBoard(true);\n        const data: (number | boolean | PieceMovement[] | (string | (string | number | boolean)[])[] | (string | (string | number | boolean)[])[][])[] = JSON.parse(str);\n\n        const [_board, _movements, _movementIndex, _isWhiteTurnToPlay, _killedHash] = data;\n        const board = (_board as (string | (string | number | boolean)[] | null)[][]).map((row) => row.map((_piece) => {\n\n\n            if (_piece == null) return null;\n\n            const piece = checkerPieceDeSerialize(_piece as any, checkerBoard);\n            if (piece == null) return null;\n            checkerBoard.pieceHash[piece.id] = piece\n\n            return piece;\n\n        }))\n        const movements = (_movements as any[][]).map(m => new PieceMovement(m[0], m[1], m[2], m[3], m[4], m[5], m[6], m[7], m[8]));\n        const movementIndex = _movementIndex as number;\n        const isWhiteTurnToPlay = _isWhiteTurnToPlay as boolean;\n        const killedHash: { [str: string]: CheckerPiece | null } = {};\n\n        (_killedHash as (string | (string | number | boolean)[] | null)[])\n            .forEach((_piece) => {\n\n\n                if (_piece != null) {\n\n                    const piece = checkerPieceDeSerialize(_piece as any, checkerBoard)\n                    if (piece == null) return;\n                    killedHash[piece?.positionYIndex + ',' + piece?.positionXIndex] = piece\n\n                }\n            })\n\n\n        checkerBoard.board = board as any;\n        checkerBoard.movements = movements\n        checkerBoard.movementIndex = movementIndex\n        checkerBoard.isWhiteTurnToPlay = isWhiteTurnToPlay\n        checkerBoard.killedHash = killedHash\n\n        return checkerBoard;\n    }\n}\n\n\n\n\n","import { useEffect, useRef, useState } from \"react\";\nimport { CheckerBoard } from \"./engine/CheckerBoard\";\nimport './Checkers.css';\nimport { CheckerPiece } from \"./engine/CheckerPiece\";\n\nimport { devLog } from '../env'\nimport { PieceMovement } from \"./engine/PieceMovement\";\nimport { csvGenerator } from \"../misc/functions\";\nimport { f } from \"../misc/data\";\n\n\n\n\nfunction CheckersGame() {\n    const [size, setSize] = useState({\n        boardWidth: f(),\n        pieceWidth: (f()) / 8\n    })\n    const [board, setBoard] = useState([] as CheckerPiece[][] | null[][])\n    const [movementHistory, setMovementHistory] = useState([] as PieceMovement[])\n    const [availableMoves, setAvailableMoves] = useState({} as { [id: string]: number[][] })\n    const [selectedPiece, setSelectedPiece] = useState(null as CheckerPiece | null)\n\n    const checkerBoardRef = useRef(null as any as CheckerBoard);\n\n    const [isWhiteTurnToPlay, setIsWhiteTurnToPlay] = useState(true);\n    const [{ canUndo, canRedo }, setUndoAndRedo] = useState({ canUndo: false, canRedo: false });\n\n\n    function reloadBoard() {\n        checkerBoardRef.current.isWhiteTurnToPlay = !checkerBoardRef.current.isWhiteTurnToPlay\n        setBoard(checkerBoardRef.current.board)\n        setMovementHistory(checkerBoardRef.current.getMovements())\n        setAvailableMoves({});\n        setSelectedPiece(null);\n        setIsWhiteTurnToPlay(checkerBoardRef.current.isWhiteTurnToPlay)\n        setUndoAndRedo({ canRedo: checkerBoardRef.current.canRedo(), canUndo: checkerBoardRef.current.canUndo() })\n    }\n    function init() {\n        checkerBoardRef.current = new CheckerBoard();\n\n        reloadBoard()\n    }\n\n\n    useEffect(() => {\n        init()\n        const cb = () => {\n            const boardWidth = f()\n            const pieceWidth = boardWidth / 8;\n\n            setSize(\n                {\n                    boardWidth,\n                    pieceWidth\n                }\n            )\n\n        }\n        window.addEventListener('resize', cb)\n        return () => {\n            window.removeEventListener('resize', cb)\n        }\n\n\n    }, [])\n\n    function onPieceClick(piece: CheckerPiece | null, y: number, x: number) {\n\n        if (availableMoves[y + \",\" + x]) {\n            if (!selectedPiece?.move(y, x)) {\n                // invalid move\n                return;\n            }\n\n            const possibleJump = availableMoves[y + \",\" + x];\n\n\n            possibleJump.forEach(([y, x]) => {\n                checkerBoardRef.current.killedHash[y + ',' + x] = checkerBoardRef.current.board[y][x];\n                checkerBoardRef.current.board[y][x] = null;\n            })\n\n\n\n\n            reloadBoard()\n\n\n\n\n        } else if (piece) {\n            //devLog(piece.toString())\n            if (isWhiteTurnToPlay !== piece.isPieceWhite) {\n                setAvailableMoves({});\n                setSelectedPiece(null);\n                return;\n            }\n\n\n            // show available moves\n            const a = piece.availableMoves();\n            //console.log(a)\n\n            const _: { [id: string]: number[][] } = {}\n            a.forEach(m => {\n                const val = m.jumpPosition == undefined ? [] : m.jumpPosition;\n\n                _[m.positionYIndex + \",\" + m.positionXIndex] = val\n            });\n\n            setAvailableMoves(_);\n            setSelectedPiece(piece);\n\n        } else {\n            setAvailableMoves({});\n            setSelectedPiece(null);\n        }\n\n    }\n    function performRedo() {\n        checkerBoardRef.current.performRedo();\n        reloadBoard()\n    }\n    function performUndo() {\n        checkerBoardRef.current.performUndo();\n        reloadBoard()\n    }\n    function save(){\n        const data = checkerBoardRef.current.serialize(true);\n        // @ts-ignore\n        localStorage.setItem(\"checkers\",data);\n    }\n    function restore(){\n        const data = localStorage.getItem(\"checkers\");\n        if(!data) return;\n        const board = CheckerBoard.deSerialize(data)\n        board.isWhiteTurnToPlay = !board.isWhiteTurnToPlay\n\n        checkerBoardRef.current = board;\n        reloadBoard()\n\n    }\n\n    return (\n        <div className=\"Whole-Body\">\n\n            <div className=\"Chess-Field\">\n                <div className=\"Chess-Pre-Playable\">\n\n                    <div className=\"Chess-Playable\">\n\n                        <div className='Board' style={{ width: size.boardWidth + 'px', height: size.boardWidth + 'px' }} >\n\n                            {board.map((row: CheckerPiece[] | null[], y: number) => {\n\n                                return (<div key={y} className='Board-Y' style={{ display: 'flex' }}>\n\n\n\n                                    {row.map((piece: CheckerPiece | null, x: number) => {\n\n                                        const shouldHighlight = availableMoves[y + \",\" + x];\n                                        return (<div onClick={() => onPieceClick(piece, y, x)} key={x} className='Board-X' style={{ width: size.pieceWidth + 'px', height: size.pieceWidth + 'px', backgroundColor: (x % 2 === 0) === (y % 2 === 0) ? 'rgba(245, 222, 179, 0.596)' : '' }}>\n                                            <div className={!piece ? '' : (isWhiteTurnToPlay !== piece.isPieceWhite) ? 'Piece-inner-invalid' : 'Piece-inner-valid'} style={{ width: '70%', height: '70%', display: 'flex', justifyContent: 'center', alignItems: 'center', backgroundColor: !(shouldHighlight || piece && piece === selectedPiece) ? '' : 'rgba(255, 255, 0, 0.5)' }}>\n                                                {piece ? <i className={piece.icon} style={{ color: (piece.isPieceWhite ? \"white\" : \"black\") }} ></i> : ''}\n\n                                            </div>\n                                        </div>\n\n\n                                        )\n                                    })}\n\n\n\n                                </div>\n\n\n                                )\n                            })}\n                        </div>\n\n                    </div>\n\n                    <div className=\"text-center\">\n                        {canUndo && <button onClick={performUndo} className=\"m-2\">  <i className=\"fa fa-undo\" /></button>}\n                        {canRedo && <button onClick={performRedo} className=\"m-2\">  <i className=\"fa fa-redo\" /></button>}\n\n\n                    </div>\n                </div>\n                <div className='Side' style={{ padding: '10px' }} >\n                    <div className='' style={{ padding: '0 30px' }} >\n                        Piece To Play\n                        <br />\n                        <i className={'fa fa-circle '} style={{ color: isWhiteTurnToPlay ? 'white' : 'black' }} ></i>\n                        <hr />\n                        <div style={{ textAlign: 'center' }}>\n                        <button onClick={save}><i className=\"fa fa-save\" /></button>\n                        <button onClick={restore}><i className=\"fa fa-upload\" /></button>\n                            {movementHistory.length != 0 && <>\n                                <button onClick={() => { csvGenerator(movementHistory as any) }}><i className=\"fa fa-file-download\" /></button>\n                                <br />\n                            </>}\n                            {movementHistory.map((movement, key) => {\n\n                                return (\n                                    <div style={{ fontSize: '13px', marginBottom: '5px', display: 'flex', justifyContent: 'center' }} key={key}>\n                                        <div style={{ marginRight: '5px' }}>\n                                            <i className={movement.icon} style={{ color: movement.isPieceWhite ? 'white' : 'black' }} />\n                                        </div>\n                                        <div>\n                                            {movement.prevPosition} <i className=\"fa fa-arrow-right\" /> {movement.position}\n                                        </div>\n                                    </div>\n                                )\n\n                            })}\n                        </div>\n                    </div> </div>\n            </div>\n        </div>\n    );\n}\n\nexport default CheckersGame;\n","import {useContext, useEffect, useRef, useState} from \"react\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport {StateContext} from \"./StateProvider\";\n\n\nfunction NavBar() {\n    const history = useHistory();\n    const {optionsClicked, setOptionsClicked} = useContext(StateContext)\n\n    return (\n        <nav className=\"navbar navbar-light bg-light\">\n            <span>\n                {history.location.pathname != '/' &&\n                    <span onClick={() => history.goBack()} style={{width: '50px', cursor: 'pointer'}}\n                          className=\"text-center d-inline-block\">\n                    <i className=\"fa fa-arrow-left\"> </i>\n                </span>}\n\n                <Link className=\"navbar-brand\" to=\"/\">\n                    <div style={{width: '50px'}} className=\"d-inline-block text-center\">\n                    <img src=\"favicon.png\" width=\"25\" height=\"25\" className=\"align-top\" alt=\"\"/>\n                    </div>\n                 \n                    <span className=\" d-inline-block\">\n                    Games\n                    </span>\n                </Link>\n\n                <form style={{float:'right'}}>\n                  <span onClick={() => setOptionsClicked(!optionsClicked)} style={{width: '50px', cursor: 'pointer'}}\n                        className=\"text-center d-inline-block form-inline\">\n                        <i className=\"fa fa-cog\"> </i>\n                    </span>\n                </form>\n\n            </span>\n        </nav>\n    )\n\n}\n\nexport default NavBar;\n","import {Tool} from \"./models/Tool\";\n\nexport interface Position {\n    x: number;\n    y: number;\n}\n\nexport type WallType = 'H' | 'V' | 'B';\n\nexport enum Direction {\n    up,\n    down,\n    right,\n    left\n}\nexport interface PromptData<T,X>{\n    title: string;\n    data:T;\n    cb: (data:X|null) => void\n\n}\n\n\nexport interface ItemState {\n    position: { x: number, y: number },\n    grid: { x: number, y: number },\n    dimensions: { width: number, height: number },\n    color: string,\n    noOfLines: number\n    action?: {\n        opened?: boolean\n    }\n}\n\n","export default class Subscription<T> {\n    fns:Set<Function> = new Set<Function>();\n    constructor() {\n    }\n\n    emit = (value:T) => {\n        this.fns.forEach(fn => {\n            fn(value)\n        })\n\n    }\n    subscribe = (fn: Function) => {\n        this.fns.add(fn)\n        return {\n            unsubscribe: () => {\n                this.fns.delete(fn);\n            }\n        }\n    }\n}","import {Direction, PromptData} from \"../types\";\nimport Subscription from \"./Subscription\";\nimport Circle from \"../models/Circle\";\nimport {Tool} from \"../models/Tool\";\n\nexport function gridToPosition(gridX: number, gridY: number) {\n    return {x: gridX * 20, y: gridY * 20};\n}\n\nexport function positionToGrid(x: number, y: number) {\n    return {x: x / 20, y: y / 20};\n}\n\nexport function clear(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\n\n\nexport function moveFrame(frameX: number, frameY: number, canvasContainer: HTMLDivElement, player: Circle, stack: {\n    horizontal: any[],\n    vertical: any[]\n}) {\n    const pos = {\n        frameX,\n        frameY,\n    }\n\n    return (direction: Direction) => {\n        const movemtntPixel = 60;\n        if (direction == Direction.up) pos.frameY -= movemtntPixel\n        else if (direction == Direction.down) pos.frameY += movemtntPixel\n        else if (direction == Direction.right) pos.frameX += movemtntPixel\n        else if (direction == Direction.left) pos.frameX -= movemtntPixel\n\n        let distWidth = canvasContainer.clientWidth / 2;\n        let distHeight = canvasContainer.clientHeight / 2;\n\n        let previousInStack: any = null;\n        if (direction === Direction.up && stack.vertical.length) previousInStack = stack.vertical[stack.vertical.length - 1];\n        if (direction === Direction.left && stack.horizontal.length) previousInStack = stack.horizontal[stack.horizontal.length - 1];\n\n        if (direction == Direction.down && pos.frameY >= distHeight) {\n            stack.vertical.push({\n                frame: pos.frameY,\n                scroll: canvasContainer.scrollTop\n            })\n            let total = canvasContainer.scrollTop + distHeight;\n            if (total > canvasContainer.scrollHeight) {\n                total = canvasContainer.scrollHeight\n                distHeight = canvasContainer.scrollHeight - canvasContainer.scrollTop\n            }\n            canvasContainer.scrollTop = total;\n            pos.frameY -= distHeight\n\n        }\n\n        if (direction == Direction.up) {\n            if (!previousInStack) return;\n            console.log(previousInStack)\n            if (pos.frameY <= previousInStack.frame) {\n                stack.vertical.pop();\n                canvasContainer.scrollTop = previousInStack.scroll;\n                pos.frameY = previousInStack.frame;\n\n            }\n        }\n\n        if (direction == Direction.right && pos.frameX >= distWidth) {\n            stack.horizontal.push({\n                frame: pos.frameX,\n                scroll: canvasContainer.scrollLeft\n            })\n            let total = canvasContainer.scrollLeft + distWidth;\n            if (total > canvasContainer.scrollWidth) {\n                total = canvasContainer.scrollWidth\n                distWidth = canvasContainer.scrollWidth - canvasContainer.scrollLeft\n            }\n            canvasContainer.scrollLeft = total;\n            pos.frameX -= distWidth\n\n        }\n\n\n        if (direction == Direction.left) {\n            if (!previousInStack) return;\n            if (pos.frameX <= previousInStack.frame) {\n                stack.horizontal.pop();\n                canvasContainer.scrollLeft = previousInStack.scroll;\n                pos.frameX = previousInStack.frame;\n\n            }\n        }\n\n    }\n}\n\n\nexport const keyboardObs = new Subscription()\n\ninterface StageProps {\n    time?: number;\n    toolsPrompt?: PromptData<Tool[], Tool>\n}\n\nexport const stageObs = new Subscription<StageProps>();\n\n","interface Node<T> {\n    val: T,\n    next?: Node<T>,\n    prev?: Node<T>,\n}\n\nexport const node = <T, >(val: T, next?: Node<T>, prev?: Node<T>): Node<T> => {\n\n    return {\n        val,\n        next,\n        prev\n    }\n\n}\n\nexport const LinkedList = <T, >() => {\n    const globalRef = node(0 as any)\n\n    let curr = globalRef.next\n\n    return {\n        head: () => globalRef.next,\n        tail: () => curr,\n        setCurr: (c: Node<T>) => curr = c,\n        curr,\n        values: () => {\n            const arr: T[] = [];\n            let _x = globalRef.next;\n            while (_x != undefined) {\n                arr.push(_x.val)\n                _x = _x.next;\n            }\n\n            return arr;\n        },\n        add: (n: Node<T>) => {\n            if (!curr) {\n                globalRef.next = n;\n                curr = globalRef.next\n                return;\n            }\n\n            curr.next = n;\n            n.prev = curr;\n            curr = curr.next;\n\n        }\n\n    }\n\n}","import {gridToPosition, positionToGrid} from \"../utils\";\nimport {ItemState, Position} from \"../types\";\nimport {LinkedList} from \"../modules/linkedlist\";\n\nexport function getDefaultState() {\n    return {\n        position: {\n            x: 0,\n            y: 0,\n        },\n        grid: {\n            x: 0,\n            y: 0,\n\n        },\n        dimensions: {\n            width: 20,\n            height: 120\n        },\n        color: 'black',\n        noOfLines: 10,\n    }\n}\n\nexport default class Item {\n    protected ctx: CanvasRenderingContext2D;\n    protected state: ItemState = getDefaultState()\n    protected boundaries = [\n        [[0, 0], [0, 0]],\n        [[0, 0], [0, 0]],\n    ]\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, style?: any) {\n        this.ctx = ctx;\n\n        if (position) {\n            this.state.position = position;\n            this.state.grid = positionToGrid(position.x, position.y)\n        } else {\n            this.state.position = gridToPosition(gridX, gridY);\n            this.state.grid = {\n                x: gridX,\n                y: gridY\n            }\n        }\n\n        // @ ts-ignore\n        if (style) {\n            this.state = {...this.state, ...style};\n        }\n        this.calculateBoundaries()\n    }\n\n    public getBoundaries() {\n        return this.boundaries;\n    }\n\n    public isWithinBoundary(grid: number[][]) {\n\n        return false;\n\n    }\n\n    public calculateBoundaries() {\n        this.boundaries[0][0][0] = this.state.position.x;\n        this.boundaries[0][0][1] = this.state.position.y;\n\n        this.boundaries[0][1][0] = this.state.position.x + this.state.dimensions.width;\n        this.boundaries[0][1][1] = this.state.position.y;\n\n        this.boundaries[1][0][0] = this.state.position.x;\n        this.boundaries[1][0][1] = this.state.position.y + this.state.dimensions.height;\n\n        this.boundaries[1][1][0] = this.state.position.x + this.state.dimensions.width;\n        this.boundaries[1][1][1] = this.state.position.y + this.state.dimensions.height;\n\n\n    }\n\n    public updateGrid(gridX: number, gridY: number) {\n        this.state.position = gridToPosition(gridX, gridY);\n        this.state.grid.x = gridX;\n        this.state.grid.y = gridY;\n\n        this.calculateBoundaries()\n\n    }\n\n    public draw = {\n        all: () => {\n\n        }\n    }\n    public getState = () => {\n        return this.state;\n    }\n    public debug = {\n        cordinates: () => {\n            this.getBoundaries().forEach(each => {\n                each.forEach(boundary => {\n                    this.ctx.fillText(`${boundary[0]},${boundary[1]}`, boundary[0], boundary[1]);\n                })\n\n            })\n\n        },\n        highlight: () => {\n            this.ctx.beginPath();\n\n            this.ctx.strokeStyle = 'red';\n            this.ctx.strokeRect(\n                this.state.position.x,\n                this.state.position.y,\n                this.state.dimensions.width,\n                this.state.dimensions.height,\n            );\n        },\n\n        all: () => {\n            this.debug.cordinates()\n            this.debug.highlight()\n\n        }\n    }\n\n    setActionState(param: { opened: boolean }) {\n        this.state.action = {...this.state.action, ...param}\n    }\n\n    getActionState() {\n        return this.state.action\n    }\n}\n\nexport class StateActionItem<T> extends Item {\n    protected stateActionHistory = LinkedList<T & { second: number }>();\n\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, style?: any) {\n        super(ctx, gridX, gridY, position, style)\n\n    }\n\n    timeElapsedAction = (second: number) => {\n\n    }\n\n    public resetToTime = (second: number) => {\n\n    }\n    protected _resetToTime = (second: number) => {\n        let x = this.stateActionHistory.head();\n        let resetNode: typeof x;\n\n\n        while (x) {\n            if (x.val.second > second) {\n                if (x.prev) {\n                    resetNode = x.prev;\n                    x.prev.next = undefined;\n\n                    this.stateActionHistory.setCurr(x.prev)\n                }\n            }\n            x = x.next;\n        }\n\n        return resetNode\n    }\n\n\n}\n\n","import {Position} from \"../types\";\nimport Item, {getDefaultState} from \"./Item\";\n\nclass Wall extends Item {\n    private readonly type: string;\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, type = 'V', state?: any) {\n        super(ctx, gridX, gridY, position, state);\n        this.ctx = ctx;\n        this.type = type;\n        this.state.noOfLines =  this.state.dimensions.height/10;\n\n        if (type == 'H') {\n            const temp = this.state.dimensions.width;\n            this.state.dimensions.width = this.state.dimensions.height;\n            this.state.dimensions.height = temp;\n            this.calculateBoundaries();\n        }\n\n        this.draw.all();\n\n\n    }\n\n    public updateGrid(gridX: number, gridY: number) {\n        this.updateGrid(gridX, gridY);\n        this.draw.all();\n\n    }\n\n    public draw = {\n        rect: () => {\n            this.ctx.lineWidth = 2\n            this.ctx.beginPath();\n\n            this.ctx.strokeStyle = this.state.color;\n            this.ctx.strokeRect(\n                this.state.position.x,\n                this.state.position.y,\n                this.state.dimensions.width,\n                this.state.dimensions.height,\n            );\n\n            this.ctx.fill();\n\n        },\n        lines: () => {\n            if (this.type === 'V' || this.type === 'B') {\n                const diff = this.state.dimensions.height / this.state.noOfLines;\n                for (let i = 0; i < this.state.noOfLines; i++) {\n                    const _height = (this.state.dimensions.width / 2) + (i * diff);\n\n                    const heightWithPosition = _height + this.state.position.y;\n                    const widthWithPosition = this.state.position.x + this.state.dimensions.width\n\n                    if (_height > this.state.dimensions.height) {\n\n                    }\n                    this.ctx.beginPath();\n                    this.ctx.strokeStyle = this.state.color;\n                    this.ctx.moveTo(this.state.position.x, this.state.position.y + (i * diff));\n                    this.ctx.lineTo(widthWithPosition, heightWithPosition);\n\n                    this.ctx.stroke();\n                }\n                return;\n            }\n\n\n            if (this.type == 'H') {\n                const diff = this.state.dimensions.width / this.state.noOfLines;\n                for (let i = 0; i < this.state.noOfLines; i++) {\n                    const _width = (this.state.dimensions.height / 2) + (i * diff);\n\n                    const widthWithPosition = _width + this.state.position.x;\n                    const heightWithPosition = this.state.position.y + this.state.dimensions.height\n\n                    if (_width > this.state.dimensions.width) {\n\n                    }\n                    this.ctx.beginPath();\n                    this.ctx.strokeStyle = this.state.color;\n                    this.ctx.moveTo(this.state.position.x + (i * diff), this.state.position.y);\n                    this.ctx.lineTo(widthWithPosition, heightWithPosition);\n\n                    this.ctx.stroke();\n                }\n            }\n\n        },\n        all: () => {\n\n\n            this.draw.rect();\n            this.draw.lines();\n        }\n    }\n\n}\n\nexport class HWall extends Wall {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, style?: any) {\n        super(ctx, gridX, gridY, position, 'H', style)\n    }\n\n}\n\nexport class VWall extends Wall {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, style?: any) {\n        super(ctx, gridX, gridY, position, 'V', style)\n    }\n\n}\n","import Item, {StateActionItem} from \"./Item\";\nimport {Position} from \"../types\";\nimport {positionToGrid, stageObs} from \"../utils\";\nimport {node} from \"../modules/linkedlist\";\n\nexport default class Circle extends StateActionItem<{\n    x:number;\n    y:number;\n}> {\n\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined) {\n        super(ctx, gridX, gridY, position, {dimensions: {height: 10, width: 10}})\n        this.stateActionHistory.add(node({x: this.state.position.x, y: this.state.position.y,second:0}))\n        this.draw.all()\n    }\n\n    action = {\n        goTo: (gridX: number, gridY: number) => {\n\n            const previousPosition = {...this.getPreviousPosition()};\n\n            const prevGrid = positionToGrid(previousPosition.x,previousPosition.y);\n\n            const res = {\n                prevPosition: previousPosition,\n                reject: () => {\n                    this.updateGrid(prevGrid.x, prevGrid.y);\n                    this.draw.all();\n                },\n                accept: () => {\n\n                }\n\n            }\n            this.updateGrid(gridX, gridY);\n            return res;\n\n        },\n        down: (n = 1) => {\n            const {x,y} = this.getPreviousGrid();\n            return this.action.goTo(x, y + n)\n        },\n        up: (n = 1) => {\n            const {x,y} = this.getPreviousGrid();\n            return this.action.goTo(x, y - n)\n        },\n        right: (n = 1) => {\n            const {x,y} = this.getPreviousGrid();\n            return this.action.goTo(x + n, y)\n        },\n        left: (n = 1) => {\n            const {x,y} = this.getPreviousGrid();\n            return this.action.goTo(x - n, y)\n        }\n    }\n    public draw = {\n        history: () => {\n            const arr = this.stateActionHistory.values();\n            arr.forEach((curr, i) => {\n                if (i == 0) return;\n                const prev = arr[i - 1];\n                this.ctx.beginPath();\n                this.ctx.strokeStyle = this.state.color;\n                this.ctx.strokeRect(\n                    prev.x,\n                    prev.y,\n                    curr.x - prev.x,\n                    curr.y - prev.y,\n                );\n            })\n\n        },\n        arc: () => {\n            this.ctx.beginPath();\n            this.ctx.arc(\n                this.state.position.x,\n                this.state.position.y,\n                (this.state.dimensions.width) / 2,\n                0,\n                Math.PI * 2,\n                false\n            );\n\n            this.ctx.fillStyle = this.state.color;\n            this.ctx.fill();\n        },\n        all: () => {\n            this.draw.history();\n            this.draw.arc();\n        }\n    }\n\n    public getPlayerMoves() {\n        return this.stateActionHistory.tail()?.val.second || 0\n\n    }\n\n    timeElapsedAction = (currentSecond:number)=> {\n        this.stateActionHistory.add(node({x:this.state.position.x,y:this.state.position.y,second: currentSecond}))\n    }\n\n    resetToTime = (second:number)=> {\n        let resetNode: any = this._resetToTime(second);\n        if(!resetNode) return false;\n\n        this.state.position.x = resetNode.val.x\n        this.state.position.y = resetNode.val.y\n\n        this.state.grid = positionToGrid(resetNode.val.x,resetNode.val.y)\n\n        return true;\n\n    }\n\n    private getPreviousPosition() {\n        return this.stateActionHistory.tail()?.val\n    }\n    private getPreviousGrid() {\n        const {x,y} = this.stateActionHistory.tail()?.val;\n        return positionToGrid(x,y)\n    }\n\n    getLastActionSecond() {\n        const tail = this.stateActionHistory.tail();\n        return (tail?.val.second || 0) - ( tail?.prev?.val.second || 0)\n    }\n}\n","import {Position} from \"../types\";\nimport Item from \"./Item\";\n\n\n class ImageItem extends Item{\n    private img = new Image()\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, style?:any,src:string = '') {\n        super(ctx, gridX, gridY, position, style);\n\n        this.img.src = src;\n        this.img.onload = () => {\n            this.draw.all();\n        }\n    }\n\n    draw = {\n        image:() => {\n            this.ctx.drawImage(this.img,this.state.position.x, this.state.position.y, this.state.dimensions.width,this.state.dimensions.height);\n        },\n        all: () => {\n            this.draw.image()\n        }\n\n    }\n}\n\nexport  class Flower extends ImageItem {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined) {\n        super(ctx, gridX, gridY, position,{dimensions: {height: 80, width: 80}, noOfLines: 2},process.env.PUBLIC_URL + '/assets/flower.png');\n    }\n}\n\nexport  class HCar extends ImageItem {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined) {\n        super(ctx, gridX, gridY, position,{dimensions: {height: 40, width: 80}, noOfLines: 2},process.env.PUBLIC_URL + '/assets/hcar.png');\n    }\n}","import {Position, WallType} from \"../types\";\nimport Item, {getDefaultState, StateActionItem} from \"./Item\";\nimport {node} from \"../modules/linkedlist\";\n\nexport class Gate extends StateActionItem<{\n    opened: boolean;\n}> {\n    private readonly type: WallType;\n\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined, type: WallType = 'V', style?: any) {\n        super(ctx, gridX, gridY, position, style);\n\n        this.stateActionHistory.add(node({opened: false, second: 0}))\n        this.state.color = 'black';\n        this.state.action = {\n            opened: false\n        }\n        this.type = type;\n\n        if (type == 'H') {\n            const temp = this.state.dimensions.width;\n            this.state.dimensions.width = this.state.dimensions.height;\n            this.state.dimensions.height = temp;\n            this.calculateBoundaries();\n        }\n\n        this.draw.all();\n\n\n    }\n\n    public updateGrid(gridX: number, gridY: number) {\n        this.updateGrid(gridX, gridY);\n        this.draw.all();\n\n    }\n\n    public draw = {\n        rect: () => {\n            this.ctx.beginPath();\n\n            this.ctx.strokeStyle = this.state.color;\n            const x = this.state.position.x + (this.type == 'V' ? 5 : 0)\n            const y = this.state.position.y + (this.type == 'H' ? 5 : 0)\n            this.ctx.strokeRect(\n                x,\n                y,\n                this.state.dimensions.width - (this.type == 'V' ? 10 : 0),\n                this.state.dimensions.height - (this.type == 'H' ? 10 : 0),\n            );\n\n            this.ctx.stroke();\n\n        },\n        cross: () => {\n            this.ctx.beginPath();\n            this.ctx.lineWidth = 4\n            this.ctx.strokeStyle = this.state.color;\n\n            const draw = (second = true) => {\n                if (!this.state.action?.opened) return;\n                let x;\n                if (!second) x = this.getBoundaries()[0][0][0] + (this.type == 'H' ? 20 : 0);\n                else x = this.getBoundaries()[0][1][0] - (this.type == 'H' ? 20 : 0);\n                const y = this.getBoundaries()[0][0][1] + (this.type == 'V' ? 20 : 0);\n\n                let endX;\n                if (!second) endX = this.getBoundaries()[1][1][0] - (this.type == 'H' ? 20 : 0);\n                else endX = this.getBoundaries()[1][0][0] + (this.type == 'H' ? 20 : 0);\n\n                const endY = this.getBoundaries()[1][1][1] - (this.type == 'V' ? 20 : 0);\n\n                this.ctx.moveTo(x, y);\n                this.ctx.lineTo(\n                    endX,\n                    endY\n                );\n\n                this.ctx.stroke();\n\n            }\n            draw();\n            draw(false)\n\n        },\n        all: () => {\n            this.draw.rect();\n            this.draw.cross();\n        }\n    }\n\n    timeElapsedAction = (second: number) => {\n        this.stateActionHistory.add(node({opened: this.state.action?.opened || false, second}))\n    }\n\n    resetToTime = (second:number)=> {\n        let resetNode: any  = this._resetToTime(second)\n        if(!resetNode || !this.state.action) return false;\n        this.state.action.opened = resetNode.val.opened\n\n        return true;\n\n    }\n\n}\n\nexport class HGate extends Gate {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined) {\n        super(ctx, gridX, gridY, position, 'H', {dimensions: {width: 20, height: 80}})\n    }\n\n}\n\nexport class VGate extends Gate {\n    constructor(ctx: CanvasRenderingContext2D, gridX: number = 0, gridY: number = 0, position: Position | undefined = undefined) {\n        super(ctx, gridX, gridY, position, 'V', {dimensions: {width: 20, height: 80}})\n    }\n\n}\n\n","export class Tool{\n    title: string;\n    img: string;\n    elapsed:number;\n    constructor(title: string, img:string,elapsed:number) {\n        this.title = title;\n        this.img = img;\n        this.elapsed = elapsed;\n\n    }\n\n    getElapsed() {\n        return this.elapsed;\n    }\n}\n\nexport class Hammer extends Tool{\n\n    constructor() {\n        super(\"hammer\",process.env.PUBLIC_URL + '/assets/hammer.avif',6);\n    }\n}","import {HWall, VWall} from \"../models/Wall\";\nimport Item, {StateActionItem} from \"../models/Item\";\nimport {keyboardObs, moveFrame, stageObs} from \"../utils\";\nimport Circle from \"../models/Circle\";\nimport {Flower, HCar} from \"../models/ImageItem\";\nimport {Gate, HGate, VGate} from \"../models/Gate\";\nimport {Direction} from \"../types\";\nimport {Hammer} from \"../models/Tool\";\n\nconst MOVEMENT_SPEED = 3;\n\n\nexport default class Scene1 {\n    pos = {\n        x: 7,\n        y: 10\n    }\n    scene: (Item | null)[][] = [];\n    private currentSecond = 0;\n    private readonly canvasContainer: HTMLDivElement;\n    private readonly canvas: HTMLCanvasElement;\n    private readonly ctx: CanvasRenderingContext2D;\n    public player: Circle = null as any;\n    public generateGrid: any = null as any;\n    private stack = {\n        horizontal: [] as any [],\n        vertical: [] as any [],\n    }\n    private readonly keyCb = null as any\n\n    constructor(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D, canvasContainer: HTMLDivElement, generateGrid: (canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) => void) {\n        this.canvasContainer = canvasContainer;\n        this.canvas = canvas;\n        this.ctx = ctx;\n        this.generateGrid = generateGrid;\n\n\n        this.render();\n        const _moveFrame = moveFrame(\n            this.player.getState().position.x,\n            this.player.getState().position.y,\n            this.canvasContainer, this.player, this.stack);\n\n        this.keyCb = async (e: KeyboardEvent, direction?: Direction) => {\n            e = e || window.event;\n            if (e && e.keyCode == 90 && e.ctrlKey) return this.undo()\n            let valid = false;\n            let elapsed = 0;\n            let move: { prevPosition: { x: number, y: number }, reject: () => void, accept: () => void } = null as any;\n\n            if (e.keyCode == 38 || direction === Direction.up) {\n                direction = Direction.up\n                valid = true;\n                // up arrow\n                move = this.player.action.up(MOVEMENT_SPEED);\n                elapsed = await this.validateMove(direction, move)\n                if (!elapsed) return move.reject();\n\n            } else if (e.keyCode == 40 || direction === Direction.down) {\n                direction = Direction.down\n                valid = true;\n                // down arrow\n                move = this.player.action.down(MOVEMENT_SPEED);\n                elapsed = await this.validateMove(direction, move);\n                if (!elapsed) return move.reject();\n\n            } else if (e.keyCode == 37 || direction === Direction.left) {\n                direction = Direction.left\n                valid = true;\n                // left arrow\n                move = this.player.action.left(MOVEMENT_SPEED);\n                elapsed = await this.validateMove(direction, move);\n                if (!elapsed) return move.reject();\n            } else if (e.keyCode == 39 || direction === Direction.right) {\n                direction = Direction.right\n                valid = true;\n                // right arrow\n                move = this.player.action.right(MOVEMENT_SPEED);\n                elapsed = await this.validateMove(direction, move);\n                if (!elapsed) return move.reject();\n            }\n\n            if (valid && direction != undefined) {\n\n                this.currentSecond += elapsed;\n                move.accept()\n                _moveFrame(direction)\n                this.player.timeElapsedAction(this.currentSecond)\n                this.render()\n            }\n\n        };\n\n        keyboardObs.subscribe((val) => {\n            this.keyCb(null, val)\n        })\n\n        document.addEventListener('keydown', this.keyCb, true)\n\n\n    }\n\n    public destroy() {\n        document.removeEventListener('keydown', this.keyCb, true)\n\n    }\n\n    private generateScenes() {\n        if (this.scene.length) {\n            this.scene.forEach(row => {\n                row.forEach(el => {\n                    if (!el) return;\n                    el.draw.all();\n                })\n            })\n            return;\n        }\n\n        this.player = new Circle(this.ctx, this.pos.x + (-0.8 * 5), this.pos.y + (-1.4 * 5));\n        const car = new HCar(this.ctx, this.pos.x + (-1.2 * 5), this.pos.y + (-1.6 * 5))\n        this.scene = [\n            [this.player],\n            [car],\n\n            [new HWall(this.ctx, this.pos.x, this.pos.y + (0.0 * 5), undefined, {\n                dimensions: {\n                    height: 140,\n                    width: 20\n                }\n            }), new HGate(this.ctx, this.pos.x + (1.4 * 5), this.pos.y + (0 * 5)), new HWall(this.ctx, this.pos.x + (2.2 * 5), this.pos.y + (0 * 5), undefined, {\n                dimensions: {\n                    height: 500,\n                    width: 20\n                }\n            })],\n\n            [new VWall(this.ctx, this.pos.x, this.pos.y + (0.2 * 5), undefined, {\n                dimensions: {\n                    width: 20,\n                    height: 360\n                }\n            }), new VWall(this.ctx, this.pos.x + (7.0 * 5), this.pos.y + (0.2 * 5), undefined, {\n                dimensions: {\n                    width: 20,\n                    height: 740\n                }\n            })],\n            [new VGate(this.ctx, this.pos.x, this.pos.y + (3.8 * 5))],\n            [new VWall(this.ctx, this.pos.x, this.pos.y + (4.6 * 5), undefined, {\n                dimensions: {\n                    height: 300,\n                    width: 20\n                }\n            })],\n\n            [new HWall(this.ctx, this.pos.x + (0.0 * 5), this.pos.y + (7.6 * 5), undefined, {\n                dimensions: {\n                    height: 720,\n                    width: 20\n                }\n            }),],\n\n            /**\n             * items\n             *\n             * */\n\n            /**\n             * flower\n             *\n             * */\n            [\n                new Flower(this.ctx, this.pos.x + (1.2 * 5), this.pos.y + (3.6 * 5)),\n                new Flower(this.ctx, this.pos.x + (2.4 * 5), this.pos.y + (3.6 * 5)),\n\n            ]\n        ];\n\n\n    }\n\n    private validateMove = async (direction: Direction, move: {\n        prevPosition: { x: number, y: number },\n        reject: () => void,\n        accept: () => void\n    }) => {\n\n\n        const isVertical = direction == Direction.up || direction == Direction.down;\n        const isHorizontal = !isVertical;\n        const increments = [1, 2, 3, 4, 5, 6].map((i,) => ((isVertical ? move.prevPosition.y : move.prevPosition.x) + (((direction == Direction.up || direction === Direction.left) ? -i : i) * 10)));\n\n        const playerPosition = this.player.getState().position;\n\n        for (let row of this.scene) {\n            for (let el of row) {\n                if (!el || el instanceof Circle || el instanceof HCar) continue;\n                const boundary = el.getBoundaries();\n                for (let pos of increments) {\n                    if (\n                        (isHorizontal ? pos : playerPosition.x) >= boundary[0][0][0]\n                        && (isHorizontal ? pos : playerPosition.x) <= boundary[0][1][0]\n                        && (isVertical ? pos : playerPosition.y) >= boundary[0][0][1]\n                        && (isVertical ? pos : playerPosition.y) <= boundary[1][0][1]\n\n                    ) {\n\n                        return await this.itemInteraction(el)\n                    }\n\n                }\n\n            }\n        }\n        return 1\n\n\n    }\n\n    private itemInteraction(el: Item): Promise<number> {\n        return new Promise((resolve) => {\n            /**\n             * Check if item hit is interactable\n             */\n            const isStateActionItem = el instanceof StateActionItem;\n            el.debug.all()\n            if (!isStateActionItem) return resolve(0);\n            if (el instanceof Gate) {\n                if (el.getState().action?.opened) return resolve(1);\n\n                stageObs.emit({\n                    toolsPrompt: {\n                        title: \"Tools\",\n                        data: [new Hammer()],\n                        cb: (tool) => {\n                            stageObs.emit({toolsPrompt: undefined})\n                            if (!tool) return resolve(0);\n                            // validate\n                            el.setActionState({opened: true})\n                            el.timeElapsedAction(this.currentSecond + tool.getElapsed())\n                            this.render()\n\n                            return resolve(tool.getElapsed())\n                        }\n                    }\n                })\n\n\n            }\n\n        })\n    }\n\n    private clearCanvas() {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    }\n\n    private render() {\n        this.clearCanvas()\n        this.generateGrid()\n        this.generateScenes()\n        stageObs.emit({time: this.player.getPlayerMoves()})\n    }\n\n    private undo() {\n        if (this.currentSecond == 0) return;\n        this.currentSecond-=this.player.getLastActionSecond();\n        this.scene.forEach(row => {\n            row.forEach(el => {\n                if (!el || !(el instanceof StateActionItem)) return;\n\n                el.resetToTime(this.currentSecond)\n            })\n        })\n\n        this.render();\n        return;\n    }\n}","import Scene1 from \"./scenes/Scene1\";\n\nfunction drawLines(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D, horizontal = true) {\n    const size = 20;\n    let totalDrawn = 0;\n    let group = 0;\n    const boundary = (horizontal ? canvas.height : canvas.width);\n    while (totalDrawn < boundary) {\n        ctx.beginPath();\n        if (horizontal) {\n            ctx.moveTo(0, totalDrawn);\n            ctx.lineTo(canvas.width, totalDrawn);\n        } else {\n            ctx.moveTo(totalDrawn, 0);\n            ctx.lineTo(totalDrawn, canvas.height);\n        }\n\n        if (totalDrawn == 0 || group == 3) {\n            ctx.lineWidth = 3;\n            ctx.strokeStyle = \"#c2a667\";\n            //ctx.strokeStyle = \"red\";\n            group = 0;\n        } else {\n            ctx.lineWidth = 1;\n            ctx.strokeStyle = \"#c1a46a\"\n        }\n        ctx.stroke();\n        totalDrawn += size;\n        group++;\n    }\n\n\n}\n\n\nfunction drawGrid(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) {\n    // Add behind elements.\n    ctx.globalCompositeOperation = 'destination-under'\n    // Now draw!\n    ctx.fillStyle = \"#e3ca8c\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    drawLines(canvas, ctx, true)\n    drawLines(canvas, ctx, false)\n}\n\nexport const draw = (canvas: HTMLCanvasElement | null, canvasContainer: HTMLDivElement | null) => {\n    if (!canvas || !canvasContainer) return;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n    canvas.width = 1000;\n    canvas.height = 1400;\n\n    new Scene1(canvas,ctx,canvasContainer, () => {\n        drawGrid(canvas, ctx)\n    })\n\n};\n\n\n\n","export function Button(props: any) {\n    const style = {\n        borderRadius: '5px',\n        backgroundColor: 'rgba(73,110,83,255)',\n        padding: '5px 25px'\n    }\n    if(props.disabled){\n        style.backgroundColor = undefined as any\n    }\n    return (\n        <button style={style} {...props}>\n            {props.children}\n        </button>\n    )\n}\n\nexport function CheckButton(props:any){\n    return (\n        <Button {...props}>\n            <i className={'fa fa-check'} style={{color: props.disabled ?'gray':'#41874c', fontSize: '25px'}}/>\n        </Button>\n    )\n}\n\nexport function CancelButton(props:any){\n    return (\n        <Button  {...props}>\n            <i className={'fa fa-close'} style={{color: props.disabled ?'gray':'red', fontSize: '25px'}}/>\n        </Button>\n    )\n}","import './StolenIn60Seconds.css';\nimport {useContext, useEffect, useRef, useState} from \"react\";\nimport {draw} from \"./misc/draw\";\nimport {StateContext} from \"../misc/StateProvider\";\nimport {Direction, PromptData} from \"./misc/types\";\nimport {keyboardObs, stageObs} from \"./misc/utils\";\nimport {Hammer, Tool} from \"./misc/models/Tool\";\nimport {Button, CancelButton, CheckButton} from \"./components/Button\";\n\n\nfunction Prompt(props: { data?: PromptData<Tool[], Tool>, dataRef?: any }) {\n    const data = props.data;\n    const [selectedTool, setSelectedTool] = useState(null as unknown as Tool);\n\n    if (!data) return <></>;\n    return <div style={{\n        position: 'fixed',\n        top: '0px',\n        width: '100vw',\n        height: '100vh',\n        zIndex: 10,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n    }}>\n\n\n        <div style={{background: '#b5aaa0', width: '100%', maxWidth: '500px', padding: '5px'}}>\n            <div style={{background: '#6f768a', padding: '2px', marginBottom: '10px'}}>\n                {data.title}\n            </div>\n\n            <div style={{}}>\n                {data.data.map(tool => {\n                    const activeTool = tool.title == selectedTool?.title;\n                    return (\n                        <div key={tool.title} onClick={() => {\n                            setSelectedTool(tool)\n                        }} style={{\n\n                            marginLeft: '10px',\n                            marginBottom: '5px',\n                            display: 'flex',\n                            overflow: 'hidden',\n                            ...(activeTool ? {\n                                padding: '5px',\n                                borderRadius: '5px',\n                                border: '1px solid white'\n                            } : {})\n\n                        }}>\n                            <div style={{\n                                background: '#b4aaa2',\n                                borderRadius: '5px',\n                                width: '50px',\n                                height: '50px',\n                                display: 'flex',\n                                overflow: 'hidden',\n\n                            }}>\n                                <img style={{width: '100%'}} src={tool.img}/>\n                            </div>\n                            <div style={{marginLeft: '10px'}}>\n                                {tool.title}\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n\n\n            <br/>\n            <div style={{display: 'flex', justifyContent: 'space-between'}}>\n                <CheckButton onClick={() => props.dataRef.cb(selectedTool)} disabled={!selectedTool}/>\n\n                <CancelButton onClick={() => props.dataRef.cb(null)}/>\n            </div>\n\n            {/*<div style={{}}>*/}\n            {/*    {[1, 2, 3, 4, 5, 6].map(tool => {*/}\n            {/*        return (*/}\n            {/*            <div style={{*/}\n            {/*                background: '#b4aaa2',*/}\n            {/*                borderRadius: '5px',*/}\n            {/*                width: '60px',*/}\n            {/*                height: '60px',*/}\n            {/*                display: 'inline-block',*/}\n            {/*                margin: '5px',*/}\n            {/*                overflow:'hidden',*/}\n            {/*                */}\n            {/*            }}>*/}\n            {/*                <img style={{width:'100%'}} src={process.env.PUBLIC_URL + '/assets/hammer.avif'}/>*/}\n            {/*            </div>*/}\n            {/*        )*/}\n            {/*    })}*/}\n            {/*</div>*/}\n        </div>\n    </div>\n}\n\nfunction TimePill(props: any) {\n    const min = Math.floor(props.time / 60);\n    const seconds = props.time % 60;\n    return <div style={{\n        background: '#ada69c',\n        borderRadius: '5px',\n        padding: '2.5px 5px',\n        display: 'inline-block',\n        color: '#faf985',\n        fontWeight: 'bold',\n        fontSize: '22px'\n    }}>\n        {min < 10 ? '0' + min : min}:{seconds < 10 ? '0' + seconds : seconds}\n    </div>\n\n}\n\nfunction BottomPanel() {\n    const {stageProps, setStageProps} = useContext(StateContext);\n    const statePropsRef = useRef(stageProps)\n    useEffect(() => {\n        const obs = stageObs.subscribe((val) => {\n\n            if (val.time != undefined) {\n                statePropsRef.current.time = val.time;\n            }\n            statePropsRef.current.toolsPrompt = val.toolsPrompt;\n            setStageProps({...statePropsRef.current})\n        })\n        return () => {\n            obs.unsubscribe()\n        }\n\n    }, [])\n    return (<>\n            <Prompt data={stageProps.toolsPrompt} dataRef={statePropsRef.current.toolsPrompt}/>\n            <div style={{position: 'fixed', bottom: '0px', width: '100vw', background: '#213c42', zIndex: 2}}\n                 className={'p-2'}>\n                <div style={{textAlign: 'right'}}>\n                    <TimePill time={stageProps.time}/>\n                </div>\n\n                <br/>\n\n\n            </div>\n        </>\n    )\n\n}\n\nexport default BottomPanel;\n","import './StolenIn60Seconds.css';\nimport {useContext, useEffect, useRef} from \"react\";\nimport {draw} from \"./misc/draw\";\nimport {StateContext} from \"../misc/StateProvider\";\nimport BottomPanel from \"./BottomPanel\";\nimport {useSwipeable} from \"react-swipeable\";\nimport {keyboardObs} from \"./misc/utils\";\nimport {Direction} from \"./misc/types\";\n\nfunction StolenIn60SecondsGame() {\n    const canvasRef = useRef<HTMLCanvasElement>(null)\n    const canvasContainerRef = useRef<HTMLDivElement>(null)\n\n\n    useEffect(() => {\n        draw(canvasRef.current, canvasContainerRef.current)\n    }, [])\n    const handlers = useSwipeable({\n        onSwiped: (eventData) => {\n            console.log(\"User Swiped!\", eventData);\n            if(eventData.dir ==='Left') keyboardObs.emit(Direction.left)\n            if(eventData.dir ==='Right') keyboardObs.emit(Direction.right)\n            if(eventData.dir ==='Up') keyboardObs.emit(Direction.up)\n            if(eventData.dir ==='Down') keyboardObs.emit(Direction.down)\n        }\n\n    });\n\n    return (\n        <div {...handlers} ref={canvasContainerRef} className=\"StolenIn60SecondsGame\">\n            <canvas ref={canvasRef}></canvas>\n            <BottomPanel/>\n        </div>\n    );\n}\n\nexport default StolenIn60SecondsGame;\n","import logo from './logo.svg';\nimport { BrowserRouter, Link, Redirect, Route, Router, Switch } from 'react-router-dom'\nimport ChessGame from './chess';\nimport Home from './Home';\nimport CheckersGame from './checkers';\nimport NavBar from './misc/Navbar';\nimport {useContext, useState} from \"react\";\nimport {StateContext, StateProvider} from \"./misc/StateProvider\";\nimport StolenIn60SecondsGame from \"./StolenIn60Seconds\";\n\nfunction App() {\n  const {showNav, setShowNav} = useContext(StateContext);\n\n  return (\n\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <NavBar/>\n      <Switch>\n        <Route path=\"/chess\" component={ChessGame} />\n        <Route path=\"/checkers\" component={CheckersGame} />\n        <Route path=\"/stolen-in-60-seconds\" component={StolenIn60SecondsGame} />\n        <Route path=\"/\" component={Home} />\n      </Switch>\n\n    </BrowserRouter>\n\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {StateProvider} from \"./misc/StateProvider\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <StateProvider>\n\n      <App />\n      </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}