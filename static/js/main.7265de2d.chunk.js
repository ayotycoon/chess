(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{24:function(e,t,i){},33:function(e,t,i){},34:function(e,t,i){},44:function(e,t,i){},46:function(e,t,i){"use strict";i.r(t);var n=i(1),o=i.n(n),s=i(25),a=i.n(s),r=(i(33),i(14)),c=i(8),d=i(5),l=i(2),h=i(7),u=i(13),v=i(4),p=i(3),x=function(){function e(t,i,n,o,s){Object(l.a)(this,e),this.id=void 0,this.name=void 0,this.icon=void 0,this.isPieceWhite=void 0,this.prevPositionYIndex=void 0,this.prevPositionXIndex=void 0,this.prevPosition=void 0,this.positionYIndex=void 0,this.positionXIndex=void 0,this.position=void 0,this.id=t.id,this.name=t.name,this.icon=t.icon,this.isPieceWhite=t.isPieceWhite,this.prevPositionYIndex=i,this.prevPositionXIndex=n,this.positionYIndex=o,this.positionXIndex=s,this.prevPosition="".concat(b.availableXMovements[this.prevPositionXIndex]).concat(b.availableYMovements[this.prevPositionYIndex]),this.position="".concat(b.availableXMovements[this.positionXIndex]).concat(b.availableYMovements[this.positionYIndex])}return Object(h.a)(e,[{key:"toJSON",value:function(){return[this.id,this.name,this.icon,this.isPieceWhite,this.prevPositionYIndex,this.prevPositionXIndex,this.positionYIndex,this.positionXIndex,this.prevPosition,this.position]}},{key:"toCSV",value:function(){return[this.name,this.isPieceWhite?"white":"black",this.prevPosition,this.position]}},{key:"fromJSON",value:function(e){this.id=e[0],this.name=e[1],this.icon=e[2],this.isPieceWhite=e[3],this.prevPositionYIndex=e[4],this.prevPositionXIndex=e[5],this.positionYIndex=e[6],this.positionXIndex=e[7],this.prevPosition=e[8],this.position=e[9]}}]),e}(),b=function(){function e(t,i,n,o,s){var a=this;Object(l.a)(this,e),this.name="piece",this.icon="chess",this.positionXIndex=0,this.positionYIndex=0,this.isPieceWhite=!0,this.successfulMovements=0,this.chessBoard=new y(!0),this.id=0,this.king=null,this.oppKing=null,this.anticipateOppMoves=function(){for(var e={},t=0;t<a.chessBoard.board.length;t++)for(var i=0;i<a.chessBoard.board[t].length;i++){var n=a.chessBoard.board[t][i];n&&n.isPieceWhite!==a.isPieceWhite&&n.availableMoves().forEach((function(t){e[t.positionYIndex+","+t.positionXIndex]=!0}))}return e},this.anticipateMyMoves=function(){for(var e={},t=0;t<a.chessBoard.board.length;t++)for(var i=0;i<a.chessBoard.board[t].length;i++){var n=a.chessBoard.board[t][i];n&&n.isPieceWhite===a.isPieceWhite&&n.availableMoves().forEach((function(t){e[t.positionYIndex+","+t.positionXIndex]=!0}))}return e},this.availableMoves=function(){return[]},void 0==s?(e.globalId++,this.id=e.globalId):this.id=s,this.chessBoard=t,this.isPieceWhite=o,this.positionYIndex=i,this.positionXIndex=n}return Object(h.a)(e,[{key:"move",value:function(e,t,i){var n,o,s,a,r=new x(this.chessBoard.pieceHash[this.id],this.positionYIndex,this.positionXIndex,e,t),c=this.availableMoves(),d=!1;if(c.forEach((function(i){i.positionYIndex===e&&i.positionXIndex===t&&(d=!0)})),!d)return!1;var l=this.chessBoard.board[this.positionYIndex][this.positionXIndex];this.chessBoard.board[this.positionYIndex][this.positionXIndex]=null;var h=this.positionYIndex,u=this.positionXIndex;return this.positionYIndex=e,this.positionXIndex=t,this.chessBoard.board[this.positionYIndex][this.positionXIndex]=l,this.anticipateOppMoves()[(null===(n=this.king)||void 0===n?void 0:n.positionYIndex)+","+(null===(o=this.king)||void 0===o?void 0:o.positionXIndex)]?(alert("king at risk"),this.chessBoard.board[this.positionYIndex][this.positionXIndex]=null,this.positionYIndex=h,this.positionXIndex=u,this.chessBoard.board[h][u]=l,!1):(this.anticipateMyMoves()[(null===(s=this.oppKing)||void 0===s?void 0:s.positionYIndex)+","+(null===(a=this.oppKing)||void 0===a?void 0:a.positionXIndex)]&&alert("check"),i&&i(),this.successfulMovements++,this.chessBoard.addToMovement(r),!0)}},{key:"toString",value:function(){return{id:this.id,name:this.name,type:this.isPieceWhite?"White":"Black",position:"".concat(e.availableXMovements[this.positionXIndex]).concat(e.availableYMovements[this.positionYIndex])}}},{key:"currentPosition",value:function(){return"Y = ".concat(this.positionYIndex,", X = ").concat(this.positionXIndex)}}]),e}();b.availableXMovements=["A","B","C","D","E","F","G","H"],b.availableYMovements=["8","7","6","5","4","3","2","1"],b.globalId=0;var f=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="queen",r.icon="fas fa-chess-queen",r.availableMoves=function(){for(var e=[],t=function(t,i){if(t<0||t>7||i<0||i>7)return!0;var n=r.chessBoard.board[t][i];if(n)return n.isPieceWhite===r.isPieceWhite||e.push({positionYIndex:t,positionXIndex:i}),!0;e.push({positionYIndex:t,positionXIndex:i})},i=r.positionYIndex+1;i<8;i++){if(t(i,r.positionXIndex))break}for(var n=r.positionYIndex-1;n>=0;n--){if(t(n,r.positionXIndex))break}for(var o=r.positionXIndex+1;o<8;o++){var s=o;if(t(r.positionYIndex,s))break}for(var a=r.positionXIndex-1;a>=0;a--){var c=a;if(t(r.positionYIndex,c))break}for(var d=1;d<8-r.positionYIndex;d++){if(t(r.positionYIndex+d,r.positionXIndex+d))break}for(var l=1;l<Math.max(r.positionYIndex,r.positionXIndex);l++){if(t(r.positionYIndex-l,r.positionXIndex-l))break}for(var h=1;h<8-r.positionYIndex;h++){if(t(r.positionYIndex+h,r.positionXIndex-h))break}for(var u=1;u<=r.positionYIndex;u++){if(t(r.positionYIndex-u,r.positionXIndex+u))break}return e.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),m=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="pawn",r.icon="fas fa-chess-pawn",r._parent=b.prototype,r.move=function(e,t){return r._parent.move.apply(Object(u.a)(r),[e,t,function(){if(r.isPieceWhite&&0===e||!r.isPieceWhite&&7===e){var t=new f(r.chessBoard,e,r.positionXIndex,r.isPieceWhite,r.id);t.king=r.king,t.oppKing=r.oppKing,r.chessBoard.board[r.positionYIndex][r.positionXIndex]=t}}])},r.availableMoves=function(){var e,t,i=[],n=r.isPieceWhite?-1:1,o=r.isPieceWhite?-2:2;return r.positionYIndex+n<b.availableXMovements.length&&r.positionYIndex+n>=0&&!r.chessBoard.board[r.positionYIndex+n][r.positionXIndex]&&(i.push({positionYIndex:r.positionYIndex+n,positionXIndex:r.positionXIndex}),0===r.successfulMovements&&r.positionYIndex+o<b.availableYMovements.length&&r.positionYIndex+o>=0&&!r.chessBoard.board[r.positionYIndex+o][r.positionXIndex]&&i.push({positionYIndex:r.positionYIndex+o,positionXIndex:r.positionXIndex})),r.positionYIndex+n<b.availableYMovements.length&&r.positionYIndex+n>=0&&r.chessBoard.board[r.positionYIndex+n][r.positionXIndex+1]&&(null===(e=r.chessBoard.board[r.positionYIndex+n][r.positionXIndex+1])||void 0===e?void 0:e.isPieceWhite)===!r.isPieceWhite&&i.push({positionYIndex:r.positionYIndex+n,positionXIndex:r.positionXIndex+1}),r.positionYIndex+n<b.availableYMovements.length&&r.positionYIndex+n>=0&&r.chessBoard.board[r.positionYIndex+n][r.positionXIndex-1]&&(null===(t=r.chessBoard.board[r.positionYIndex+n][r.positionXIndex-1])||void 0===t?void 0:t.isPieceWhite)===!r.isPieceWhite&&i.push({positionYIndex:r.positionYIndex+n,positionXIndex:r.positionXIndex-1}),i.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),j=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="bishop",r.icon="fas fa-chess-bishop",r.availableMoves=function(){for(var e=[],t=function(t,i){if(t<0||t>7||i<0||i>7)return!0;var n=r.chessBoard.board[t][i];if(n)return n.isPieceWhite===r.isPieceWhite||e.push({positionYIndex:t,positionXIndex:i}),!0;e.push({positionYIndex:t,positionXIndex:i})},i=1;i<8-r.positionYIndex;i++){if(t(r.positionYIndex+i,r.positionXIndex+i))break}for(var n=1;n<Math.max(r.positionYIndex,r.positionXIndex);n++){if(t(r.positionYIndex-n,r.positionXIndex-n))break}for(var o=1;o<8-r.positionYIndex;o++){if(t(r.positionYIndex+o,r.positionXIndex-o))break}for(var s=1;s<=Math.max(r.positionYIndex,r.positionXIndex);s++){if(t(r.positionYIndex-s,r.positionXIndex+s))break}return e.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),g=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="rook",r.icon="fas fa-chess-rook",r.availableMoves=function(){for(var e=[],t=function(t,i){if(t<0||t>7||i<0||i>7)return!0;var n=r.chessBoard.board[t][i];if(n)return n.isPieceWhite===r.isPieceWhite||e.push({positionYIndex:t,positionXIndex:i}),!0;e.push({positionYIndex:t,positionXIndex:i})},i=r.positionYIndex+1;i<8;i++){if(t(i,r.positionXIndex))break}for(var n=r.positionYIndex-1;n>=0;n--){if(t(n,r.positionXIndex))break}for(var o=r.positionXIndex+1;o<8;o++){var s=o;if(t(r.positionYIndex,s))break}for(var a=r.positionXIndex-1;a>=0;a--){var c=a;if(t(r.positionYIndex,c))break}return e.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),I=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="king",r.icon="fas fa-chess-king",r.availableMoves=function(){for(var e=[],t=function(t,i){if(t<0||t>7||i<0||i>7)return!0;var n=r.chessBoard.board[t][i];if(n)return n.isPieceWhite===r.isPieceWhite||e.push({positionYIndex:t,positionXIndex:i}),!0;e.push({positionYIndex:t,positionXIndex:i})},i=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,-1],[-1,1],[1,-1]],n=0;n<i.length;n++){var o=i[n];t(r.positionYIndex+o[0],r.positionXIndex+o[1])}return e.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),O=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="knight",r.icon="fas fa-chess-knight",r.availableMoves=function(){for(var e=[],t=function(t,i){if(t<0||t>7||i<0||i>7)return!0;var n=r.chessBoard.board[t][i];if(n){if(n.isPieceWhite!==r.isPieceWhite)return e.push({positionYIndex:t,positionXIndex:i}),!0}else e.push({positionYIndex:t,positionXIndex:i})},i=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],n=0;n<i.length;n++){var o=i[n];t(r.positionYIndex+o[0],r.positionXIndex+o[1])}return e.map((function(e){return{positionYIndex:e.positionYIndex,positionY:b.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:b.availableXMovements[e.positionYIndex]}}))},r}return i}(b),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(l.a)(this,e),this.board=[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]],this.isWhiteTurnToPlay=!1,this.pieceHash={},this.killedHash={},this.movements=[],this.movementIndex=0,this.initiated=!1,this.initiated||t||(this.init(),this.initiated=!0)}return Object(h.a)(e,[{key:"init",value:function(){var e=new I(this,0,3,!1);this.board[0][3]=e,this.board[0][0]=new g(this,0,0,!1),this.board[0][7]=new g(this,0,7,!1),this.board[0][1]=new O(this,0,1,!1),this.board[0][6]=new O(this,0,6,!1),this.board[0][4]=new f(this,0,4,!1),this.board[0][2]=new j(this,0,2,!1),this.board[0][5]=new j(this,0,5,!1),this.board[1][0]=new m(this,1,0,!1),this.board[1][1]=new m(this,1,1,!1),this.board[1][2]=new m(this,1,2,!1),this.board[1][3]=new m(this,1,3,!1),this.board[1][4]=new m(this,1,4,!1),this.board[1][5]=new m(this,1,5,!1),this.board[1][6]=new m(this,1,6,!1),this.board[1][7]=new m(this,1,7,!1);var t=new I(this,7,3,!0);this.board[7][3]=t,this.board[7][0]=new g(this,7,0,!0),this.board[7][7]=new g(this,7,7,!0),this.board[7][1]=new O(this,7,1,!0),this.board[7][6]=new O(this,7,6,!0),this.board[7][4]=new f(this,7,4,!0),this.board[7][2]=new j(this,7,2,!0),this.board[7][5]=new j(this,7,5,!0),this.board[6][0]=new m(this,6,0,!0),this.board[6][1]=new m(this,6,1,!0),this.board[6][2]=new m(this,6,2,!0),this.board[6][3]=new m(this,6,3,!0),this.board[6][4]=new m(this,6,4,!0),this.board[6][5]=new m(this,6,5,!0),this.board[6][6]=new m(this,6,6,!0),this.board[6][7]=new m(this,6,7,!0);for(var i=0;i<this.board.length;i++)for(var n=0;n<this.board[i].length;n++){var o=this.board[i][n];o&&(this.pieceHash[o.id]=o,o.isPieceWhite?(o.king=t,o.oppKing=e):(o.oppKing=t,o.king=e))}}},{key:"toString",value:function(){return JSON.stringify(this.board.map((function(e){return e.map((function(e){return e?"".concat(e.id,"-").concat(e.name):"null"}))})))}},{key:"canUndo",value:function(){return this.movementIndex<this.movements.length}},{key:"canRedo",value:function(){return this.movementIndex-1>=0}},{key:"performUndo",value:function(){var e=this.movements[this.movementIndex],t=this.board[e.positionYIndex][e.positionXIndex];t&&(t.positionYIndex=e.prevPositionYIndex,t.positionXIndex=e.prevPositionXIndex,this.board[e.prevPositionYIndex][e.prevPositionXIndex]=t,this.board[e.positionYIndex][e.positionXIndex]=this.killedHash[e.positionYIndex+","+e.positionXIndex],this.movementIndex++)}},{key:"performRedo",value:function(){this.movementIndex--;var e=this.movements[this.movementIndex],t=this.board[e.prevPositionYIndex][e.prevPositionXIndex];t&&(t.positionYIndex=e.positionYIndex,t.positionXIndex=e.positionXIndex,this.board[e.positionYIndex][e.positionXIndex]=t,this.board[e.prevPositionYIndex][e.prevPositionXIndex]=null)}},{key:"addToMovement",value:function(e){var t=this.getMovements();t.unshift(e),this.movements=t,this.movementIndex=0}},{key:"getMovements",value:function(){return this.movements.slice(this.movementIndex)}}]),e}(),P=(i(34),i(0));var Y=function(e){var t=e.pieceWidth,i=e.horizontal,n=i?b.availableXMovements:b.availableYMovements;return Object(P.jsx)("div",{className:i?"Bar-X":"",children:n.map((function(e,n){return Object(P.jsx)("div",{className:i?"Bar-X":"Board-X",style:{width:t+"px",height:t+"px"},children:e},n)}))})},k=!Object({NODE_ENV:"production",PUBLIC_URL:"/games",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).production,w=function(e){var t="data:text/csv;charset=utf-8,";e.forEach((function(e){var i=e.toCSV().join(",");t+=i+"\r\n"}));var i=encodeURI(t),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download","my_data.csv"),document.body.appendChild(n),n.click()},X=[{to:"/chess",name:"Chess",img:"/games/assets/chess-banner.png"},{to:"/checkers",name:"Checkers",img:"/games/assets/checkers-banner.png"},{to:"/stolen-in-60-seconds",name:"Stolen in 60 seconds",img:"/games/assets/ss60-banner.png"}];function W(){return Math.min(window.innerHeight,window.innerWidth)-(150+(window.innerWidth>700?100:0))}var S=Object(n.createContext)({}),A={content:{}},M=function(){return A.content},B=function(e){var t=e.children,i=Object(n.useState)(!0),o=Object(d.a)(i,2),s=o[0],a=o[1],r=Object(n.useState)(!1),c=Object(d.a)(r,2),l=c[0],h=c[1],u=Object(n.useState)({time:0}),v=Object(d.a)(u,2),p=v[0],x=v[1],b={showNav:s,setShowNav:a,optionsClicked:l,setOptionsClicked:h,stageProps:p,setStageProps:function(e){return A.content=e,x(e)}};return Object(P.jsx)(S.Provider,{value:b,children:t})};var T=function(){var e=Object(n.useState)({boardWidth:W(),pieceWidth:W()/8}),t=Object(d.a)(e,2),i=t[0],o=t[1],s=Object(n.useState)([]),a=Object(d.a)(s,2),r=a[0],c=a[1],l=Object(n.useState)([]),h=Object(d.a)(l,2),u=h[0],v=h[1],p=Object(n.useState)({}),x=Object(d.a)(p,2),b=x[0],f=x[1],m=Object(n.useState)(null),j=Object(d.a)(m,2),g=j[0],I=j[1],O=Object(n.useRef)(null),X=Object(n.useState)(!0),A=Object(d.a)(X,2),M=A[0],B=A[1],T=Object(n.useState)({canUndo:!1,canRedo:!1}),C=Object(d.a)(T,2),N=C[0],H=N.canUndo,E=N.canRedo,R=C[1],z=Object(n.useContext)(S),G=(z.showNav,z.setShowNav);function L(){O.current.isWhiteTurnToPlay=!O.current.isWhiteTurnToPlay,c(O.current.board),v(O.current.getMovements()),f({}),I(null),B(O.current.isWhiteTurnToPlay),R({canRedo:O.current.canRedo(),canUndo:O.current.canUndo()})}function U(e,t,i){if(b[t+","+i]){if(!(null===g||void 0===g?void 0:g.move(t,i)))return;L()}else if(e){if(s=e.toString(),k&&console.warn(s),M!==e.isPieceWhite)return f({}),void I(null);var n=e.availableMoves(),o={};n.forEach((function(e){o[e.positionYIndex+","+e.positionXIndex]=!0})),f(o),I(e)}else f({}),I(null);var s}return Object(n.useEffect)((function(){G(!1),O.current=new y,L();var e=function(){var e=W();o({boardWidth:e,pieceWidth:e/8})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(P.jsx)("div",{className:"Whole-Body",children:Object(P.jsxs)("div",{className:"Chess-Field",children:[Object(P.jsxs)("div",{className:"Chess-Pre-Playable",children:[Object(P.jsx)(Y,{pieceWidth:i.pieceWidth,horizontal:!0}),Object(P.jsxs)("div",{className:"Chess-Playable",children:[Object(P.jsx)(Y,{pieceWidth:i.pieceWidth,horizontal:!1}),Object(P.jsx)("div",{className:"Board",style:{width:i.boardWidth+"px",height:i.boardWidth+"px"},children:r.map((function(e,t){return Object(P.jsx)("div",{className:"Board-Y",style:{display:"flex"},children:e.map((function(e,n){var o=b[t+","+n];return Object(P.jsx)("div",{onClick:function(){return U(e,t,n)},className:"Board-X",style:{width:i.pieceWidth+"px",height:i.pieceWidth+"px",backgroundColor:n%2===0===(t%2===0)?"rgba(245, 222, 179, 0.596)":""},children:Object(P.jsx)("div",{className:e?M!==e.isPieceWhite?"Piece-inner-invalid":"Piece-inner-valid":"",style:{width:"70%",height:"70%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:o||e&&e===g?"rgba(255, 255, 0, 0.5)":""},children:e?Object(P.jsx)("i",{className:e.icon,style:{color:e.isPieceWhite?"white":"black"}}):""})},n)}))},t)}))}),Object(P.jsx)(Y,{pieceWidth:i.pieceWidth,horizontal:!1})]}),Object(P.jsx)(Y,{pieceWidth:i.pieceWidth,horizontal:!0}),Object(P.jsxs)("div",{className:"text-center",children:[H&&Object(P.jsxs)("button",{onClick:function(){O.current.performUndo(),L()},className:"m-2",children:["  ",Object(P.jsx)("i",{className:"fa fa-undo"})]}),E&&Object(P.jsxs)("button",{onClick:function(){O.current.performRedo(),L()},className:"m-2",children:["  ",Object(P.jsx)("i",{className:"fa fa-redo"})]})]})]}),Object(P.jsxs)("div",{className:"Side",style:{padding:"10px"},children:[Object(P.jsxs)("div",{className:"",style:{padding:"0 30px"},children:["Piece To Play",Object(P.jsx)("br",{}),Object(P.jsx)("i",{className:"fa fa-chess ",style:{color:M?"white":"black"}}),Object(P.jsx)("hr",{}),Object(P.jsxs)("div",{style:{textAlign:"center"},children:[0!=u.length&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("button",{onClick:function(){w(u)},children:Object(P.jsx)("i",{className:"fa fa-file-download"})}),Object(P.jsx)("br",{})]}),u.map((function(e,t){return Object(P.jsxs)("div",{style:{fontSize:"13px",marginBottom:"5px",display:"flex",justifyContent:"center"},children:[Object(P.jsx)("div",{style:{marginRight:"5px"},children:Object(P.jsx)("i",{className:e.icon,style:{color:e.isPieceWhite?"white":"black"}})}),Object(P.jsxs)("div",{children:[e.prevPosition," ",Object(P.jsx)("i",{className:"fa fa-arrow-right"})," ",e.position]})]},t)}))]})]})," "]})]})})};var C=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),i=t[0],o=t[1];return Object(n.useEffect)((function(){var e=document.querySelector("#bound"),t=null===e||void 0===e?void 0:e.getBoundingClientRect();o((null===t||void 0===t?void 0:t.width)||0)}),[]),Object(P.jsx)("div",{className:"container",children:Object(P.jsx)("div",{className:"row",children:X.map((function(e,t){return Object(P.jsx)("div",{id:"bound",className:"col-6 col-md-4 col-lg-3 mb-2",children:Object(P.jsxs)(r.b,{className:"d-block border rounded  text-center bound-inner",to:e.to,style:{height:i-24+"px",verticalAlign:"bottom",background:"url('".concat(e.img,"')"),backgroundSize:"cover"},children:[Object(P.jsx)("div",{style:{visibility:"hidden"},children:e.name}),Object(P.jsx)("div",{className:"bound-content p-1 bg-primary rounded text-white",children:e.name})]},t)})}))})})},N=i(11),H=function(){function e(t,i,n,o,s,a,r,c){var d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];Object(l.a)(this,e),this.id=void 0,this.name=void 0,this.icon=void 0,this.isPieceWhite=void 0,this.prevPositionYIndex=void 0,this.prevPositionXIndex=void 0,this.prevPosition=void 0,this.positionYIndex=void 0,this.positionXIndex=void 0,this.position=void 0,this.jumpPosition=void 0,this.id=t,this.name=i,this.icon=n,this.isPieceWhite=o,this.prevPositionYIndex=s,this.prevPositionXIndex=a,this.positionYIndex=r,this.positionXIndex=c,this.prevPosition="".concat(E.availableXMovements[this.prevPositionXIndex]).concat(E.availableYMovements[this.prevPositionYIndex]),this.position="".concat(E.availableXMovements[this.positionXIndex]).concat(E.availableYMovements[this.positionYIndex]),this.jumpPosition=d}return Object(h.a)(e,[{key:"toJSON",value:function(){return[this.id,this.name,this.icon,this.isPieceWhite,this.prevPositionYIndex,this.prevPositionXIndex,this.positionYIndex,this.positionXIndex,this.prevPosition,this.position,this.jumpPosition]}},{key:"toCSV",value:function(){return[this.name,this.isPieceWhite?"white":"black",this.prevPosition,this.position]}},{key:"fromJSON",value:function(e){this.id=e[0],this.name=e[1],this.icon=e[2],this.isPieceWhite=e[3],this.prevPositionYIndex=e[4],this.prevPositionXIndex=e[5],this.positionYIndex=e[6],this.positionXIndex=e[7],this.prevPosition=e[8],this.position=e[9],this.jumpPosition=e[10]}},{key:"serialize",value:function(){return[this.id,this.name,this.icon,this.isPieceWhite,this.prevPositionYIndex,this.prevPositionXIndex,this.positionYIndex,this.positionXIndex,this.jumpPosition]}}]),e}(),E=function(){function e(t,i,n,o,s){var a=this;Object(l.a)(this,e),this.name="piece",this.icon="chess",this.positionXIndex=0,this.positionYIndex=0,this.isPieceWhite=!0,this.successfulMovements=0,this.chessBoard=new L(!0),this.id=0,this.anticipateOppMoves=function(){for(var e={},t=0;t<a.chessBoard.board.length;t++)for(var i=0;i<a.chessBoard.board[t].length;i++){var n=a.chessBoard.board[t][i];n&&n.isPieceWhite!==a.isPieceWhite&&n.availableMoves().forEach((function(t){e[t.positionYIndex+","+t.positionXIndex]=!0}))}return e},this.anticipateMyMoves=function(){for(var e={},t=0;t<a.chessBoard.board.length;t++)for(var i=0;i<a.chessBoard.board[t].length;i++){var n=a.chessBoard.board[t][i];n&&n.isPieceWhite===a.isPieceWhite&&n.availableMoves().forEach((function(t){e[t.positionYIndex+","+t.positionXIndex]=!0}))}return e},this.availableMoves=function(){return[]},this.clone=function(){return null},this.serialize=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[a.id,a.name,a.icon,a.positionYIndex,a.positionXIndex,a.isPieceWhite,a.successfulMovements];return e?JSON.stringify(t):t},void 0==s?(e.globalId++,this.id=e.globalId):this.id=s,this.chessBoard=t,this.isPieceWhite=o,this.positionYIndex=i,this.positionXIndex=n}return Object(h.a)(e,[{key:"move",value:function(e,t,i){var n=this.availableMoves(),o=!1,s=void 0;n.forEach((function(i){i.positionYIndex===e&&i.positionXIndex===t&&(o=!0,s=i.jumpPosition)}));var a=this.chessBoard.pieceHash[this.id],r=new H(a.id,a.name,a.icon,a.isPieceWhite,this.positionYIndex,this.positionXIndex,e,t,s);if(!o)return!1;var c=this.chessBoard.board[this.positionYIndex][this.positionXIndex];this.chessBoard.board[this.positionYIndex][this.positionXIndex]=null;this.positionYIndex,this.positionXIndex;return this.positionYIndex=e,this.positionXIndex=t,this.chessBoard.board[this.positionYIndex][this.positionXIndex]=c,i&&i(),this.successfulMovements++,this.chessBoard.addToMovement(r),!0}},{key:"toString",value:function(){return{id:this.id,name:this.name,type:this.isPieceWhite?"White":"Black",position:"".concat(e.availableXMovements[this.positionXIndex]).concat(e.availableYMovements[this.positionYIndex])}}},{key:"currentPosition",value:function(){return"Y = ".concat(this.positionYIndex,", X = ").concat(this.positionXIndex)}}]),e}();E.availableXMovements=["A","B","C","D","E","F","G","H"],E.availableYMovements=["8","7","6","5","4","3","2","1"],E.globalId=0;var R=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="queen",r.icon="fas fa-chess-queen",r.availableMoves=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.positionYIndex,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.positionXIndex,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];1==t&&console.log({positionYIndex:i,positionXIndex:n});for(var s=function(e){return e>=0&&e<=7},a=function(i,n){i.id=t;var o=i.positionYIndex+","+i.positionXIndex,s=e[o];s&&t!==s.id||o==r.positionYIndex+","+r.positionXIndex||(s?(!s.jumpPosition||(i.jumpPosition||[]).length>s.jumpPosition.length)&&(e[o]=i):e[o]=i,n||r.availableMoves(e,t+1,i.positionYIndex,i.positionXIndex,i.jumpPosition||[]))},c=function(e,i,n,o){var c,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!s(e)||!s(i))return!0;var l=r.chessBoard.board[e][i];if(l){if(l.isPieceWhite===r.isPieceWhite)return!0;if(l.isPieceWhite!==r.isPieceWhite&&s(e+n)&&s(i+o)&&null!=r.chessBoard.board[e+n][i+o]&&(null===(c=r.chessBoard.board[e+n][i+o])||void 0===c?void 0:c.isPieceWhite)!=r.isPieceWhite)return!0;l.isPieceWhite!==r.isPieceWhite&&s(e+n)&&s(i+o)&&null==r.chessBoard.board[e+n][i+o]&&(d.push([e,i]),a({positionYIndex:e+n,positionXIndex:i+o,jumpPosition:Object(N.a)(d)}))}else{if(0!=t)return!0;a({positionYIndex:e,positionXIndex:i},!0)}return!1},d=Object(N.a)(o),l=1;l<8-i;l++){var h=i+l,u=n+l;if(c(h,u,1,1,d))break}for(var v=Object(N.a)(o),p=1;p<Math.max(i,n);p++){var x=i-p,b=n-p;if(c(x,b,-1,-1,v))break}for(var f=Object(N.a)(o),m=1;m<8-i;m++){var j=i+m,g=n-m;if(c(j,g,1,-1,f))break}for(var I=Object(N.a)(o),O=1;O<=i;O++){var y=i-O,P=n+O;if(c(y,P,-1,1,I))break}return Object.values(e).map((function(e){return{positionYIndex:e.positionYIndex,positionY:E.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:E.availableXMovements[e.positionYIndex],jumpPosition:e.jumpPosition}}))},r.clone=function(){return new i(r.chessBoard,r.positionYIndex,r.positionXIndex,r.isPieceWhite,r.id)},r}return i}(E),z=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e,n,o,s,a){var r;return Object(l.a)(this,i),(r=t.call(this,e,n,o,s,a)).name="pawn",r.icon="fas fa-circle",r._parent=E.prototype,r.move=function(e,t){return r._parent.move.apply(Object(u.a)(r),[e,t,function(){if(r.isPieceWhite&&0===e||!r.isPieceWhite&&7===e){var t=new R(r.chessBoard,e,r.positionXIndex,r.isPieceWhite,r.id);r.chessBoard.board[r.positionYIndex][r.positionXIndex]=t}}])},r.availableMoves=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.positionYIndex,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.positionXIndex,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=[[1,1],[-1,-1],[1,-1],[-1,1]],a=function(e){return e>=0&&e<=7},c=function(i,n){i.id=t;var o=i.positionYIndex+","+i.positionXIndex,s=e[o];s&&t!==s.id||o==r.positionYIndex+","+r.positionXIndex||(s?(!s.jumpPosition||(i.jumpPosition||[]).length>s.jumpPosition.length)&&(e[o]=i):e[o]=i,n||r.availableMoves(e,t+1,i.positionYIndex,i.positionXIndex,i.jumpPosition||[]))},d=function(e,n,o,s){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!a(e)||!a(n))return!0;var l=r.chessBoard.board[e][n];if(l)l.isPieceWhite===r.isPieceWhite||l.isPieceWhite!==r.isPieceWhite&&a(e+o)&&a(n+s)&&null==r.chessBoard.board[e+o][n+s]&&(d.push([e,n]),c({positionYIndex:e+o,positionXIndex:n+s,jumpPosition:d}));else{if(0!=t||r.isPieceWhite&&i<e||!r.isPieceWhite&&i>e)return!0;c({positionYIndex:e,positionXIndex:n},!0)}return!1},l=Object(N.a)(o);return s.forEach((function(e){var t=i+e[0],o=n+e[1];d(t,o,e[0],e[1],l)})),Object.values(e).map((function(e){return{positionYIndex:e.positionYIndex,positionY:E.availableYMovements[e.positionYIndex],positionXIndex:e.positionXIndex,positionX:E.availableXMovements[e.positionYIndex],jumpPosition:e.jumpPosition}}))},r.clone=function(){return new i(r.chessBoard,r.positionYIndex,r.positionXIndex,r.isPieceWhite,r.id)},r}return i}(E),G=function(e,t){var i=Object(d.a)(e,7),n=i[0],o=i[1],s=i[2],a=i[3],r=i[4],c=i[5],l=i[6],h=null;switch(o){case"queen":h=new R(t,a,r,c,n);break;case"pawn":h=new z(t,a,r,c,n);break;default:return null}return h.successfulMovements=l,h.icon=s,h},L=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(l.a)(this,e),this.board=e.newBoard(),this.isWhiteTurnToPlay=!1,this.pieceHash={},this.killedHash={},this.movements=[],this.movementIndex=0,this.initiated=!1,this.clone=function(){var i=new e(!0);i.isWhiteTurnToPlay=t.isWhiteTurnToPlay,i.pieceHash=t.pieceHash,i.movements=t.movements;for(var n=0;n<t.board.length;n++)for(var o=0;o<t.board[n].length;o++){var s=t.board[n][o];s&&(i.board[n][o]=s.clone())}return i},this.serialize=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=t.board.map((function(e){return e.map((function(e){return null==e?null:e.serialize()}))})),n=t.movements.map((function(e){return e.serialize()})),o=t.movementIndex,s=t.isWhiteTurnToPlay,a=Object.values(t.killedHash).map((function(e){return e?e.serialize():null})),r=[i,n,o,s,a];return e?JSON.stringify(r):r},this.initiated||i||(this.init(),this.initiated=!0)}return Object(h.a)(e,[{key:"init",value:function(){this.board[0][0]=new z(this,0,0,!1),this.board[0][2]=new z(this,0,2,!1),this.board[0][4]=new z(this,0,4,!1),this.board[0][6]=new z(this,0,6,!1),this.board[1][1]=new z(this,1,1,!1),this.board[1][3]=new z(this,1,3,!1),this.board[1][5]=new z(this,1,5,!1),this.board[1][7]=new z(this,1,7,!1),this.board[2][0]=new z(this,2,0,!1),this.board[2][2]=new z(this,2,2,!1),this.board[2][4]=new z(this,2,4,!1),this.board[2][6]=new z(this,2,6,!1),this.board[5][1]=new z(this,5,1,!0),this.board[5][3]=new z(this,5,3,!0),this.board[5][5]=new z(this,5,5,!0),this.board[5][7]=new z(this,5,7,!0),this.board[6][0]=new z(this,6,0,!0),this.board[6][2]=new z(this,6,2,!0),this.board[6][4]=new z(this,6,4,!0),this.board[6][6]=new z(this,6,6,!0),this.board[7][1]=new z(this,7,1,!0),this.board[7][3]=new z(this,7,3,!0),this.board[7][5]=new z(this,7,5,!0),this.board[7][7]=new z(this,7,7,!0);for(var e=0;e<this.board.length;e++)for(var t=0;t<this.board[e].length;t++){var i=this.board[e][t];i&&(this.pieceHash[i.id]=i)}}},{key:"toString",value:function(){return JSON.stringify(this.board.map((function(e){return e.map((function(e){return e?"".concat(e.id,"-").concat(e.name):"null"}))})))}},{key:"canUndo",value:function(){return this.movementIndex<this.movements.length}},{key:"canRedo",value:function(){return this.movementIndex-1>=0}},{key:"performUndo",value:function(){var e=this,t=this.movements[this.movementIndex],i=this.board[t.positionYIndex][t.positionXIndex];i&&(i.positionYIndex=t.prevPositionYIndex,i.positionXIndex=t.prevPositionXIndex,this.board[t.positionYIndex][t.positionXIndex]=null,this.board[t.prevPositionYIndex][t.prevPositionXIndex]=i,t.jumpPosition.forEach((function(t){e.board[t[0]][t[1]]=e.killedHash[t[0]+","+t[1]]})),this.movementIndex++)}},{key:"performRedo",value:function(){var e=this;this.movementIndex--;var t=this.movements[this.movementIndex],i=this.board[t.prevPositionYIndex][t.prevPositionXIndex];i&&(this.board[t.prevPositionYIndex][t.prevPositionXIndex]=null,i.positionYIndex=t.positionYIndex,i.positionXIndex=t.positionXIndex,this.board[t.positionYIndex][t.positionXIndex]=i,t.jumpPosition.forEach((function(t){e.board[t[0]][t[1]]=null})))}},{key:"addToMovement",value:function(e){var t=this.getMovements();t.unshift(e),this.movements=t,this.movementIndex=0}},{key:"getMovements",value:function(){return this.movements.slice(this.movementIndex)}}],[{key:"newBoard",value:function(){return[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]]}}]),e}();L.deSerialize=function(e){var t=new L(!0),i=JSON.parse(e),n=Object(d.a)(i,5),o=n[0],s=n[1],a=n[2],r=n[3],c=n[4],l=o.map((function(e){return e.map((function(e){if(null==e)return null;var i=G(e,t);return null==i?null:(t.pieceHash[i.id]=i,i)}))})),h=s.map((function(e){return new H(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])})),u=a,v=r,p={};return c.forEach((function(e){if(null!=e){var i=G(e,t);if(null==i)return;p[(null===i||void 0===i?void 0:i.positionYIndex)+","+(null===i||void 0===i?void 0:i.positionXIndex)]=i}})),t.board=l,t.movements=h,t.movementIndex=u,t.isWhiteTurnToPlay=v,t.killedHash=p,t};i(44);var U=function(){var e=Object(n.useState)({boardWidth:W(),pieceWidth:W()/8}),t=Object(d.a)(e,2),i=t[0],o=t[1],s=Object(n.useState)([]),a=Object(d.a)(s,2),r=a[0],c=a[1],l=Object(n.useState)([]),h=Object(d.a)(l,2),u=h[0],v=h[1],p=Object(n.useState)({}),x=Object(d.a)(p,2),b=x[0],f=x[1],m=Object(n.useState)(null),j=Object(d.a)(m,2),g=j[0],I=j[1],O=Object(n.useRef)(null),y=Object(n.useState)(!0),Y=Object(d.a)(y,2),k=Y[0],X=Y[1],S=Object(n.useState)({canUndo:!1,canRedo:!1}),A=Object(d.a)(S,2),M=A[0],B=M.canUndo,T=M.canRedo,C=A[1];function N(){O.current.isWhiteTurnToPlay=!O.current.isWhiteTurnToPlay,c(O.current.board),v(O.current.getMovements()),f({}),I(null),X(O.current.isWhiteTurnToPlay),C({canRedo:O.current.canRedo(),canUndo:O.current.canUndo()})}return Object(n.useEffect)((function(){O.current=new L,N();var e=function(){var e=W();o({boardWidth:e,pieceWidth:e/8})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(P.jsx)("div",{className:"Whole-Body",children:Object(P.jsxs)("div",{className:"Chess-Field",children:[Object(P.jsxs)("div",{className:"Chess-Pre-Playable",children:[Object(P.jsx)("div",{className:"Chess-Playable",children:Object(P.jsx)("div",{className:"Board",style:{width:i.boardWidth+"px",height:i.boardWidth+"px"},children:r.map((function(e,t){return Object(P.jsx)("div",{className:"Board-Y",style:{display:"flex"},children:e.map((function(e,n){var o=b[t+","+n];return Object(P.jsx)("div",{onClick:function(){return function(e,t,i){if(b[t+","+i]){if(!(null===g||void 0===g?void 0:g.move(t,i)))return;b[t+","+i].forEach((function(e){var t=Object(d.a)(e,2),i=t[0],n=t[1];O.current.killedHash[i+","+n]=O.current.board[i][n],O.current.board[i][n]=null})),N()}else if(e){if(k!==e.isPieceWhite)return f({}),void I(null);var n=e.availableMoves(),o={};n.forEach((function(e){var t=void 0==e.jumpPosition?[]:e.jumpPosition;o[e.positionYIndex+","+e.positionXIndex]=t})),f(o),I(e)}else f({}),I(null)}(e,t,n)},className:"Board-X",style:{width:i.pieceWidth+"px",height:i.pieceWidth+"px",backgroundColor:n%2===0===(t%2===0)?"rgba(245, 222, 179, 0.596)":""},children:Object(P.jsx)("div",{className:e?k!==e.isPieceWhite?"Piece-inner-invalid":"Piece-inner-valid":"",style:{width:"70%",height:"70%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:o||e&&e===g?"rgba(255, 255, 0, 0.5)":""},children:e?Object(P.jsx)("i",{className:e.icon,style:{color:e.isPieceWhite?"white":"black"}}):""})},n)}))},t)}))})}),Object(P.jsxs)("div",{className:"text-center",children:[B&&Object(P.jsxs)("button",{onClick:function(){O.current.performUndo(),N()},className:"m-2",children:["  ",Object(P.jsx)("i",{className:"fa fa-undo"})]}),T&&Object(P.jsxs)("button",{onClick:function(){O.current.performRedo(),N()},className:"m-2",children:["  ",Object(P.jsx)("i",{className:"fa fa-redo"})]})]})]}),Object(P.jsxs)("div",{className:"Side",style:{padding:"10px"},children:[Object(P.jsxs)("div",{className:"",style:{padding:"0 30px"},children:["Piece To Play",Object(P.jsx)("br",{}),Object(P.jsx)("i",{className:"fa fa-circle ",style:{color:k?"white":"black"}}),Object(P.jsx)("hr",{}),Object(P.jsxs)("div",{style:{textAlign:"center"},children:[Object(P.jsx)("button",{onClick:function(){var e=O.current.serialize(!0);localStorage.setItem("checkers",e)},children:Object(P.jsx)("i",{className:"fa fa-save"})}),Object(P.jsx)("button",{onClick:function(){var e=localStorage.getItem("checkers");if(e){var t=L.deSerialize(e);t.isWhiteTurnToPlay=!t.isWhiteTurnToPlay,O.current=t,N()}},children:Object(P.jsx)("i",{className:"fa fa-upload"})}),0!=u.length&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("button",{onClick:function(){w(u)},children:Object(P.jsx)("i",{className:"fa fa-file-download"})}),Object(P.jsx)("br",{})]}),u.map((function(e,t){return Object(P.jsxs)("div",{style:{fontSize:"13px",marginBottom:"5px",display:"flex",justifyContent:"center"},children:[Object(P.jsx)("div",{style:{marginRight:"5px"},children:Object(P.jsx)("i",{className:e.icon,style:{color:e.isPieceWhite?"white":"black"}})}),Object(P.jsxs)("div",{children:[e.prevPosition," ",Object(P.jsx)("i",{className:"fa fa-arrow-right"})," ",e.position]})]},t)}))]})]})," "]})]})})};var V,_=function(){var e=Object(c.f)(),t=Object(n.useContext)(S),i=t.optionsClicked,o=t.setOptionsClicked;return Object(P.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(P.jsxs)("span",{children:["/"!=e.location.pathname&&Object(P.jsx)("span",{onClick:function(){return e.goBack()},style:{width:"50px",cursor:"pointer"},className:"text-center d-inline-block",children:Object(P.jsx)("i",{className:"fa fa-arrow-left",children:" "})}),Object(P.jsxs)(r.b,{className:"navbar-brand",to:"/",children:[Object(P.jsx)("div",{style:{width:"50px"},className:"d-inline-block text-center",children:Object(P.jsx)("img",{src:"favicon.png",width:"25",height:"25",className:"align-top",alt:""})}),Object(P.jsx)("span",{className:" d-inline-block",children:"Games"})]}),Object(P.jsx)("form",{style:{float:"right"},children:Object(P.jsx)("span",{onClick:function(){return o(!i)},style:{width:"50px",cursor:"pointer"},className:"text-center d-inline-block form-inline",children:Object(P.jsx)("i",{className:"fa fa-cog",children:" "})})})]})})},F=i(6),K=(i(24),i(17)),J=i.n(K),D=i(18),q=i(23);!function(e){e[e.up=0]="up",e[e.down=1]="down",e[e.right=2]="right",e[e.left=3]="left",e[e.undo=4]="undo"}(V||(V={}));var Q=function e(){var t=this;Object(l.a)(this,e),this.fns=new Set,this.emit=function(e){t.fns.forEach((function(t){t(e)}))},this.subscribe=function(e){return t.fns.add(e),{unsubscribe:function(){t.fns.delete(e)}}}};function Z(e,t){return{x:20*e,y:20*t}}function $(e,t){return{x:e/20,y:t/20}}var ee=new Q,te=new Q,ie=function(e,t,i){return{val:e,next:t,prev:i}},ne=function(){var e=ie(0),t=e.next;return{head:function(){return e.next},tail:function(){return t},setCurr:function(e){return t=e},curr:t,values:function(){for(var t=[],i=e.next;void 0!=i;)t.push(i.val),i=i.next;return t},add:function(i){if(!t)return e.next=i,void(t=e.next);t.next=i,i.prev=t,t=t.next}}};var oe=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;Object(l.a)(this,e),this.ctx=void 0,this.state={position:{x:0,y:0},grid:{x:0,y:0},dimensions:{xAxis:20,yAxis:120},color:"black",noOfLines:10},this.draw={all:function(){}},this.getState=function(){return i.state},this.debug={cordinates:function(){i.getBoundaries().forEach((function(e){e.forEach((function(e){i.ctx.fillText("".concat(e[0],",").concat(e[1]),e[0],e[1])}))}))},highlight:function(){i.ctx.beginPath(),i.ctx.strokeStyle="red",i.ctx.strokeRect(i.state.position.x,i.state.position.y,i.state.dimensions.xAxis,i.state.dimensions.yAxis)},all:function(){i.debug.cordinates(),i.debug.highlight(),console.log("el",i)}},this.ctx=t,s?(this.state.position=s,this.state.grid=$(s.x,s.y)):(this.state.position=Z(n,o),this.state.grid={x:n,y:o}),a&&(this.state=Object(F.a)(Object(F.a)({},this.state),a))}return Object(h.a)(e,[{key:"isWithinBoundary",value:function(e){return!1}},{key:"getBoundaries",value:function(){var e=[[[0,0],[0,0]],[[0,0],[0,0]]];return e[0][0][0]=this.state.position.x,e[0][0][1]=this.state.position.y,e[0][1][0]=this.state.position.x+this.state.dimensions.xAxis,e[0][1][1]=this.state.position.y,e[1][0][0]=this.state.position.x,e[1][0][1]=this.state.position.y+this.state.dimensions.yAxis,e[1][1][0]=this.state.position.x+this.state.dimensions.xAxis,e[1][1][1]=this.state.position.y+this.state.dimensions.yAxis,e}},{key:"updateGrid",value:function(e,t){this.state.position=Z(e,t),this.state.grid.x=e,this.state.grid.y=t}},{key:"setActionState",value:function(e){this.state.action=Object(F.a)(Object(F.a)({},this.state.action),e)}},{key:"getActionState",value:function(){return this.state.action}}]),e}(),se=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return Object(l.a)(this,i),(n=t.call(this,e,o,s,a,r)).stateActionHistory=ne(),n.timeElapsedAction=function(e){},n.resetToTime=function(e){},n._resetToTime=function(e){for(var t,i=n.stateActionHistory.head();i;)i.val.second>e&&i.prev&&(t=i.prev,i.prev.next=void 0,n.stateActionHistory.setCurr(i.prev)),i=i.next;return t},n}return i}(oe),ae=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",c=arguments.length>5?arguments[5]:void 0;if(Object(l.a)(this,i),(n=t.call(this,e,o,s,a,c)).type=void 0,n.draw={rect:function(){n.ctx.lineWidth=2,n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color,n.ctx.strokeRect(n.state.position.x,n.state.position.y,n.state.dimensions.xAxis,n.state.dimensions.yAxis),n.ctx.fill()},lines:function(){if("V"!==n.type&&"B"!==n.type){if("H"==n.type)for(var e=n.state.dimensions.xAxis/n.state.noOfLines,t=0;t<n.state.noOfLines;t++){var i=n.state.dimensions.yAxis/2+t*e,o=i+n.state.position.x,s=n.state.position.y+n.state.dimensions.yAxis;n.state.dimensions.xAxis,n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color,n.ctx.moveTo(n.state.position.x+t*e,n.state.position.y),n.ctx.lineTo(o,s),n.ctx.stroke()}}else for(var a=n.state.dimensions.yAxis/n.state.noOfLines,r=0;r<n.state.noOfLines;r++){var c=n.state.dimensions.xAxis/2+r*a,d=c+n.state.position.y,l=n.state.position.x+n.state.dimensions.xAxis;n.state.dimensions.yAxis,n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color,n.ctx.moveTo(n.state.position.x,n.state.position.y+r*a),n.ctx.lineTo(l,d),n.ctx.stroke()}},all:function(){n.draw.rect(),n.draw.lines()}},n.ctx=e,n.type=r,n.state.noOfLines=n.state.dimensions.yAxis/10,"H"==r){var d=n.state.dimensions.xAxis;n.state.dimensions.xAxis=n.state.dimensions.yAxis,n.state.dimensions.yAxis=d}return n}return Object(h.a)(i,[{key:"updateGrid",value:function(e,t){this.updateGrid(e,t)}}]),i}(oe),re=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,"H",a)}return i}(ae),ce=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,"V",a)}return i}(ae),de=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l.a)(this,i),(n=t.call(this,e,o,s,a,{dimensions:{yAxis:10,xAxis:10}})).action={goTo:function(e,t){var i=Object(F.a)({},n.getPreviousPosition()),o=$(i.x,i.y),s={prevPosition:i,reject:function(){n.updateGrid(o.x,o.y),n.draw.all()},accept:function(){}};return n.updateGrid(e,t),s},down:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.getPreviousGrid(),i=t.x,o=t.y;return n.action.goTo(i,o+e)},up:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.getPreviousGrid(),i=t.x,o=t.y;return n.action.goTo(i,o-e)},right:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.getPreviousGrid(),i=t.x,o=t.y;return n.action.goTo(i+e,o)},left:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.getPreviousGrid(),i=t.x,o=t.y;return n.action.goTo(i-e,o)}},n.draw={history:function(){var e=n.stateActionHistory.values();e.forEach((function(t,i){if(0!=i){var o=e[i-1];n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color,n.ctx.strokeRect(o.x,o.y,t.x-o.x,t.y-o.y)}}))},arc:function(){n.ctx.beginPath(),n.ctx.arc(n.state.position.x,n.state.position.y,n.state.dimensions.xAxis/2,0,2*Math.PI,!1),n.ctx.fillStyle=n.state.color,n.ctx.fill()},all:function(){n.draw.history(),n.draw.arc()}},n.timeElapsedAction=function(e){n.stateActionHistory.add(ie({x:n.state.position.x,y:n.state.position.y,second:e}))},n.resetToTime=function(e){var t=n._resetToTime(e);return!!t&&(n.state.position.x=t.val.x,n.state.position.y=t.val.y,n.state.grid=$(t.val.x,t.val.y),!0)},n.stateActionHistory.add(ie({x:n.state.position.x,y:n.state.position.y,second:0})),n}return Object(h.a)(i,[{key:"getPlayerMoves",value:function(){var e;return(null===(e=this.stateActionHistory.tail())||void 0===e?void 0:e.val.second)||0}},{key:"getPreviousPosition",value:function(){var e;return null===(e=this.stateActionHistory.tail())||void 0===e?void 0:e.val}},{key:"getPreviousGrid",value:function(){var e,t=null===(e=this.stateActionHistory.tail())||void 0===e?void 0:e.val;return $(t.x,t.y)}},{key:"getLastActionSecond",value:function(){var e,t=this.stateActionHistory.tail();return((null===t||void 0===t?void 0:t.val.second)||0)-((null===t||void 0===t||null===(e=t.prev)||void 0===e?void 0:e.val.second)||0)}}]),i}(se),le=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(l.a)(this,i),(n=t.call(this,e,o,s,a,r)).img=new Image,n.imgPromise=null,n.draw={image:function(){var e;null===(e=n.imgPromise)||void 0===e||e.then((function(){n.ctx.drawImage(n.img,n.state.position.x,n.state.position.y,n.state.dimensions.xAxis,n.state.dimensions.yAxis)}))},all:function(){n.draw.image()}},n.img.src=c,n.imgPromise=new Promise((function(e,t){n.img.onload=function(){e(!0)}})),n}return i}(oe),he=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,{dimensions:{yAxis:80,xAxis:80},noOfLines:2},"/games/assets/flower.png")}return i}(le),ue=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,{dimensions:{yAxis:40,xAxis:80},noOfLines:2},"/games/assets/hcar.png")}return i}(le),ve=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",c=arguments.length>5?arguments[5]:void 0;if(Object(l.a)(this,i),(n=t.call(this,e,o,s,a,c)).type=void 0,n.draw={rect:function(){n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color;var e=n.state.position.x+("V"==n.type?5:0),t=n.state.position.y+("H"==n.type?5:0);n.ctx.strokeRect(e,t,n.state.dimensions.xAxis-("V"==n.type?10:0),n.state.dimensions.yAxis-("H"==n.type?10:0)),n.ctx.stroke()},cross:function(){n.ctx.beginPath(),n.ctx.lineWidth=4,n.ctx.strokeStyle=n.state.color;var e=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=n.state.action)||void 0===e?void 0:e.opened){var i;i=t?n.getBoundaries()[0][1][0]-("H"==n.type?20:0):n.getBoundaries()[0][0][0]+("H"==n.type?20:0);var o,s=n.getBoundaries()[0][0][1]+("V"==n.type?20:0);o=t?n.getBoundaries()[1][0][0]+("H"==n.type?20:0):n.getBoundaries()[1][1][0]-("H"==n.type?20:0);var a=n.getBoundaries()[1][1][1]-("V"==n.type?20:0);n.ctx.moveTo(i,s),n.ctx.lineTo(o,a),n.ctx.stroke()}};e(),e(!1)},all:function(){n.draw.rect(),n.draw.cross()}},n.timeElapsedAction=function(e){var t;n.stateActionHistory.add(ie({opened:(null===(t=n.state.action)||void 0===t?void 0:t.opened)||!1,second:e}))},n.resetToTime=function(e){var t=n._resetToTime(e);return!(!t||!n.state.action)&&(n.state.action.opened=t.val.opened,!0)},n.stateActionHistory.add(ie({opened:!1,second:0})),n.state.color="black",n.state.action={opened:!1},n.type=r,"H"==r){var d=n.state.dimensions.xAxis;n.state.dimensions.xAxis=n.state.dimensions.yAxis,n.state.dimensions.yAxis=d}return n}return Object(h.a)(i,[{key:"updateGrid",value:function(e,t){this.updateGrid(e,t)}}]),i}(se),pe=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,"H",{dimensions:{xAxis:20,yAxis:80}})}return i}(ve),xe=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l.a)(this,i),t.call(this,e,n,o,s,"V",{dimensions:{xAxis:20,yAxis:80}})}return i}(ve),be=function(){function e(t,i,n){Object(l.a)(this,e),this.title=void 0,this.img=void 0,this.elapsed=void 0,this.title=t,this.img=i,this.elapsed=n}return Object(h.a)(e,[{key:"getElapsed",value:function(){return this.elapsed}}]),e}(),fe=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(){return Object(l.a)(this,i),t.call(this,"hammer","/games/assets/hammer.avif",6)}return i}(be),me=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(){return Object(l.a)(this,i),t.call(this,"small bomb","/games/assets/small-bomb.jpg",6)}return i}(be),je=function(e){Object(v.a)(i,e);var t=Object(p.a)(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",c=arguments.length>5?arguments[5]:void 0;if(Object(l.a)(this,i),(n=t.call(this,e,o,s,a,c)).type=void 0,n.draw={rect:function(){n.ctx.beginPath(),n.ctx.strokeStyle=n.state.color;var e=n.state.position.x,t=n.state.position.y;n.ctx.strokeRect(e,t,n.state.dimensions.xAxis-("V"==n.type?10:0),n.state.dimensions.yAxis-("H"==n.type?10:0)),n.ctx.stroke()},cross:function(){n.ctx.beginPath(),n.ctx.lineWidth=4,n.ctx.strokeStyle=n.state.color;var e=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=n.state.action)||void 0===e?void 0:e.opened){var i;i=t?n.getBoundaries()[0][1][0]-("H"==n.type?20:0):n.getBoundaries()[0][0][0]+("H"==n.type?20:0);var o,s=n.getBoundaries()[0][0][1]+("V"==n.type?20:0);o=t?n.getBoundaries()[1][0][0]+("H"==n.type?20:0):n.getBoundaries()[1][1][0]-("H"==n.type?20:0);var a=n.getBoundaries()[1][1][1]-("V"==n.type?20:0);n.ctx.moveTo(i,s),n.ctx.lineTo(o,a),n.ctx.stroke()}};e(),e(!1)},all:function(){n.draw.rect(),n.draw.cross()}},n.timeElapsedAction=function(e){var t;n.stateActionHistory.add(ie({opened:(null===(t=n.state.action)||void 0===t?void 0:t.opened)||!1,second:e}))},n.resetToTime=function(e){var t=n._resetToTime(e);return!(!t||!n.state.action)&&(n.state.action.opened=t.val.opened,!0)},n.stateActionHistory.add(ie({opened:!1,second:0})),n.state.color="black",n.state.action={opened:!1},n.type=r,"H"==r){var d=n.state.dimensions.xAxis;n.state.dimensions.xAxis=n.state.dimensions.yAxis,n.state.dimensions.yAxis=d}return n}return Object(h.a)(i,[{key:"updateGrid",value:function(e,t){this.updateGrid(e,t)}}]),i}(se),ge=function(){function e(t,i,n,o){var s=this;Object(l.a)(this,e),this.pos={x:7,y:10},this.scene=[],this.currentSecond=0,this.canvasContainer=void 0,this.canvas=void 0,this.ctx=void 0,this.player=null,this.generateGrid=null,this.stack={horizontal:[],vertical:[]},this.keyCb=null,this.validateMove=function(){var e=Object(q.a)(J.a.mark((function e(t,i){var n,o,a,r,c,d,l,h,u,v,p,x,b,f;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t==V.up||t==V.down,o=!n,a=[1,2,3,4,5,6].map((function(e){return(n?i.prevPosition.y:i.prevPosition.x)+10*(t==V.up||t===V.left?-e:e)})),r=s.player.getState().position,c=Object(D.a)(s.scene),e.prev=5,c.s();case 7:if((d=c.n()).done){e.next=48;break}l=d.value,h=Object(D.a)(l),e.prev=10,h.s();case 12:if((u=h.n()).done){e.next=38;break}if(!(!(v=u.value)||v instanceof de||v instanceof ue)){e.next=16;break}return e.abrupt("continue",36);case 16:p=v.getBoundaries(),x=Object(D.a)(a),e.prev=18,x.s();case 20:if((b=x.n()).done){e.next=28;break}if(f=b.value,!((o?f:r.x)>=p[0][0][0]&&(o?f:r.x)<=p[0][1][0]&&(n?f:r.y)>=p[0][0][1]&&(n?f:r.y)<=p[1][0][1])){e.next=26;break}return e.next=25,s.itemInteraction(v);case 25:return e.abrupt("return",e.sent);case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(18),x.e(e.t0);case 33:return e.prev=33,x.f(),e.finish(33);case 36:e.next=12;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(10),h.e(e.t1);case 43:return e.prev=43,h.f(),e.finish(43);case 46:e.next=7;break;case 48:e.next=53;break;case 50:e.prev=50,e.t2=e.catch(5),c.e(e.t2);case 53:return e.prev=53,c.f(),e.finish(53);case 56:return e.abrupt("return",1);case 57:case"end":return e.stop()}}),e,null,[[5,50,53,56],[10,40,43,46],[18,30,33,36]])})));return function(t,i){return e.apply(this,arguments)}}(),this.getKeyCb=function(){var e=function(e,t,i,n,o){var s={frameX:e,frameY:t};return function(e){var t=60;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])e==V.up?i.scrollTop-=t:e==V.down?i.scrollTop+=t:e==V.right?i.scrollLeft+=t:e==V.left&&(i.scrollLeft-=t);else{e==V.up?s.frameY-=t:e==V.down?s.frameY+=t:e==V.right?s.frameX+=t:e==V.left&&(s.frameX-=t);var n=i.clientWidth/2,a=i.clientHeight/2,r=null;if(e===V.up&&o.vertical.length&&(r=o.vertical[o.vertical.length-1]),e===V.left&&o.horizontal.length&&(r=o.horizontal[o.horizontal.length-1]),e==V.down&&s.frameY>=a){o.vertical.push({frame:s.frameY,scroll:i.scrollTop});var c=i.scrollTop+a;c>i.scrollHeight&&(c=i.scrollHeight,a=i.scrollHeight-i.scrollTop),i.scrollTop=c,s.frameY-=a}if(e==V.up){if(!r)return;console.log(r),s.frameY<=r.frame&&(o.vertical.pop(),i.scrollTop=r.scroll,s.frameY=r.frame)}if(e==V.right&&s.frameX>=n){o.horizontal.push({frame:s.frameX,scroll:i.scrollLeft});var d=i.scrollLeft+n;d>i.scrollWidth&&(d=i.scrollWidth,n=i.scrollWidth-i.scrollLeft),i.scrollLeft=d,s.frameX-=n}if(e==V.left){if(!r)return;s.frameX<=r.frame&&(o.horizontal.pop(),i.scrollLeft=r.scroll,s.frameX=r.frame)}}}}(s.player.getState().position.x,s.player.getState().position.y,s.canvasContainer,s.player,s.stack);return function(){var t=Object(q.a)(J.a.mark((function t(i,n){var o,a,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i=i||window.event)&&90==i.keyCode&&i.ctrlKey||n===V.undo)){t.next=3;break}return t.abrupt("return",s.undo());case 3:if(o=!1,a=null,38==i.keyCode||n===V.up?(n=V.up,o=!0,M().screenGrabbed||(a=s.player.action.up(3))):40==i.keyCode||n===V.down?(n=V.down,o=!0,M().screenGrabbed||(a=s.player.action.down(3))):37==i.keyCode||n===V.left?(n=V.left,o=!0,M().screenGrabbed||(a=s.player.action.left(3))):39!=i.keyCode&&n!==V.right||(n=V.right,o=!0,M().screenGrabbed||(a=s.player.action.right(3))),!o||void 0==n){t.next=18;break}if(!M().screenGrabbed){t.next=9;break}return t.abrupt("return",e(n,!0));case 9:return t.next=11,s.validateMove(n,a);case 11:if(0!==(r=t.sent)){t.next=14;break}return t.abrupt("return",a.reject());case 14:1!=r?a.reject():e(n),s.currentSecond+=r,s.player.timeElapsedAction(s.currentSecond),s.render();case 18:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()},this.canvasContainer=n,this.canvas=t,this.ctx=i,this.generateGrid=o,this.render(),this.keyCb=this.getKeyCb(),ee.subscribe((function(e){s.keyCb(null,e)})),document.addEventListener("keydown",this.keyCb,!0)}return Object(h.a)(e,[{key:"destroy",value:function(){document.removeEventListener("keydown",this.keyCb,!0)}},{key:"generateScenes",value:function(){if(0==this.scene.length){this.player=new de(this.ctx,this.pos.x+-4,this.pos.y+-7);var e=new ue(this.ctx,this.pos.x+-6,this.pos.y+-8);this.scene=[[this.player],[e],[new re(this.ctx,this.pos.x,this.pos.y+0,void 0,{dimensions:{yAxis:120,xAxis:20}}),new pe(this.ctx,this.pos.x+6,this.pos.y+0),new re(this.ctx,this.pos.x+10,this.pos.y+0,void 0,{dimensions:{yAxis:540,xAxis:20}})],[new ce(this.ctx,this.pos.x,this.pos.y+1,void 0,{dimensions:{xAxis:20,yAxis:340}}),new je(this.ctx,this.pos.x+1,this.pos.y+4,void 0,"V",{dimensions:{xAxis:20,yAxis:40}}),new ce(this.ctx,this.pos.x+36,this.pos.y+1,void 0,{dimensions:{xAxis:20,yAxis:760}})],[new xe(this.ctx,this.pos.x,this.pos.y+18)],[new ce(this.ctx,this.pos.x,this.pos.y+22,void 0,{dimensions:{yAxis:340,xAxis:20}})],[new re(this.ctx,this.pos.x+0,this.pos.y+39,void 0,{dimensions:{yAxis:740,xAxis:20}})],[new he(this.ctx,this.pos.x+6,this.pos.y+18),new he(this.ctx,this.pos.x+12,this.pos.y+18)]]}this.scene.forEach((function(e){e.forEach((function(e){e&&e.draw.all()}))}))}},{key:"itemInteraction",value:function(e){var t=this;return new Promise((function(i){var n=e instanceof se;if(e.debug.all(),!n)return i(0);if(e instanceof ve){var o;if(null===(o=e.getState().action)||void 0===o?void 0:o.opened)return i(1);te.emit({toolsPrompt:{title:"Tools",data:[new fe,new me],cb:function(n){return te.emit({toolsPrompt:void 0}),n?(e.setActionState({opened:!0}),e.timeElapsedAction(t.currentSecond+n.getElapsed()),t.render(),i(n.getElapsed())):i(0)}}})}}))}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"render",value:function(){this.clearCanvas(),this.generateGrid(),this.generateScenes(),te.emit({time:this.player.getPlayerMoves()})}},{key:"undo",value:function(){var e=this;0!=this.currentSecond&&(this.currentSecond-=this.player.getLastActionSecond(),this.scene.forEach((function(t){t.forEach((function(t){t&&t instanceof se&&t.resetToTime(e.currentSecond)}))})),this.render())}}]),e}();function Ie(e,t){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=20,o=0,s=0,a=i?e.height:e.width;o<a;)t.beginPath(),i?(t.moveTo(0,o),t.lineTo(e.width,o)):(t.moveTo(o,0),t.lineTo(o,e.height)),0==o||3==s?(t.lineWidth=3,t.strokeStyle="#c2a667",s=0):(t.lineWidth=1,t.strokeStyle="#c1a46a"),t.stroke(),o+=n,s++}var Oe=function(e,t){if(e&&t){var i=e.getContext("2d");i&&(e.width=1e3,e.height=1400,new ge(e,i,t,(function(){!function(e,t){t.globalCompositeOperation="destination-under",t.fillStyle="#e3ca8c",t.fillRect(0,0,e.width,e.height),Ie(e,t,!0),Ie(e,t,!1)}(e,i)})))}};function ye(e){var t=Object(F.a)({borderRadius:"5px",backgroundColor:"rgba(73,110,83,255)",padding:"5px 25px"},e.style||{});return e.disabled&&(t.backgroundColor=void 0),Object(P.jsx)("button",Object(F.a)(Object(F.a)({},e),{},{style:t,children:e.children}))}function Pe(e){return Object(P.jsx)(ye,Object(F.a)(Object(F.a)({},e),{},{style:Object(F.a)({backgroundColor:"gray",padding:"5px"},e.style||{}),children:Object(P.jsx)("i",{className:"fa fa-undo",style:{color:"black",fontSize:"20px"}})}))}function Ye(e){var t=e.enabled;return Object(P.jsx)(ye,Object(F.a)(Object(F.a)({},e),{},{style:Object(F.a)({backgroundColor:"gray",padding:"5px"},e.style||{}),children:Object(P.jsx)("i",{className:(t?"fa-solid":"fa-regular")+" fa-hand",style:{color:"black",fontSize:"20px"}})}))}function ke(e){return Object(P.jsx)(ye,Object(F.a)(Object(F.a)({},e),{},{children:Object(P.jsx)("i",{className:"fa fa-check",style:{color:e.disabled?"gray":"#41874c",fontSize:"25px"}})}))}function we(e){return Object(P.jsx)(ye,Object(F.a)(Object(F.a)({},e),{},{children:Object(P.jsx)("i",{className:"fa fa-close",style:{color:e.disabled?"gray":"red",fontSize:"25px"}})}))}function Xe(e){var t=e.data,i=Object(n.useState)(null),o=Object(d.a)(i,2),s=o[0],a=o[1];return t?Object(P.jsx)("div",{style:{position:"fixed",top:"0px",width:"100vw",height:"100vh",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(P.jsxs)("div",{style:{background:"#b5aaa0",width:"100%",maxWidth:"500px",padding:"5px"},children:[Object(P.jsx)("div",{style:{background:"#6f768a",padding:"2px",marginBottom:"10px"},children:t.title}),Object(P.jsx)("div",{style:{},children:t.data.map((function(e){var t=e.title==(null===s||void 0===s?void 0:s.title);return Object(P.jsxs)("div",{onClick:function(){a(e)},style:Object(F.a)({marginLeft:"10px",marginBottom:"5px",display:"flex",overflow:"hidden",padding:"5px",borderRadius:"5px",border:"1px solid transparent"},t?{border:"1px solid white"}:{}),children:[Object(P.jsx)("div",{style:{background:"#b4aaa2",borderRadius:"5px",width:"50px",height:"50px",display:"flex",overflow:"hidden"},children:Object(P.jsx)("img",{style:{width:"100%"},src:e.img})}),Object(P.jsx)("div",{style:{marginLeft:"10px"},children:e.title})]},e.title)}))}),Object(P.jsx)("br",{}),Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)(ke,{onClick:function(){return e.dataRef.cb(s)},disabled:!s}),Object(P.jsx)(we,{onClick:function(){return e.dataRef.cb(null)}})]})]})}):Object(P.jsx)(P.Fragment,{})}function We(e){var t=Math.floor(e.time/60),i=e.time%60;return Object(P.jsxs)("div",{style:{background:"#ada69c",borderRadius:"5px",padding:"2.5px 5px",display:"inline-block",color:"#faf985",fontWeight:"bold",fontSize:"22px"},children:[t<10?"0"+t:t,":",i<10?"0"+i:i]})}var Se=function(){var e=Object(n.useContext)(S),t=e.stageProps,i=e.setStageProps;function o(){return Object(P.jsxs)("div",{style:{position:"fixed",bottom:"0px",width:"100vw",background:"#213c42",zIndex:2},className:"p-2",children:[Object(P.jsxs)("div",{style:{textAlign:"right"},children:[!!t.time&&Object(P.jsx)(Pe,{style:{margin:0,marginRight:"5px"},onClick:function(){ee.emit(V.undo)}}),Object(P.jsx)(Ye,{enabled:t.screenGrabbed,style:{margin:0,marginRight:"5px"},onClick:function(){i(Object(F.a)(Object(F.a)({},t),{},{screenGrabbed:!t.screenGrabbed}))}}),Object(P.jsx)(We,{time:t.time})]}),Object(P.jsx)("br",{})]})}return Object(n.useEffect)((function(){var e=te.subscribe((function(e){void 0!=e.time&&(t.time=e.time),t.toolsPrompt=e.toolsPrompt,i(Object(F.a)({},t))}));return function(){e.unsubscribe()}}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Xe,{data:t.toolsPrompt,dataRef:M().toolsPrompt}),Object(P.jsx)(o,{})]})},Ae=i(28);var Me=function(){var e=Object(n.useContext)(S).stageProps,t=Object(n.useRef)(null),i=Object(n.useRef)(null);Object(n.useEffect)((function(){Oe(t.current,i.current)}),[]);var o=Object(Ae.a)(Object(F.a)({onSwiped:function(e){"Left"===e.dir&&ee.emit(V.left),"Right"===e.dir&&ee.emit(V.right),"Up"===e.dir&&ee.emit(V.up),"Down"===e.dir&&ee.emit(V.down)}},{delta:10,preventScrollOnSwipe:!1,trackTouch:!0,trackMouse:!1,rotationAngle:0,swipeDuration:1/0,touchEventOptions:{passive:!0}}));return Object(P.jsx)("div",Object(F.a)(Object(F.a)({},o),{},{children:Object(P.jsxs)("div",{ref:i,className:"StolenIn60SecondsGame "+(e.screenGrabbed?"":"prevent-grab"),children:[Object(P.jsx)("canvas",{ref:t,style:{touchAction:"auto"}}),Object(P.jsx)(Se,{})]})}))};var Be=function(){var e=Object(n.useContext)(S);return e.showNav,e.setShowNav,Object(P.jsxs)(r.a,{basename:"/games",children:[Object(P.jsx)(_,{}),Object(P.jsxs)(c.c,{children:[Object(P.jsx)(c.a,{path:"/chess",component:T}),Object(P.jsx)(c.a,{path:"/checkers",component:U}),Object(P.jsx)(c.a,{path:"/stolen-in-60-seconds",component:Me}),Object(P.jsx)(c.a,{path:"/",component:C})]})]})},Te=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,47)).then((function(t){var i=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;i(e),n(e),o(e),s(e),a(e)}))};a.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(B,{children:Object(P.jsx)(Be,{})})}),document.getElementById("root")),Te()}},[[46,1,2]]]);
//# sourceMappingURL=main.7265de2d.chunk.js.map